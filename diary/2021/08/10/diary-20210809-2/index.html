<!DOCTYPE HTML>
<html lang="zh-CN">
    


<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    <meta name="keywords" content="ThreeJS入门, 车舟慢">
    <meta name="baidu-site-verification" content="fmlEuI34ir">
    <meta name="google-site-verification" content="KeoTn_OFy4ndJwXNmm2gMeQfPhd7alqE9vQDwI32KCY">
    <meta name="description" content="基于threejs的场景编辑器.rar
什么是three.js相对于Flash、Flex、Silverlight等富客户端，WebGL之ThreeJS通过OpenGLES2.0，WebGL可以为Canvas提供硬件3D加速渲染，这样Web开">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>ThreeJS入门 | 车舟慢</title>
    <link rel="icon" type="image/png" href="/diary/favicon.png">

    <link rel="stylesheet" type="text/css" href="/diary/libs/awesome/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="/diary/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/diary/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/diary/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/diary/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/diary/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/diary/css/my.css">
    
    <style type="text/css">
        
    </style>

    <script src="/diary/libs/jquery/jquery-2.2.0.min.js"></script>
    <script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script>
    
    <script>
        var _hmt = _hmt || [];
        (function () {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?46e79e71af0709a5b9106bf20cecc493";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>

    
    
        <script>
            (function(){
                var bp = document.createElement('script');
                var curProtocol = window.location.protocol.split(':')[0];
                if (curProtocol === 'https') {
                    bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
                }
                else {
                    bp.src = 'http://push.zhanzhang.baidu.com/push.js';
                }
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(bp, s);
            })();
        </script>
    

<link rel="stylesheet" href="/diary/css/prism-tomorrow.css" type="text/css">
<link rel="stylesheet" href="/diary/css/prism-line-numbers.css" type="text/css"></head>

    <body>

        <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/diary/" class="waves-effect waves-light">
                    
                    <img src="/diary/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">车舟慢</span>
                </a>
            </div>
            


<!-- <a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fa fa-navicon"></i></a>
<ul class="right">
    
    <li class="hide-on-med-and-down">
        <a href="/diary/" class="waves-effect waves-light">
            
            <i class="fa fa-home"></i>
            
            <span>首页</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/diary/categories" class="waves-effect waves-light">
            
            <i class="fa fa-bookmark"></i>
            
            <span>分类</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/diary/archives" class="waves-effect waves-light">
            
            <i class="fa fa-archive"></i>
            
            <span>归档</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/diary/demo/shuoshuo" class="waves-effect waves-light">
            
            <i class="fa fa-music"></i>
            
            <span>说说</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/diary/galleries" class="waves-effect waves-light">
            
            <i class="fa fa-photo"></i>
            
            <span>相册</span>
        </a>
    </li>
    
    <li>
        <a href="#searchModal" class="modal-trigger waves-effect waves-light">
            <i id="searchIcon" class="fa fa-search" title="搜索"></i>
        </a>
    </li>
</ul> -->

<!-- 支持二级菜单特性  -->
<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fa fa-navicon"></i></a>
<ul class="right nav-menu">
    
      <li class="hide-on-med-and-down nav-item" >

        
            <a href="/diary/" class="waves-effect waves-light">
              
                <i class="fa fa-home"></i>
              
              <span>首页</span>
            </a>

            
      </li>
    
      <li class="hide-on-med-and-down nav-item" >

        
            <a href="/diary/categories" class="waves-effect waves-light">
              
                <i class="fa fa-bookmark"></i>
              
              <span>分类</span>
            </a>

            
      </li>
    
      <li class="hide-on-med-and-down nav-item" >

        
            <a href="/diary/archives" class="waves-effect waves-light">
              
                <i class="fa fa-archive"></i>
              
              <span>归档</span>
            </a>

            
      </li>
    
      <li class="hide-on-med-and-down nav-item" >

        
            <a href="/diary/demo/shuoshuo" class="waves-effect waves-light">
              
                <i class="fa fa-music"></i>
              
              <span>说说</span>
            </a>

            
      </li>
    
      <li class="hide-on-med-and-down nav-item" >

        
            <a href="/diary/galleries" class="waves-effect waves-light">
              
                <i class="fa fa-photo"></i>
              
              <span>相册</span>
            </a>

            
      </li>
    

    <li>
        <a href="#searchModal" class="modal-trigger waves-effect waves-light">
            <i id="searchIcon" class="fa fa-search" title="搜索"></i>
        </a>
    </li>

</ul>

<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/diary/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">车舟慢</div>
        <div class="logo-desc">
            
            雁引愁心去，山衔好月来。
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li>
            <a href="/diary/" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-home"></i>
                
                首页
            </a>
        </li>
        
        <li>
            <a href="/diary/categories" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-bookmark"></i>
                
                分类
            </a>
        </li>
        
        <li>
            <a href="/diary/archives" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-archive"></i>
                
                归档
            </a>
        </li>
        
        <li>
            <a href="/diary/demo/shuoshuo" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-music"></i>
                
                说说
            </a>
        </li>
        
        <li>
            <a href="/diary/galleries" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-photo"></i>
                
                相册
            </a>
        </li>
        
        
    </ul>

   
   
<!-- 支持二级菜单特性   -->
<!-- <ul class="menu-list mobile-menu-list">
    
        <li class="m-nav-item">
                
                    <a href="/diary/" class="waves-effect waves-light">
                        
                        <i class="fa fa-fw fa-home"></i>
                        
                        首页
                    </a>
              
            </li>
        
        <li class="m-nav-item">
                
                    <a href="/diary/categories" class="waves-effect waves-light">
                        
                        <i class="fa fa-fw fa-bookmark"></i>
                        
                        分类
                    </a>
              
            </li>
        
        <li class="m-nav-item">
                
                    <a href="/diary/archives" class="waves-effect waves-light">
                        
                        <i class="fa fa-fw fa-archive"></i>
                        
                        归档
                    </a>
              
            </li>
        
        <li class="m-nav-item">
                
                    <a href="/diary/demo/shuoshuo" class="waves-effect waves-light">
                        
                        <i class="fa fa-fw fa-music"></i>
                        
                        说说
                    </a>
              
            </li>
        
        <li class="m-nav-item">
                
                    <a href="/diary/galleries" class="waves-effect waves-light">
                        
                        <i class="fa fa-fw fa-photo"></i>
                        
                        相册
                    </a>
              
            </li>
        

        
    </ul> -->

</div>

        </div>

        
    </nav>

</header>

        
<script src="/diary/libs/cryptojs/crypto-js.min.js"></script>
<script>
    (function() {
        let pwd = '';
        if (pwd && pwd.length > 0) {
            if (pwd !== CryptoJS.SHA256(prompt('请输入访问本文章的密码')).toString(CryptoJS.enc.Hex)) {
                alert('密码错误，将返回主页！');
                location.href = '/diary/';
            }
        }
    })();
</script>




<div class="bg-cover pd-header post-cover" style="background-image: url('/diary/medias/featureimages/10.jpg')">
    <div class="container">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <div class="description center-align post-title">
                        ThreeJS入门
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<main class="post-container content">

    
    <link rel="stylesheet" href="/diary/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #toc-content .is-active-link::before {
        background-color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 20px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/diary/tags/three-js/" target="_blank">
                                <span class="chip bg-color">three.js</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                </div>
            </div>
            
            <div class="post-info">
                <div class="post-date info-break-policy">
                    <i class="fa fa-calendar-minus-o fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2021-08-10
                </div>

                <div class="post-author info-break-policy">
                    <i class="fa fa-user-o fa-fw"></i>作者:&nbsp;&nbsp;
                    
                        sean
                    
                </div>

                
                    
                    <div class="info-break-policy">
                        <i class="fa fa-file-word-o fa-fw"></i>文章字数:&nbsp;&nbsp;
                        19.7k
                    </div>
                    

                    
                    <div class="info-break-policy">
                        <i class="fa fa-clock-o fa-fw"></i>阅读时长:&nbsp;&nbsp;
                        97 分
                    </div>
                    
                
                
                

            </div>
        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <p><a href="https://pan.baidu.com/s/19b2aXUathIRDKqndyZ8TCQ" target="_blank">基于threejs的场景编辑器.rar</a></p>
<h2 id="什么是three-js"><a href="#什么是three-js" class="headerlink" title="什么是three.js"></a>什么是three.js</h2><p>相对于Flash、Flex、Silverlight等富客户端，WebGL之ThreeJS通过OpenGLES2.0，WebGL可以为Canvas提供硬件3D加速渲染，这样Web开发人员就可以借助系统显卡来在浏览器里更流畅地展示3D场景和模型了，还能创建复杂的导航和数据视觉化。这是未来的网游趋势，如果你想做可视化动画三维企业应用，又不想用复杂的C++程序，那么 Three.js 将会是你最好的选择。  </p>
<p>Three.js中，要渲染物体到网页中，需要3个基本对象(场景、相机、渲染器)，场景对应于整个布景空间，相机对应于拍摄镜头，渲染器用来把拍摄的场景转换成胶卷。  </p>
<blockquote>
<p>场景(scene)  </p>
</blockquote>
<p>在Threejs中场景就只有一种，用THREE.Scene来表示。  </p>
<pre class="line-numbers language-js"><code class="language-js"><span class="token keyword">var</span> scene <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<blockquote>
<p>相机(camera)  </p>
</blockquote>
<p>在Threejs中最常用的相机有两种：正投影相机THREE.OrthographicCamera和透视投影相机THREE.PerspectiveCamera。<br><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="../../../../images/threejscameratype.jpg" alt="">  </p>
<pre class="line-numbers language-js"><code class="language-js"><span class="token function">函数构造：OrthographicCamera</span><span class="token punctuation">(</span> left <span class="token punctuation">:</span> Number<span class="token punctuation">,</span> right <span class="token punctuation">:</span> Number<span class="token punctuation">,</span> top <span class="token punctuation">:</span> Number<span class="token punctuation">,</span> bottom <span class="token punctuation">:</span> Number<span class="token punctuation">,</span> near <span class="token punctuation">:</span> Number<span class="token punctuation">,</span> far <span class="token punctuation">:</span> Number <span class="token punctuation">)</span>  
<span class="token keyword">var</span> camera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>OrthographicCamera</span><span class="token punctuation">(</span> width <span class="token operator">/</span> <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">,</span> width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> height <span class="token operator">/</span> <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1000</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> camera <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="../../../../images/threejscameratype0.jpg" alt="正交投影相机示意">  </p>
<pre class="line-numbers language-js"><code class="language-js"><span class="token function">函数构造：PerspectiveCamera</span><span class="token punctuation">(</span> fov <span class="token punctuation">:</span> Number<span class="token punctuation">,</span> aspect <span class="token punctuation">:</span> Number<span class="token punctuation">,</span> near <span class="token punctuation">:</span> Number<span class="token punctuation">,</span> far <span class="token punctuation">:</span> Number <span class="token punctuation">)</span>
<span class="token keyword">var</span> camera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PerspectiveCamera</span><span class="token punctuation">(</span> <span class="token number">45</span><span class="token punctuation">,</span> width <span class="token operator">/</span> height<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1000</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>camera<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="../../../../images/threejscameratype1.jpg" alt="透视投影相机示意">  </p>
<blockquote>
<p>渲染器(render)  </p>
</blockquote>
<pre class="line-numbers language-js"><code class="language-js"><span class="token keyword">var</span> renderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>WebGLRenderer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
renderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span> window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerHeight <span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span> renderer<span class="token punctuation">.</span>domElement <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>除了创建renderer实例，还需要设置渲染空间的尺寸，一般使用目标屏幕的宽高（window.innerWidth和window.innerHeight），也可以给定一个尺寸。<br>渲染器renderer的domElement元素，表示渲染器中的画布，所有的渲染都是画在domElement上的，所以这里的appendChild表示将这个domElement挂接在body下面，这样渲染的结果就能够在页面中显示了。  </p>
<blockquote>
<p>添加对象  </p>
</blockquote>
<p>创建几何体，创建材质，利用几何体和材质创建对象，将对象加入场景scene中。默认情况下，当我们调用scene.add()的时候，物体将会被添加到坐标为(0,0,0)的位置。但这可能会使得摄像机的位置和立方体相互重叠（摄像机位于立方体中）。为了防止这种情况的发生，需要将摄像机稍微向外移动一些。  </p>
<pre class="line-numbers language-js"><code class="language-js"><span class="token keyword">var</span> geometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>BoxGeometry</span><span class="token punctuation">(</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">var</span> material<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token number">0x4ca7c1</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">var</span> cube <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span> geometry<span class="token punctuation">,</span> material <span class="token punctuation">)</span><span class="token punctuation">;</span> 
scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> cube <span class="token punctuation">)</span><span class="token punctuation">;</span>

camera<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>渲染场景  </p>
</blockquote>
<pre class="line-numbers language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span> animate <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//让物体动起来</span>
    cube<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>x <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">0.01</span><span class="token punctuation">;</span>
    cube<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>y <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">0.01</span><span class="token punctuation">;</span>

    renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span> scene<span class="token punctuation">,</span> camera <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>这里我们创建了一个循环——这使得渲染器能够在每次屏幕刷新时对场景进行绘制（在大多数屏幕上，刷新率一般是60次/秒）。requestAnimationFrame函数就是让浏览器去执行一次参数中的函数，这样通过上面render中调用requestAnimationFrame()函数，requestAnimationFrame()函数又让render()再执行一次，就形成了我们通常所说的游戏循环了。  </p>
<pre class="line-numbers language-html"><code class="language-html">//完整示例
<span class="token doctype">&lt;!DOCTYPE html></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style language-css"> 
            <span class="token selector">*</span><span class="token punctuation">{</span>
                <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
                <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token selector">body</span><span class="token punctuation">{</span>
                <span class="token property">overflow-x</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
                <span class="token property">overflow-y</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>build/three.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">
        document<span class="token punctuation">.</span>oncontextmenu<span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token keyword">var</span> scene<span class="token punctuation">,</span>camera<span class="token punctuation">,</span>renderer<span class="token punctuation">;</span>
        <span class="token keyword">var</span> geometry<span class="token punctuation">,</span>material<span class="token punctuation">,</span>mesh<span class="token punctuation">;</span>
        <span class="token keyword">var</span> width<span class="token punctuation">,</span>height<span class="token punctuation">;</span>

        <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token keyword">function</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            scene <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            camera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PerspectiveCamera</span><span class="token punctuation">(</span> <span class="token number">75</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerWidth <span class="token operator">/</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">1000</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z<span class="token operator">=</span><span class="token number">500</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//scene.add(camera);</span>

            geometry<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>IcosahedronGeometry</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            material<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span><span class="token number">0x000000</span><span class="token punctuation">,</span>wireframe<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>wireframeLinewidth<span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            mesh<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>geometry<span class="token punctuation">,</span>material<span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>mesh<span class="token punctuation">)</span><span class="token punctuation">;</span>

            renderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>WebGLRenderer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                antialias<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false表示是否开启反锯齿</span>
                alpha<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false 表示是否可以设置背景色透明</span>
                precision<span class="token punctuation">:</span> <span class="token string">'highp'</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// highp/mediump/lowp 表示着色精度选择</span>
                premultipliedAlpha<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false 表示是否可以设置像素深度（用来度量图像的分辨率）</span>
                preserveDrawingBuffer<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false 表示是否保存绘图缓冲</span>
                maxLights<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 最大灯光数</span>
                stencil<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token comment" spellcheck="true">// false/true 表示是否使用模板字体或图案</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            renderer<span class="token punctuation">.</span><span class="token function">setClearColor</span><span class="token punctuation">(</span><span class="token number">0xEEEEEE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            renderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span> window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerHeight <span class="token punctuation">)</span><span class="token punctuation">;</span>
            document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span> renderer<span class="token punctuation">.</span>domElement <span class="token punctuation">)</span><span class="token punctuation">;</span>

            window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> onWindowResize<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>


        <span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span> animate <span class="token punctuation">)</span><span class="token punctuation">;</span>            
            <span class="token comment" spellcheck="true">//让物体动起来</span>
            <span class="token comment" spellcheck="true">//mesh.rotation.x += Date.now()*0.00001;</span>
            <span class="token comment" spellcheck="true">//mesh.rotation.y += Date.now()*0.00001;</span>
            mesh<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>x <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">0.01</span><span class="token punctuation">;</span>
            mesh<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>y <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">0.01</span><span class="token punctuation">;</span>            
            renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>scene<span class="token punctuation">,</span> camera <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">onWindowResize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            width <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>
            height <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>left <span class="token operator">=</span> width <span class="token operator">/</span> <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>right <span class="token operator">=</span> width <span class="token operator">/</span>  <span class="token number">2</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>top <span class="token operator">=</span> height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>bottom <span class="token operator">=</span> height <span class="token operator">/</span>  <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">;</span>

            <span class="token comment" spellcheck="true">//更新相机投影矩阵，在相机任何参数被改变以后必须被调用</span>
            camera<span class="token punctuation">.</span><span class="token function">updateProjectionMatrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            renderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span> width<span class="token punctuation">,</span>height <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="Geometry"><a href="#Geometry" class="headerlink" title="Geometry"></a>Geometry</h2><p>Threejs使用的是右手坐标系。x轴正方向向右，y轴正方向向上，z轴由屏幕从里向外。  </p>
<p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="../../../../images/threejsZuobiaoxi.jpg" alt="threejs空间右手坐标系">  </p>
<p>Geometry 是对 BufferGeometry 的用户有好替代。Geometry 利用 Vector3 或 Color 存储了几何体的相关 attributes（如顶点位置，面信息，颜色等）比起 BufferGeometry 更容易读写，但是运行效率不如。  </p>
<pre class="line-numbers language-js"><code class="language-js"><span class="token function">构造函数Geometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
构造函数没有任何参数。

属性
<span class="token punctuation">.</span>boundingBox <span class="token punctuation">:</span> Box3
Geometry 的外边界矩形，可以通过 <span class="token punctuation">.</span><span class="token function">computeBoundingBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 进行计算，默认值是 <span class="token keyword">null</span>。

<span class="token punctuation">.</span>boundingSphere <span class="token punctuation">:</span> Sphere
Geometry 的外边界球形，可以通过 <span class="token punctuation">.</span><span class="token function">computeBoundingSphere</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 进行计算，默认值是 <span class="token keyword">null</span>。

<span class="token punctuation">.</span>colors <span class="token punctuation">:</span> Array
顶点 colors 队列，与顶点数量和顺序保持一致。

该属性用于 Points 、 Line 或派生自 LineSegments 的类。 对于 Meshes，请使用 Face3<span class="token punctuation">.</span>vertexColors 函数。

如果要标记队列中的数据已经更新，Geometry<span class="token punctuation">.</span>colorsNeedUpdate 值需要被设置为 <span class="token boolean">true</span>。

<span class="token punctuation">.</span>faces <span class="token punctuation">:</span> Array
faces 队列。
描述每个顶点之间如何组成模型面的面队列。同时该队列保存面和顶点的法向量和颜色信息。

如果要标记队列中的数据已经更新，Geometry<span class="token punctuation">.</span>elementsNeedUpdate 值需要被设置为 <span class="token boolean">true</span>。

<span class="token punctuation">.</span>faceVertexUvs <span class="token punctuation">:</span> Array
面的 UV 层的队列，该队列用于将纹理和几何信息进行映射。
每个 UV 层都是一个 UV 的队列，顺序和数量同面中的顶点相对用。

如果要标记队列中的数据已经更新，Geometry<span class="token punctuation">.</span>uvsNeedUpdate 值需要被设置为 <span class="token boolean">true</span>。

<span class="token punctuation">.</span>id <span class="token punctuation">:</span> Integer
当前 geometry 实例的唯一标识符的数。

<span class="token punctuation">.</span>isGeometry <span class="token punctuation">:</span> Boolean
用于判断当前类或派生类属于 Geometries。默认值是 <span class="token boolean">true</span>。

你不应该改变该值，该值用于内部优化。

<span class="token punctuation">.</span>lineDistances <span class="token punctuation">:</span> array
用于保存线型几何体中每个顶点间距离的。在正确渲染 LineDashedMaterial 时，需要用到该数据。

<span class="token punctuation">.</span>morphTargets <span class="token punctuation">:</span> Array
morph targets 的队列。每个 morph target 都是一个如下的 javascript 对象：
<span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"targetName"</span><span class="token punctuation">,</span> vertices<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">...</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span>Morph 顶点和几何体原始顶点在数量和顺序上需要一一对应。

<span class="token punctuation">.</span>morphNormals <span class="token punctuation">:</span> Array
一个 morph 法向量的数组。Morph 法向量和 morph target 有类似的结构，每个法向量都是一个如下的 Javascript 对象<span class="token punctuation">:</span>
morphNormal <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"NormalName"</span><span class="token punctuation">,</span> normals<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">...</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span>示例详见 WebGL <span class="token operator">/</span> morphNormals。

<span class="token punctuation">.</span>name <span class="token punctuation">:</span> String
当前几何的可选别名。默认值是一个空字符串。

<span class="token punctuation">.</span>skinWeights <span class="token punctuation">:</span> Array
当在处理一个 SkinnedMesh 时，每个顶点最多可以有 <span class="token number">4</span> 个相关的 bones 来影响它。 skinWeights 属性是一个权重队列，顺序同几何体中的顶点保持一致。因而，队列中的第一个 skinWeight 就对应几何体中的第一个顶点。由于每个顶点可以被 <span class="token number">4</span> 个 bones 营销，因而每个顶点的 skinWeights 就采用一个 Vector4 表示。

skinWeight 矢量中每个元素的取值范围应该在 <span class="token number">0</span> 到 <span class="token number">1</span> 之间。例如，当设置为 <span class="token number">0</span>，骨骼对该顶点的位置没有影响。当设置为 <span class="token number">0.5</span><span class="token punctuation">,</span> 则对顶点的影响为 <span class="token number">50</span><span class="token operator">%</span>。 当设置为 <span class="token number">100</span><span class="token operator">%</span> 则对顶点的影响是 <span class="token number">100</span><span class="token operator">%</span>。如果矢量中只有一个骨骼与顶点相关联，则你只需要关注矢量中的第一个元素， 剩余的元素可以忽略，他们的值可以都设置为 <span class="token number">0</span>。

<span class="token punctuation">.</span>skinIndices <span class="token punctuation">:</span> Array
就如同 skinWeights 属性一样。skinWeights 的值也是与几何体的顶点相对应。每个顶点可以最多有 <span class="token number">4</span> 个骨骼与之相关联。 因而第一个 skinIndex 就与几何体的第一个顶点相关联，skinIndex 的值就指明了影响该顶点的骨骼是哪个。例如，第一个顶点的值是 <span class="token punctuation">(</span> <span class="token number">10.05</span><span class="token punctuation">,</span> <span class="token number">30.10</span><span class="token punctuation">,</span> <span class="token number">12.12</span> <span class="token punctuation">)</span>，第一个 skinIndex <span class="token function">的值是</span><span class="token punctuation">(</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span>，第一个 skinWeight 的值是 <span class="token punctuation">(</span> <span class="token number">0.8</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span>。上述值表明第一个顶点受到mesh<span class="token punctuation">.</span>bones<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span>骨骼的影响有 <span class="token number">80</span><span class="token operator">%</span>， 受到 skeleton<span class="token punctuation">.</span>bones<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> 的影响是 <span class="token number">20</span><span class="token operator">%</span>，由于另外两个 skinWeight 的值是 <span class="token number">0</span>，因而他们对顶点没有任何影响。

下面以代码的形式展示示例：
<span class="token comment" spellcheck="true">// 例如</span>
geometry<span class="token punctuation">.</span>skinIndices<span class="token punctuation">[</span><span class="token number">15</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector4</span><span class="token punctuation">(</span>   <span class="token number">0</span><span class="token punctuation">,</span>   <span class="token number">5</span><span class="token punctuation">,</span>   <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
geometry<span class="token punctuation">.</span>skinWeights<span class="token punctuation">[</span><span class="token number">15</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector4</span><span class="token punctuation">(</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.3</span><span class="token punctuation">,</span>  <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// 与该顶点相关</span>
geometry<span class="token punctuation">.</span>vertices<span class="token punctuation">[</span><span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// 相应骨骼可以这样被调用:</span>
skeleton<span class="token punctuation">.</span>bones<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// weight of 0.2</span>
skeleton<span class="token punctuation">.</span>bones<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// weight of 0.5</span>
skeleton<span class="token punctuation">.</span>bones<span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// weight of 0.3</span>
skeleton<span class="token punctuation">.</span>bones<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// weight of 0</span>
<span class="token punctuation">.</span>uuid <span class="token punctuation">:</span> String
当前对象实例的 UUID。 该值会被自动分配，请不要修改它。

<span class="token punctuation">.</span>vertices <span class="token punctuation">:</span> Array
vertices 的队列。
顶点的队列，保存了模型中每个顶点的位置信息。
如果要标记队列中的数据已经更新，<span class="token punctuation">.</span>verticesNeedUpdate 值需要被设置为 <span class="token boolean">true</span>。

<span class="token punctuation">.</span>verticesNeedUpdate <span class="token punctuation">:</span> Boolean
如果顶点队列中的数据被修改，该值需要被设置为 <span class="token boolean">true</span>。

<span class="token punctuation">.</span>elementsNeedUpdate <span class="token punctuation">:</span> Boolean
如果面队列中的数据被修改，该值需要被设置为 <span class="token boolean">true</span>。

<span class="token punctuation">.</span>uvsNeedUpdate <span class="token punctuation">:</span> Boolean
如果 UV 队列中的数据被修改，该值需要被设置为 <span class="token boolean">true</span>。

<span class="token punctuation">.</span>normalsNeedUpdate <span class="token punctuation">:</span> Boolean
如果法向量队列中的数据被修改，该值需要被设置为 <span class="token boolean">true</span>。

<span class="token punctuation">.</span>colorsNeedUpdate <span class="token punctuation">:</span> Boolean
如果颜色队列或 face3 的颜色数据被修改，该值需要被设置为 <span class="token boolean">true</span>。

<span class="token punctuation">.</span>groupsNeedUpdate <span class="token punctuation">:</span> Boolean
如果 face3 的 materialIndex 被修改，该值需要被设置为 <span class="token boolean">true</span>。

<span class="token punctuation">.</span>lineDistancesNeedUpdate <span class="token punctuation">:</span> Boolean
如果 linedistances 队列中的数据被修改，该值需要被设置为 <span class="token boolean">true</span>。

方法
EventDispatcher 该类中可用的函数。
<span class="token punctuation">.</span>applyMatrix <span class="token punctuation">(</span> matrix <span class="token punctuation">:</span> Matrix4 <span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">null</span>
将矩阵信息直接应用于几何体顶点坐标。

<span class="token punctuation">.</span>center <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> Geometry
基于外边界矩形将几何体居中。

<span class="token punctuation">.</span>clone <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> Geometry
克隆当前几何体。

该方法除几何体的顶点、面信息和 UV 外不会复制其他属性。

<span class="token punctuation">.</span>computeBoundingBox <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">null</span>
计算当前几何体的外边界矩形。该方法会更新 Geometry<span class="token punctuation">.</span>boundingBox 属性值。

<span class="token punctuation">.</span>computeBoundingSphere <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">null</span>
计算当前几何体的外边界球。该方法会更新 Geometry<span class="token punctuation">.</span>boundingSphere 属性值。

计算外边界矩形或外边界球并不是默认会自动调用的方法，这两个函数需要被显示的调用才能天得到相应属性值，否则对应属性值保持默认值 <span class="token keyword">null</span>。

<span class="token punctuation">.</span>computeFaceNormals <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">null</span>
计算 face normals 值。

<span class="token punctuation">.</span>computeFlatVertexNormals <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">null</span>
计算 flat vertex normals 值。 该方法会将顶点法向量的值赋值为相应面的法向量值。

<span class="token punctuation">.</span>computeMorphNormals <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">null</span>
计算 <span class="token punctuation">.</span>morphNormals 值。

<span class="token punctuation">.</span>computeVertexNormals <span class="token punctuation">(</span> areaWeighted <span class="token punctuation">:</span> Boolean <span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">null</span>
areaWeighted <span class="token operator">-</span> 如果该值设置为 <span class="token boolean">true</span>，则每个面的法向量对顶点法向量的影响按照面的面积大小来计算。默认值为 <span class="token boolean">true</span><span class="token punctuation">.</span>

通过周围面的法向量计算顶点的法向量。

<span class="token punctuation">.</span>copy <span class="token punctuation">(</span> geometry <span class="token punctuation">:</span> Geometry <span class="token punctuation">)</span> <span class="token punctuation">:</span> Geometry
将参数代表的几何体的顶点、面和 UV 复制到当前几何体。该方法不会复制除此以外的别的属性值。

<span class="token punctuation">.</span>dispose <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">null</span>
将对象从内存中删除。
在你删除一个几何体时，不要忘记调用该方法，否则会造成内存泄漏。

<span class="token punctuation">.</span>fromBufferGeometry <span class="token punctuation">(</span> geometry <span class="token punctuation">:</span> BufferGeometry <span class="token punctuation">)</span> <span class="token punctuation">:</span> Geometry
将一个 BufferGeometry 对象，转换成一个 Geometry 对象。

<span class="token punctuation">.</span>lookAt <span class="token punctuation">(</span> vector <span class="token punctuation">:</span> Vector3 <span class="token punctuation">)</span> <span class="token punctuation">:</span> Geometry
vector <span class="token operator">-</span> 当前几何体朝向的世界坐标。

该方法将几何体进行旋转，是的几何体朝向参数指定的世界坐标。该方法一般在一次处理中完成，但不在渲染过程中执行。
一般使用 Object3D<span class="token punctuation">.</span>lookAt 方法进行实时更改。

<span class="token punctuation">.</span>merge <span class="token punctuation">(</span> geometry <span class="token punctuation">:</span> Geometry<span class="token punctuation">,</span> matrix <span class="token punctuation">:</span> Matrix4<span class="token punctuation">,</span> materialIndexOffset <span class="token punctuation">:</span> Integer <span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">null</span>
将两个几何体，或一个几何体和一个从对象中通过变换获得的几何体进行合并。

<span class="token punctuation">.</span>mergeMesh <span class="token punctuation">(</span> mesh <span class="token punctuation">:</span> Mesh <span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">null</span>
将参数指定的面片信息与当前几何体进行合并。同样会使用到参数 mesh 的变换。

<span class="token punctuation">.</span>mergeVertices <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">null</span>
通过 hashmap 检查重复的顶点。
重复的顶点将会被移除，面的顶点信息会被更新。

<span class="token punctuation">.</span>normalize <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">null</span>
将当前几何体归一化。
将当前几何体居中，并且使得该几何体的外边界球半径为 <span class="token number">1.0</span>。

<span class="token punctuation">.</span>rotateX <span class="token punctuation">(</span> radians <span class="token punctuation">:</span> Float <span class="token punctuation">)</span> <span class="token punctuation">:</span> Geometry
将几何体绕 X 轴旋转参数指定度数。该操作通常在一次处理中完成，但不会在渲染过程中处理。
使用 Object3D<span class="token punctuation">.</span>rotation 对模型面片进行实时旋转处理。

<span class="token punctuation">.</span>rotateY <span class="token punctuation">(</span> radians <span class="token punctuation">:</span> Float <span class="token punctuation">)</span> <span class="token punctuation">:</span> Geometry
将几何体绕 Y 轴旋转参数指定度数。该操作通常在一次处理中完成，但不会在渲染过程中处理。
使用 Object3D<span class="token punctuation">.</span>rotation 对模型面片进行实时旋转处理。

<span class="token punctuation">.</span>rotateZ <span class="token punctuation">(</span> radians <span class="token punctuation">:</span> Float <span class="token punctuation">)</span> <span class="token punctuation">:</span> Geometry
将几何体绕 Z 轴旋转参数指定度数。该操作通常在一次处理中完成，但不会在渲染过程中处理。
使用 Object3D<span class="token punctuation">.</span>rotation 对模型面片进行实时旋转处理。

<span class="token punctuation">.</span>setFromPoints <span class="token punctuation">(</span> points <span class="token punctuation">:</span> Array <span class="token punctuation">)</span> <span class="token punctuation">:</span> Geometry
通过点队列设置一个 Geometry 中的顶点。

<span class="token punctuation">.</span>sortFacesByMaterialIndex <span class="token punctuation">(</span> <span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">null</span>
通过材质索引对面队列进行排序。对于复杂且有多个材质的几何体，该操作可以有效减少 draw call 从而提升性能。

<span class="token punctuation">.</span>scale <span class="token punctuation">(</span> x <span class="token punctuation">:</span> Float<span class="token punctuation">,</span> y <span class="token punctuation">:</span> Float<span class="token punctuation">,</span> z <span class="token punctuation">:</span> Float <span class="token punctuation">)</span> <span class="token punctuation">:</span> Geometry
缩放几何体大小。该操作通常在一次处理中完成，但不会在渲染过程中处理。
使用 Object3D<span class="token punctuation">.</span>scale 对模型面片进行实时缩放处理。

<span class="token punctuation">.</span>toJSON <span class="token punctuation">(</span> <span class="token punctuation">)</span> <span class="token punctuation">:</span> JSON
将 Geometry 对象数据转为 JSON 格式。

<span class="token punctuation">.</span>translate <span class="token punctuation">(</span> x <span class="token punctuation">:</span> Float<span class="token punctuation">,</span> y <span class="token punctuation">:</span> Float<span class="token punctuation">,</span> z <span class="token punctuation">:</span> Float <span class="token punctuation">)</span> <span class="token punctuation">:</span> Geometry
移动当前几何体。该操作通常在一次处理中完成，但不会在渲染过程中处理。
使用 Object3D<span class="token punctuation">.</span>position 对模型面片进行实时移动处理。
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="通过Geometry画一个三角面"><a href="#通过Geometry画一个三角面" class="headerlink" title="通过Geometry画一个三角面"></a>通过Geometry画一个三角面</h3><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="../../../../images/threejsGeometry0.jpg" alt="">  </p>
<pre class="line-numbers language-js"><code class="language-js"><span class="token operator">&lt;</span><span class="token operator">!</span>DOCTYPE html<span class="token operator">></span>
<span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">></span>
<span class="token operator">&lt;</span>head<span class="token operator">></span>
    <span class="token operator">&lt;</span>title<span class="token operator">></span>geometry<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">></span>
    <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>style<span class="token operator">></span> 
            <span class="token operator">*</span><span class="token punctuation">{</span>
                margin<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
                padding<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            body<span class="token punctuation">{</span>
                overflow<span class="token operator">-</span>x<span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
                overflow<span class="token operator">-</span>y<span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"You_Jump_I_Jump/build/three.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"You_Jump_I_Jump/js/controls/OrbitControls.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"You_Jump_I_Jump/source/utils/SceneUtils.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span>body<span class="token operator">></span>

    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        document<span class="token punctuation">.</span>oncontextmenu<span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token keyword">var</span> scene<span class="token punctuation">,</span>camera<span class="token punctuation">,</span>renderer<span class="token punctuation">;</span>
        <span class="token keyword">var</span> geometry<span class="token punctuation">,</span>material<span class="token punctuation">,</span>mesh<span class="token punctuation">;</span>
        <span class="token keyword">var</span> width<span class="token punctuation">,</span>height<span class="token punctuation">;</span>
        <span class="token keyword">var</span> materialtext<span class="token punctuation">;</span>
        <span class="token keyword">var</span> text<span class="token punctuation">;</span>
        <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token keyword">function</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            scene <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token function">drawAxis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


            camera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PerspectiveCamera</span><span class="token punctuation">(</span> <span class="token number">45</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerWidth <span class="token operator">/</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">20000</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">170</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>up<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span><span class="token function">lookAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>




            <span class="token keyword">var</span> geometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Geometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            geometry<span class="token punctuation">.</span>vertices<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span>  <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span>  <span class="token number">10</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
            geometry<span class="token punctuation">.</span>faces<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Face3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            geometry<span class="token punctuation">.</span><span class="token function">computeBoundingSphere</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            material <span class="token operator">=</span> <span class="token punctuation">[</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshNormalMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>side<span class="token punctuation">:</span> THREE<span class="token punctuation">.</span>DoubleSide<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>wireframe<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">]</span><span class="token punctuation">;</span>
            mesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>SceneUtils<span class="token punctuation">.</span>createMultiMaterialObject</span><span class="token punctuation">(</span>geometry<span class="token punctuation">,</span> material<span class="token punctuation">)</span><span class="token punctuation">;</span>            
            mesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>mesh<span class="token punctuation">)</span><span class="token punctuation">;</span>

            renderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>WebGLRenderer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                antialias<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false表示是否开启反锯齿</span>
                alpha<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false 表示是否可以设置背景色透明</span>
                precision<span class="token punctuation">:</span> <span class="token string">'highp'</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// highp/mediump/lowp 表示着色精度选择</span>
                premultipliedAlpha<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false 表示是否可以设置像素深度（用来度量图像的分辨率）</span>
                preserveDrawingBuffer<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false 表示是否保存绘图缓冲</span>
                maxLights<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 最大灯光数</span>
                stencil<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token comment" spellcheck="true">// false/true 表示是否使用模板字体或图案</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            renderer<span class="token punctuation">.</span><span class="token function">setClearColor</span><span class="token punctuation">(</span><span class="token number">0xEEEEEE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            renderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span> window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerHeight <span class="token punctuation">)</span><span class="token punctuation">;</span>
            document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span> renderer<span class="token punctuation">.</span>domElement <span class="token punctuation">)</span><span class="token punctuation">;</span>


            <span class="token comment" spellcheck="true">//官方视角控制器</span>
            controls <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>OrbitControls</span><span class="token punctuation">(</span> camera<span class="token punctuation">,</span> renderer<span class="token punctuation">.</span>domElement <span class="token punctuation">)</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>enableDamping <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> 
            controls<span class="token punctuation">.</span>dampingFactor <span class="token operator">=</span> <span class="token number">0.25</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>screenSpacePanning <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>minDistance <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>maxDistance <span class="token operator">=</span> <span class="token number">1500</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>maxPolarAngle <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>rotateSpeed<span class="token operator">=</span><span class="token number">0.1</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>keyPanSpeed<span class="token operator">=</span><span class="token number">0.01</span><span class="token punctuation">;</span>


            window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> onWindowResize<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>


        <span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span> animate <span class="token punctuation">)</span><span class="token punctuation">;</span>            

            controls<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            renderer<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          
            renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>scene<span class="token punctuation">,</span> camera <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">onWindowResize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            width <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>
            height <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>left <span class="token operator">=</span> width <span class="token operator">/</span> <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>right <span class="token operator">=</span> width <span class="token operator">/</span>  <span class="token number">2</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>top <span class="token operator">=</span> height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>bottom <span class="token operator">=</span> height <span class="token operator">/</span>  <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">;</span>

            <span class="token comment" spellcheck="true">//更新相机投影矩阵，在相机任何参数被改变以后必须被调用</span>
            camera<span class="token punctuation">.</span><span class="token function">updateProjectionMatrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            renderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span> width<span class="token punctuation">,</span>height <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">createText</span><span class="token punctuation">(</span> geom <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            geom<span class="token punctuation">.</span><span class="token function">computeBoundingBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> materials <span class="token operator">=</span> <span class="token punctuation">[</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0xffffff</span><span class="token punctuation">,</span> overdraw<span class="token punctuation">:</span> <span class="token number">0.5</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token number">0x000000</span><span class="token punctuation">,</span> overdraw<span class="token punctuation">:</span> <span class="token number">0.5</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span>
            <span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> mesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span> geom<span class="token punctuation">,</span> materials <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> mesh<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">drawAxis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment" spellcheck="true">//显示简易坐标系，其中坐标系的长度为110</span>
            <span class="token keyword">var</span> axisHelper <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>AxisHelper</span><span class="token punctuation">(</span><span class="token number">110</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>axisHelper<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//GridHelper辅助绘制二维网格。</span>
            <span class="token comment" spellcheck="true">//第一个参数是网格大小，（该网格方形边长）</span>
            <span class="token comment" spellcheck="true">//第二个参数是网格个数， (该网格一条边分成多少份)</span>
            <span class="token comment" spellcheck="true">//第一个参数除以第二个参数，得到该网格每一小格的单位长度</span>
            <span class="token comment" spellcheck="true">//后面是网格颜色。xxx.position.set( 80,0,80 )为网格的中心点坐标。</span>
            <span class="token keyword">var</span> gridXZ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>GridHelper</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridXZ<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">50</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">50</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>gridXZ<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> gridXY <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>GridHelper</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridXY<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">50</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridXY<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>x <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>gridXY<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> gridYZ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>GridHelper</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridYZ<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">50</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridYZ<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>z <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>gridYZ<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//添加坐标文字  </span>
            materialtext<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MultiMaterial</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshPhongMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token number">0xffffff</span><span class="token punctuation">,</span> shading<span class="token punctuation">:</span> THREE<span class="token punctuation">.</span>FlatShading <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// front</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshPhongMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token number">0xffffff</span><span class="token punctuation">,</span> shading<span class="token punctuation">:</span> THREE<span class="token punctuation">.</span>SmoothShading <span class="token punctuation">}</span> <span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// side</span>
            <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//引用外部字体库，绘制坐标刻度  </span>
            <span class="token keyword">var</span> loader<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>FontLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            loader<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">'You_Jump_I_Jump/source/fonts/helvetiker_regular.typeface.json'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment" spellcheck="true">//绘制x轴刻度</span>
                <span class="token keyword">var</span> txtMaterX <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token number">0xFF0000</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">100</span><span class="token operator">/</span><span class="token number">10</span><span class="token operator">*</span>i<span class="token punctuation">;</span>
                    <span class="token keyword">var</span> txtGeo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>TextGeometry</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
                        font<span class="token punctuation">:</span> response<span class="token punctuation">,</span>
                        size<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                        height<span class="token punctuation">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span>
                      <span class="token comment" spellcheck="true">//  curveSegments: 12,//弧线分段数，使得文字的曲线更加光滑</span>
                      <span class="token comment" spellcheck="true">//  bevelEnabled: true,//布尔值，是否使用倒角，意为在边缘处斜切</span>
                     <span class="token comment" spellcheck="true">//   bevelThickness: 0.1,//倒角厚度</span>
                      <span class="token comment" spellcheck="true">//  bevelSize: 0.05,//倒角宽度</span>
                     <span class="token comment" spellcheck="true">//   bevelSegments: 3</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
                    <span class="token keyword">var</span> txtMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>txtGeo<span class="token punctuation">,</span>txtMaterX<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    txtMesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>x<span class="token number">-3</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>txtMesh<span class="token punctuation">)</span><span class="token punctuation">;</span>
            　　<span class="token punctuation">}</span>
                <span class="token comment" spellcheck="true">//绘制y轴刻度</span>
                <span class="token keyword">var</span> txtMaterY <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token number">0x00FF00</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">100</span><span class="token operator">/</span><span class="token number">10</span><span class="token operator">*</span>i<span class="token punctuation">;</span>
                    <span class="token keyword">var</span> txtGeo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>TextGeometry</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
                        font<span class="token punctuation">:</span> response<span class="token punctuation">,</span>
                        size<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                        height<span class="token punctuation">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
                    <span class="token keyword">var</span> txtMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>txtGeo<span class="token punctuation">,</span>txtMaterY<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    txtMesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>x<span class="token number">-1.5</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>txtMesh<span class="token punctuation">)</span><span class="token punctuation">;</span>
            　　<span class="token punctuation">}</span>
                 <span class="token comment" spellcheck="true">//绘制z轴刻度</span>
                 <span class="token keyword">var</span> txtMaterZ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token number">0x0000FF</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">100</span><span class="token operator">/</span><span class="token number">10</span><span class="token operator">*</span>i<span class="token punctuation">;</span>
                    <span class="token keyword">var</span> txtGeo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>TextGeometry</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
                        font<span class="token punctuation">:</span> response<span class="token punctuation">,</span>
                        size<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                        height<span class="token punctuation">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
                    <span class="token keyword">var</span> txtMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>txtGeo<span class="token punctuation">,</span>txtMaterZ<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    txtMesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>x<span class="token operator">+</span><span class="token number">2.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    txtMesh<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>y <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
                    scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>txtMesh<span class="token punctuation">)</span><span class="token punctuation">;</span>
            　　<span class="token punctuation">}</span>         　 

            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//绘制坐标轴方向箭头</span>
            <span class="token keyword">var</span> arrX<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>ArrowHelper</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">20</span> <span class="token punctuation">,</span><span class="token number">0xff0000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            arrX<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> arrX <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> arrY<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>ArrowHelper</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">20</span> <span class="token punctuation">,</span><span class="token number">0x00FF00</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            arrY<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> arrY <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> arrZ<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>ArrowHelper</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">20</span> <span class="token punctuation">,</span><span class="token number">0x0000FF</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            arrZ<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> arrZ <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>

<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-js"><code class="language-js">
Geometries：  
Geometries are instances <span class="token keyword">of</span> THREE<span class="token punctuation">.</span>Geometry that define the shape <span class="token keyword">of</span> an object <span class="token keyword">in</span> 
a scene<span class="token punctuation">.</span> They are made up <span class="token keyword">of</span> vertices and faces <span class="token punctuation">(</span>which are themselves objects and 
are accessible through the vertices and faces array properties<span class="token punctuation">)</span><span class="token punctuation">.</span> Vertices are the 
THREE<span class="token punctuation">.</span>Vector3 objects representing points <span class="token keyword">in</span> three<span class="token operator">-</span>dimensional space<span class="token punctuation">,</span> <span class="token keyword">while</span> faces 
are the THREE<span class="token punctuation">.</span>Face3 objects representing triangular surfaces<span class="token punctuation">.</span> <span class="token punctuation">(</span>All more complex 
shapes are subdivided into triangular faces <span class="token keyword">for</span> rendering purposes<span class="token punctuation">.</span><span class="token punctuation">)</span>  
Luckily<span class="token punctuation">,</span> dealing <span class="token keyword">with</span> vertices and faces directly is usually unnecessary because 
THREE<span class="token punctuation">.</span>Geometry has many subclasses that help create commonly used shapes<span class="token punctuation">.</span>

3D primitives<span class="token punctuation">:</span>  
Three<span class="token punctuation">.</span>js provides a number <span class="token keyword">of</span> classes that generate common shapes<span class="token punctuation">.</span> The official 
documentation <span class="token keyword">for</span> each type is available at http<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>threejs<span class="token punctuation">.</span>org<span class="token regex">/docs/</span><span class="token punctuation">,</span> but a 
summary <span class="token keyword">of</span> common types is shown <span class="token keyword">in</span> the following table <span class="token punctuation">(</span>some obscure<span class="token punctuation">,</span> optional 
constructor parameters were omitted<span class="token punctuation">)</span><span class="token punctuation">:</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="../../../../images/summary3dgeometry.jpg" alt="3D primitives"></p>
<pre class="line-numbers language-js"><code class="language-js">2D primitives<span class="token punctuation">:</span>  
Three<span class="token punctuation">.</span>js also has <span class="token keyword">default</span> geometry <span class="token keyword">for</span> 2D shapes <span class="token keyword">as</span> shown <span class="token keyword">in</span> the following table<span class="token punctuation">:</span>  
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="../../../../images/summary2dgeometry.jpg" alt="2D primitives">  </p>
<h3 id="Custom-geometries"><a href="#Custom-geometries" class="headerlink" title="Custom geometries"></a>Custom geometries</h3><p>Several default geometry types allow creating shapes based on vertices or paths<br>specifically created by the developer. The most basic type<br>is the THREE.Geometry class itself. For example, you can create a triangle using the<br>code shown in the following snippet:  </p>
<pre class="line-numbers language-js"><code class="language-js"><span class="token keyword">var</span> geo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Geometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
geo<span class="token punctuation">.</span>vertices <span class="token operator">=</span> <span class="token punctuation">[</span>
 <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
 <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
 <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
geo<span class="token punctuation">.</span>faces<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Face3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
geo<span class="token punctuation">.</span><span class="token function">computeBoundingSphere</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


First<span class="token punctuation">,</span> <span class="token keyword">this</span> code creates a geometry object that has no vertices or faces yet<span class="token punctuation">.</span> Then<span class="token punctuation">,</span> it 
adds specific vertices<span class="token punctuation">,</span> where each vertex is represented by a THREE<span class="token punctuation">.</span>Vector3 that 
holds spatial coordinates on the x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> and z axes<span class="token punctuation">.</span> Next<span class="token punctuation">,</span> a THREE<span class="token punctuation">.</span>Face3 is added into 
the faces array<span class="token punctuation">.</span> The Face3 constructor's parameters indicate the indices <span class="token keyword">of</span> vertices 
<span class="token keyword">in</span> the geometry<span class="token string">'s vertices array to use for the face'</span>s corners<span class="token punctuation">.</span> Finally<span class="token punctuation">,</span> the bounding 
sphere is computed<span class="token punctuation">,</span> which triggers internal calculations <span class="token keyword">for</span> properties Three<span class="token punctuation">.</span>js 
needs to track such <span class="token keyword">as</span> whether the shape is <span class="token keyword">in</span> view<span class="token punctuation">.</span> If you have trouble getting 
a texture to display correctly on your custom material<span class="token punctuation">,</span> you may also need to call 
geo<span class="token punctuation">.</span><span class="token function">computeFaceNormals</span><span class="token punctuation">(</span><span class="token punctuation">)</span> and geo<span class="token punctuation">.</span><span class="token function">computeVertexNormals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span> These functions 
calculate additional information about the geometry's visual layout<span class="token punctuation">.</span>  

Manually creating shapes out <span class="token keyword">of</span> individual vertices can quickly <span class="token keyword">get</span> tiring<span class="token punctuation">;</span> however<span class="token punctuation">,</span> 
some utilities exist to help make the process faster <span class="token keyword">as</span> introduced <span class="token keyword">in</span> the following table<span class="token punctuation">:</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="../../../../images/customGemetry0.jpg" alt="">  </p>
<h2 id="读取图片，贴图给几何体"><a href="#读取图片，贴图给几何体" class="headerlink" title="读取图片，贴图给几何体"></a>读取图片，贴图给几何体</h2><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="../../../../images/threejsmaterial0.jpg" alt="three.js常用材质1"><br><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="../../../../images/threejsmaterial1.jpg" alt="three.js常用材质2">  </p>
<p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="../../../../images/texture2sphere0.jpg" alt="">  </p>
<pre class="line-numbers language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>loadTex2Sphere<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style language-css"> 
            <span class="token selector">*</span><span class="token punctuation">{</span>
                <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
                <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token selector">body</span><span class="token punctuation">{</span>
                <span class="token property">overflow-x</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
                <span class="token property">overflow-y</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>You_Jump_I_Jump/build/three.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>You_Jump_I_Jump/js/controls/OrbitControls.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">
        document<span class="token punctuation">.</span>oncontextmenu<span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token keyword">var</span> scene<span class="token punctuation">,</span>camera<span class="token punctuation">,</span>renderer<span class="token punctuation">;</span>
        <span class="token keyword">var</span> geometry<span class="token punctuation">,</span>material<span class="token punctuation">,</span>mesh<span class="token punctuation">;</span>
        <span class="token keyword">var</span> width<span class="token punctuation">,</span>height<span class="token punctuation">;</span>
        <span class="token keyword">var</span> materialtext<span class="token punctuation">;</span>
        <span class="token keyword">var</span> text<span class="token punctuation">;</span>
        <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token keyword">function</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            scene <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token function">drawAxis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


            camera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PerspectiveCamera</span><span class="token punctuation">(</span> <span class="token number">45</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerWidth <span class="token operator">/</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">20000</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">170</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>up<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span><span class="token function">lookAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>



            <span class="token keyword">var</span> texture <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>TextureLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">"You_Jump_I_Jump/assets/img/earth.jpg"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
            <span class="token keyword">var</span> geometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>SphereGeometry</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            material<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                map<span class="token punctuation">:</span>texture<span class="token punctuation">,</span>
                overdraw<span class="token punctuation">:</span><span class="token boolean">true</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            mesh<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>geometry<span class="token punctuation">,</span>material<span class="token punctuation">)</span><span class="token punctuation">;</span>
            mesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            mesh<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>y<span class="token operator">=</span><span class="token number">225</span><span class="token operator">*</span>Math<span class="token punctuation">.</span>PI<span class="token operator">/</span><span class="token number">180</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>mesh<span class="token punctuation">)</span><span class="token punctuation">;</span>


            renderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>WebGLRenderer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                antialias<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false表示是否开启反锯齿</span>
                alpha<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false 表示是否可以设置背景色透明</span>
                precision<span class="token punctuation">:</span> <span class="token string">'highp'</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// highp/mediump/lowp 表示着色精度选择</span>
                premultipliedAlpha<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false 表示是否可以设置像素深度（用来度量图像的分辨率）</span>
                preserveDrawingBuffer<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false 表示是否保存绘图缓冲</span>
                maxLights<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 最大灯光数</span>
                stencil<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token comment" spellcheck="true">// false/true 表示是否使用模板字体或图案</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            renderer<span class="token punctuation">.</span><span class="token function">setClearColor</span><span class="token punctuation">(</span><span class="token number">0xEEEEEE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            renderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span> window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerHeight <span class="token punctuation">)</span><span class="token punctuation">;</span>
            document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span> renderer<span class="token punctuation">.</span>domElement <span class="token punctuation">)</span><span class="token punctuation">;</span>


            <span class="token comment" spellcheck="true">//官方视角控制器</span>
            controls <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>OrbitControls</span><span class="token punctuation">(</span> camera<span class="token punctuation">,</span> renderer<span class="token punctuation">.</span>domElement <span class="token punctuation">)</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>enableDamping <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> 
            controls<span class="token punctuation">.</span>dampingFactor <span class="token operator">=</span> <span class="token number">0.25</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>screenSpacePanning <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>minDistance <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>maxDistance <span class="token operator">=</span> <span class="token number">1500</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>maxPolarAngle <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>rotateSpeed<span class="token operator">=</span><span class="token number">0.1</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>keyPanSpeed<span class="token operator">=</span><span class="token number">0.01</span><span class="token punctuation">;</span>


            window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> onWindowResize<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>


        <span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span> animate <span class="token punctuation">)</span><span class="token punctuation">;</span>            

            controls<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            mesh<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>y<span class="token operator">+</span><span class="token operator">=</span><span class="token number">0.1</span><span class="token operator">*</span>Math<span class="token punctuation">.</span>PI<span class="token operator">/</span><span class="token number">180</span><span class="token punctuation">;</span>

            renderer<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          
            renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>scene<span class="token punctuation">,</span> camera <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">onWindowResize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            width <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>
            height <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>left <span class="token operator">=</span> width <span class="token operator">/</span> <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>right <span class="token operator">=</span> width <span class="token operator">/</span>  <span class="token number">2</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>top <span class="token operator">=</span> height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>bottom <span class="token operator">=</span> height <span class="token operator">/</span>  <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">;</span>

            <span class="token comment" spellcheck="true">//更新相机投影矩阵，在相机任何参数被改变以后必须被调用</span>
            camera<span class="token punctuation">.</span><span class="token function">updateProjectionMatrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            renderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span> width<span class="token punctuation">,</span>height <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">createText</span><span class="token punctuation">(</span> geom <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            geom<span class="token punctuation">.</span><span class="token function">computeBoundingBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> materials <span class="token operator">=</span> <span class="token punctuation">[</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0xffffff</span><span class="token punctuation">,</span> overdraw<span class="token punctuation">:</span> <span class="token number">0.5</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token number">0x000000</span><span class="token punctuation">,</span> overdraw<span class="token punctuation">:</span> <span class="token number">0.5</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span>
            <span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> mesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span> geom<span class="token punctuation">,</span> materials <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> mesh<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">drawAxis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment" spellcheck="true">//显示简易坐标系，其中坐标系的长度为110</span>
            <span class="token keyword">var</span> axisHelper <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>AxisHelper</span><span class="token punctuation">(</span><span class="token number">110</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>axisHelper<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//GridHelper辅助绘制二维网格。</span>
            <span class="token comment" spellcheck="true">//第一个参数是网格大小，（该网格方形边长）</span>
            <span class="token comment" spellcheck="true">//第二个参数是网格个数， (该网格一条边分成多少份)</span>
            <span class="token comment" spellcheck="true">//第一个参数除以第二个参数，得到该网格每一小格的单位长度</span>
            <span class="token comment" spellcheck="true">//后面是网格颜色。xxx.position.set( 80,0,80 )为网格的中心点坐标。</span>
            <span class="token keyword">var</span> gridXZ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>GridHelper</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridXZ<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">50</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">50</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>gridXZ<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> gridXY <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>GridHelper</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridXY<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">50</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridXY<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>x <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>gridXY<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> gridYZ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>GridHelper</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridYZ<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">50</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridYZ<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>z <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>gridYZ<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//添加坐标文字  </span>
            materialtext<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MultiMaterial</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshPhongMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token number">0xffffff</span><span class="token punctuation">,</span> shading<span class="token punctuation">:</span> THREE<span class="token punctuation">.</span>FlatShading <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// front</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshPhongMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token number">0xffffff</span><span class="token punctuation">,</span> shading<span class="token punctuation">:</span> THREE<span class="token punctuation">.</span>SmoothShading <span class="token punctuation">}</span> <span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// side</span>
            <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//引用外部字体库，绘制坐标刻度  </span>
            <span class="token keyword">var</span> loader<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>FontLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            loader<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">'You_Jump_I_Jump/source/fonts/helvetiker_regular.typeface.json'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment" spellcheck="true">//绘制x轴刻度</span>
                <span class="token keyword">var</span> txtMaterX <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token number">0xFF0000</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">100</span><span class="token operator">/</span><span class="token number">10</span><span class="token operator">*</span>i<span class="token punctuation">;</span>
                    <span class="token keyword">var</span> txtGeo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>TextGeometry</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
                        font<span class="token punctuation">:</span> response<span class="token punctuation">,</span>
                        size<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                        height<span class="token punctuation">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span>
                      <span class="token comment" spellcheck="true">//  curveSegments: 12,//弧线分段数，使得文字的曲线更加光滑</span>
                      <span class="token comment" spellcheck="true">//  bevelEnabled: true,//布尔值，是否使用倒角，意为在边缘处斜切</span>
                     <span class="token comment" spellcheck="true">//   bevelThickness: 0.1,//倒角厚度</span>
                      <span class="token comment" spellcheck="true">//  bevelSize: 0.05,//倒角宽度</span>
                     <span class="token comment" spellcheck="true">//   bevelSegments: 3</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
                    <span class="token keyword">var</span> txtMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>txtGeo<span class="token punctuation">,</span>txtMaterX<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    txtMesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>x<span class="token number">-3</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>txtMesh<span class="token punctuation">)</span><span class="token punctuation">;</span>
            　　<span class="token punctuation">}</span>
                <span class="token comment" spellcheck="true">//绘制y轴刻度</span>
                <span class="token keyword">var</span> txtMaterY <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token number">0x00FF00</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">100</span><span class="token operator">/</span><span class="token number">10</span><span class="token operator">*</span>i<span class="token punctuation">;</span>
                    <span class="token keyword">var</span> txtGeo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>TextGeometry</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
                        font<span class="token punctuation">:</span> response<span class="token punctuation">,</span>
                        size<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                        height<span class="token punctuation">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
                    <span class="token keyword">var</span> txtMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>txtGeo<span class="token punctuation">,</span>txtMaterY<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    txtMesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>x<span class="token number">-1.5</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>txtMesh<span class="token punctuation">)</span><span class="token punctuation">;</span>
            　　<span class="token punctuation">}</span>
                 <span class="token comment" spellcheck="true">//绘制z轴刻度</span>
                 <span class="token keyword">var</span> txtMaterZ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token number">0x0000FF</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">100</span><span class="token operator">/</span><span class="token number">10</span><span class="token operator">*</span>i<span class="token punctuation">;</span>
                    <span class="token keyword">var</span> txtGeo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>TextGeometry</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
                        font<span class="token punctuation">:</span> response<span class="token punctuation">,</span>
                        size<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                        height<span class="token punctuation">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
                    <span class="token keyword">var</span> txtMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>txtGeo<span class="token punctuation">,</span>txtMaterZ<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    txtMesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>x<span class="token operator">+</span><span class="token number">2.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    txtMesh<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>y <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
                    scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>txtMesh<span class="token punctuation">)</span><span class="token punctuation">;</span>
            　　<span class="token punctuation">}</span>         　 

            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//绘制坐标轴方向箭头</span>
            <span class="token keyword">var</span> arrX<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>ArrowHelper</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">20</span> <span class="token punctuation">,</span><span class="token number">0xff0000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            arrX<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> arrX <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> arrY<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>ArrowHelper</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">20</span> <span class="token punctuation">,</span><span class="token number">0x00FF00</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            arrY<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> arrY <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> arrZ<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>ArrowHelper</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">20</span> <span class="token punctuation">,</span><span class="token number">0x0000FF</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            arrZ<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> arrZ <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="画二维形状，拉伸成三维物体"><a href="#画二维形状，拉伸成三维物体" class="headerlink" title="画二维形状，拉伸成三维物体"></a>画二维形状，拉伸成三维物体</h2><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="../../../../images/extrudeShape0.jpg" alt="">  </p>
<pre class="line-numbers language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>xyzGridDrawLine<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style language-css"> 
            <span class="token selector">*</span><span class="token punctuation">{</span>
                <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
                <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token selector">body</span><span class="token punctuation">{</span>
                <span class="token property">overflow-x</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
                <span class="token property">overflow-y</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>You_Jump_I_Jump/build/three.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>You_Jump_I_Jump/js/controls/OrbitControls.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>You_Jump_I_Jump/source/utils/SceneUtils.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">
        document<span class="token punctuation">.</span>oncontextmenu<span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token keyword">var</span> scene<span class="token punctuation">,</span>camera<span class="token punctuation">,</span>renderer<span class="token punctuation">;</span>
        <span class="token keyword">var</span> geometry<span class="token punctuation">,</span>material<span class="token punctuation">,</span>mesh<span class="token punctuation">;</span>
        <span class="token keyword">var</span> width<span class="token punctuation">,</span>height<span class="token punctuation">;</span>
        <span class="token keyword">var</span> materialtext<span class="token punctuation">;</span>
        <span class="token keyword">var</span> text<span class="token punctuation">;</span>
        <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token keyword">function</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            scene <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token function">drawAxis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


            camera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PerspectiveCamera</span><span class="token punctuation">(</span> <span class="token number">45</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerWidth <span class="token operator">/</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">20000</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">170</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>up<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span><span class="token function">lookAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


            <span class="token keyword">var</span> triangle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Shape</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector2</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector2</span> <span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector2</span> <span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> geometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>ExtrudeGeometry</span><span class="token punctuation">(</span>triangle<span class="token punctuation">,</span> <span class="token punctuation">{</span>
                bevelEnabled<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                amount<span class="token punctuation">:</span> <span class="token number">30</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                  

            material <span class="token operator">=</span> <span class="token punctuation">[</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshNormalMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>side<span class="token punctuation">:</span> THREE<span class="token punctuation">.</span>DoubleSide<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>wireframe<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">]</span><span class="token punctuation">;</span>
            mesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>SceneUtils<span class="token punctuation">.</span>createMultiMaterialObject</span><span class="token punctuation">(</span>geometry<span class="token punctuation">,</span> material<span class="token punctuation">)</span><span class="token punctuation">;</span>            
            mesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>mesh<span class="token punctuation">)</span><span class="token punctuation">;</span>

            renderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>WebGLRenderer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                antialias<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false表示是否开启反锯齿</span>
                alpha<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false 表示是否可以设置背景色透明</span>
                precision<span class="token punctuation">:</span> <span class="token string">'highp'</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// highp/mediump/lowp 表示着色精度选择</span>
                premultipliedAlpha<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false 表示是否可以设置像素深度（用来度量图像的分辨率）</span>
                preserveDrawingBuffer<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false 表示是否保存绘图缓冲</span>
                maxLights<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 最大灯光数</span>
                stencil<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token comment" spellcheck="true">// false/true 表示是否使用模板字体或图案</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            renderer<span class="token punctuation">.</span><span class="token function">setClearColor</span><span class="token punctuation">(</span><span class="token number">0xEEEEEE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            renderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span> window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerHeight <span class="token punctuation">)</span><span class="token punctuation">;</span>
            document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span> renderer<span class="token punctuation">.</span>domElement <span class="token punctuation">)</span><span class="token punctuation">;</span>


            <span class="token comment" spellcheck="true">//官方视角控制器</span>
            controls <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>OrbitControls</span><span class="token punctuation">(</span> camera<span class="token punctuation">,</span> renderer<span class="token punctuation">.</span>domElement <span class="token punctuation">)</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>enableDamping <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> 
            controls<span class="token punctuation">.</span>dampingFactor <span class="token operator">=</span> <span class="token number">0.25</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>screenSpacePanning <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>minDistance <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>maxDistance <span class="token operator">=</span> <span class="token number">1500</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>maxPolarAngle <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>rotateSpeed<span class="token operator">=</span><span class="token number">0.1</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>keyPanSpeed<span class="token operator">=</span><span class="token number">0.01</span><span class="token punctuation">;</span>


            window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> onWindowResize<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>


        <span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span> animate <span class="token punctuation">)</span><span class="token punctuation">;</span>            

            controls<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            renderer<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          
            renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>scene<span class="token punctuation">,</span> camera <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">onWindowResize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            width <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>
            height <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>left <span class="token operator">=</span> width <span class="token operator">/</span> <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>right <span class="token operator">=</span> width <span class="token operator">/</span>  <span class="token number">2</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>top <span class="token operator">=</span> height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>bottom <span class="token operator">=</span> height <span class="token operator">/</span>  <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">;</span>

            <span class="token comment" spellcheck="true">//更新相机投影矩阵，在相机任何参数被改变以后必须被调用</span>
            camera<span class="token punctuation">.</span><span class="token function">updateProjectionMatrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            renderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span> width<span class="token punctuation">,</span>height <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">createText</span><span class="token punctuation">(</span> geom <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            geom<span class="token punctuation">.</span><span class="token function">computeBoundingBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> materials <span class="token operator">=</span> <span class="token punctuation">[</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0xffffff</span><span class="token punctuation">,</span> overdraw<span class="token punctuation">:</span> <span class="token number">0.5</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token number">0x000000</span><span class="token punctuation">,</span> overdraw<span class="token punctuation">:</span> <span class="token number">0.5</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span>
            <span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> mesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span> geom<span class="token punctuation">,</span> materials <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> mesh<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">drawAxis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment" spellcheck="true">//显示简易坐标系，其中坐标系的长度为110</span>
            <span class="token keyword">var</span> axisHelper <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>AxisHelper</span><span class="token punctuation">(</span><span class="token number">110</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>axisHelper<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//GridHelper辅助绘制二维网格。</span>
            <span class="token comment" spellcheck="true">//第一个参数是网格大小，（该网格方形边长）</span>
            <span class="token comment" spellcheck="true">//第二个参数是网格个数， (该网格一条边分成多少份)</span>
            <span class="token comment" spellcheck="true">//第一个参数除以第二个参数，得到该网格每一小格的单位长度</span>
            <span class="token comment" spellcheck="true">//后面是网格颜色。xxx.position.set( 80,0,80 )为网格的中心点坐标。</span>
            <span class="token keyword">var</span> gridXZ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>GridHelper</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridXZ<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">50</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">50</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>gridXZ<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> gridXY <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>GridHelper</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridXY<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">50</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridXY<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>x <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>gridXY<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> gridYZ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>GridHelper</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridYZ<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">50</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridYZ<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>z <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>gridYZ<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//添加坐标文字  </span>
            materialtext<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MultiMaterial</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshPhongMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token number">0xffffff</span><span class="token punctuation">,</span> shading<span class="token punctuation">:</span> THREE<span class="token punctuation">.</span>FlatShading <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// front</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshPhongMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token number">0xffffff</span><span class="token punctuation">,</span> shading<span class="token punctuation">:</span> THREE<span class="token punctuation">.</span>SmoothShading <span class="token punctuation">}</span> <span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// side</span>
            <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//引用外部字体库，绘制坐标刻度  </span>
            <span class="token keyword">var</span> loader<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>FontLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            loader<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">'You_Jump_I_Jump/source/fonts/helvetiker_regular.typeface.json'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment" spellcheck="true">//绘制x轴刻度</span>
                <span class="token keyword">var</span> txtMaterX <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token number">0xFF0000</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">100</span><span class="token operator">/</span><span class="token number">10</span><span class="token operator">*</span>i<span class="token punctuation">;</span>
                    <span class="token keyword">var</span> txtGeo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>TextGeometry</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
                        font<span class="token punctuation">:</span> response<span class="token punctuation">,</span>
                        size<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                        height<span class="token punctuation">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span>
                      <span class="token comment" spellcheck="true">//  curveSegments: 12,//弧线分段数，使得文字的曲线更加光滑</span>
                      <span class="token comment" spellcheck="true">//  bevelEnabled: true,//布尔值，是否使用倒角，意为在边缘处斜切</span>
                     <span class="token comment" spellcheck="true">//   bevelThickness: 0.1,//倒角厚度</span>
                      <span class="token comment" spellcheck="true">//  bevelSize: 0.05,//倒角宽度</span>
                     <span class="token comment" spellcheck="true">//   bevelSegments: 3</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
                    <span class="token keyword">var</span> txtMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>txtGeo<span class="token punctuation">,</span>txtMaterX<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    txtMesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>x<span class="token number">-3</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>txtMesh<span class="token punctuation">)</span><span class="token punctuation">;</span>
            　　<span class="token punctuation">}</span>
                <span class="token comment" spellcheck="true">//绘制y轴刻度</span>
                <span class="token keyword">var</span> txtMaterY <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token number">0x00FF00</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">100</span><span class="token operator">/</span><span class="token number">10</span><span class="token operator">*</span>i<span class="token punctuation">;</span>
                    <span class="token keyword">var</span> txtGeo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>TextGeometry</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
                        font<span class="token punctuation">:</span> response<span class="token punctuation">,</span>
                        size<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                        height<span class="token punctuation">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
                    <span class="token keyword">var</span> txtMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>txtGeo<span class="token punctuation">,</span>txtMaterY<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    txtMesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>x<span class="token number">-1.5</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>txtMesh<span class="token punctuation">)</span><span class="token punctuation">;</span>
            　　<span class="token punctuation">}</span>
                 <span class="token comment" spellcheck="true">//绘制z轴刻度</span>
                 <span class="token keyword">var</span> txtMaterZ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token number">0x0000FF</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">100</span><span class="token operator">/</span><span class="token number">10</span><span class="token operator">*</span>i<span class="token punctuation">;</span>
                    <span class="token keyword">var</span> txtGeo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>TextGeometry</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
                        font<span class="token punctuation">:</span> response<span class="token punctuation">,</span>
                        size<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                        height<span class="token punctuation">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
                    <span class="token keyword">var</span> txtMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>txtGeo<span class="token punctuation">,</span>txtMaterZ<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    txtMesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>x<span class="token operator">+</span><span class="token number">2.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    txtMesh<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>y <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
                    scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>txtMesh<span class="token punctuation">)</span><span class="token punctuation">;</span>
            　　<span class="token punctuation">}</span>         　 

            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//绘制坐标轴方向箭头</span>
            <span class="token keyword">var</span> arrX<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>ArrowHelper</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">20</span> <span class="token punctuation">,</span><span class="token number">0xff0000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            arrX<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> arrX <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> arrY<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>ArrowHelper</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">20</span> <span class="token punctuation">,</span><span class="token number">0x00FF00</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            arrY<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> arrY <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> arrZ<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>ArrowHelper</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">20</span> <span class="token punctuation">,</span><span class="token number">0x0000FF</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            arrZ<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> arrZ <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="方块城市"><a href="#方块城市" class="headerlink" title="方块城市"></a>方块城市</h2><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="../../../../images/threejscity.jpg" alt="">  </p>
<pre class="line-numbers language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>threejs_city<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style language-css"> 
            <span class="token selector">*</span><span class="token punctuation">{</span>
                <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
                <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token selector">body</span><span class="token punctuation">{</span>
                <span class="token property">overflow-x</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
                <span class="token property">overflow-y</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>You_Jump_I_Jump/build/three.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>You_Jump_I_Jump/js/controls/OrbitControls.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">


        <span class="token keyword">var</span> scene<span class="token punctuation">,</span>camera<span class="token punctuation">,</span>renderer<span class="token punctuation">;</span>
        <span class="token keyword">var</span> geometry<span class="token punctuation">,</span>material<span class="token punctuation">,</span>mesh<span class="token punctuation">;</span>
        <span class="token keyword">var</span> width<span class="token punctuation">,</span>height<span class="token punctuation">;</span>
        <span class="token keyword">var</span> materialtext<span class="token punctuation">;</span>
        <span class="token keyword">var</span> text<span class="token punctuation">;</span>

        <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">function</span> <span class="token function">setupThreeJS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            scene <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">drawAxis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            camera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PerspectiveCamera</span><span class="token punctuation">(</span> <span class="token number">75</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerWidth <span class="token operator">/</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">80000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>up<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">45</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span>PI <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//camera.lookAt(0, 0, 0);</span>


            renderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>WebGLRenderer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                antialias<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false表示是否开启反锯齿</span>
                alpha<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false 表示是否可以设置背景色透明</span>
                precision<span class="token punctuation">:</span> <span class="token string">'highp'</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// highp/mediump/lowp 表示着色精度选择</span>
                premultipliedAlpha<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false 表示是否可以设置像素深度（用来度量图像的分辨率）</span>
                preserveDrawingBuffer<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false 表示是否保存绘图缓冲</span>
                maxLights<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 最大灯光数</span>
                stencil<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token comment" spellcheck="true">// false/true 表示是否使用模板字体或图案</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
             renderer<span class="token punctuation">.</span><span class="token function">setClearColor</span><span class="token punctuation">(</span><span class="token number">0xEEEEEE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


            renderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span> window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerHeight <span class="token punctuation">)</span><span class="token punctuation">;</span>
            document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span> renderer<span class="token punctuation">.</span>domElement <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">setupWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">var</span> ambientLight <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>AmbientLight</span><span class="token punctuation">(</span><span class="token number">0xffffff</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// 创建环境光</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>ambientLight<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// 将环境光添加到场景</span>

            <span class="token keyword">var</span> geo<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PlaneGeometry</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> mat<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                color<span class="token punctuation">:</span><span class="token number">0x9db3b5</span><span class="token punctuation">,</span>
                overdraw<span class="token punctuation">:</span><span class="token boolean">true</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> floor<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>geo<span class="token punctuation">,</span>mat<span class="token punctuation">)</span><span class="token punctuation">;</span>
            floor<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>x<span class="token operator">=</span><span class="token operator">-</span><span class="token number">90</span><span class="token operator">*</span>Math<span class="token punctuation">.</span>PI<span class="token operator">/</span><span class="token number">180</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>floor<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">var</span> geometry<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>CubeGeometry</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
            geometry<span class="token punctuation">.</span><span class="token function">applyMatrix</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Matrix4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">makeTranslation</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0.5</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> material<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshDepthMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//new THREE.MeshPhongMaterial({color: 0x00ffff});</span>

            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">300</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">var</span> building<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>geometry<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>material<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                building<span class="token punctuation">.</span>position<span class="token punctuation">.</span>x<span class="token operator">=</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">200</span> <span class="token operator">-</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span>
                building<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">200</span> <span class="token operator">-</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span>
                building<span class="token punctuation">.</span>scale<span class="token punctuation">.</span>x <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">50</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span>
                building<span class="token punctuation">.</span>scale<span class="token punctuation">.</span>y <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> building<span class="token punctuation">.</span>scale<span class="token punctuation">.</span>x <span class="token operator">*</span> <span class="token number">8</span> <span class="token operator">+</span> <span class="token number">8</span><span class="token punctuation">;</span>
                building<span class="token punctuation">.</span>scale<span class="token punctuation">.</span>z <span class="token operator">=</span> building<span class="token punctuation">.</span>scale<span class="token punctuation">.</span>x<span class="token punctuation">;</span>
                scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>building<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment" spellcheck="true">//官方视角控制器</span>
            controls <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>OrbitControls</span><span class="token punctuation">(</span> camera<span class="token punctuation">,</span> renderer<span class="token punctuation">.</span>domElement <span class="token punctuation">)</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>enableDamping <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> 
            controls<span class="token punctuation">.</span>dampingFactor <span class="token operator">=</span> <span class="token number">0.25</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>screenSpacePanning <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>minDistance <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>maxDistance <span class="token operator">=</span> <span class="token number">1500</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>maxPolarAngle <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>rotateSpeed<span class="token operator">=</span><span class="token number">0.1</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>keyPanSpeed<span class="token operator">=</span><span class="token number">0.01</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>minPolarAngle <span class="token operator">=</span> <span class="token operator">-</span>Math<span class="token punctuation">.</span>PI<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// radians</span>
            controls<span class="token punctuation">.</span>maxPolarAngle <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// radians</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            document<span class="token punctuation">.</span>oncontextmenu<span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>

            <span class="token function">setupThreeJS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">setupWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> onWindowResize<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                controls<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                renderer<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          
                renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>scene<span class="token punctuation">,</span> camera <span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>animate<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>




        <span class="token keyword">function</span> <span class="token function">onWindowResize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            width <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>
            height <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>left <span class="token operator">=</span> width <span class="token operator">/</span> <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>right <span class="token operator">=</span> width <span class="token operator">/</span>  <span class="token number">2</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>top <span class="token operator">=</span> height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>bottom <span class="token operator">=</span> height <span class="token operator">/</span>  <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">;</span>

            <span class="token comment" spellcheck="true">//更新相机投影矩阵，在相机任何参数被改变以后必须被调用</span>
            camera<span class="token punctuation">.</span><span class="token function">updateProjectionMatrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            renderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span> width<span class="token punctuation">,</span>height <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">createText</span><span class="token punctuation">(</span> geom <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            geom<span class="token punctuation">.</span><span class="token function">computeBoundingBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> materials <span class="token operator">=</span> <span class="token punctuation">[</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0xffffff</span><span class="token punctuation">,</span> overdraw<span class="token punctuation">:</span> <span class="token number">0.5</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token number">0x000000</span><span class="token punctuation">,</span> overdraw<span class="token punctuation">:</span> <span class="token number">0.5</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span>
            <span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> mesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span> geom<span class="token punctuation">,</span> materials <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> mesh<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">drawAxis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment" spellcheck="true">//显示简易坐标系，其中坐标系的长度为110</span>
            <span class="token keyword">var</span> axisHelper <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>AxisHelper</span><span class="token punctuation">(</span><span class="token number">110</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>axisHelper<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//GridHelper辅助绘制二维网格。</span>
            <span class="token comment" spellcheck="true">//第一个参数是网格大小，（该网格方形边长）</span>
            <span class="token comment" spellcheck="true">//第二个参数是网格个数， (该网格一条边分成多少份)</span>
            <span class="token comment" spellcheck="true">//第一个参数除以第二个参数，得到该网格每一小格的单位长度</span>
            <span class="token comment" spellcheck="true">//后面是网格颜色。xxx.position.set( 80,0,80 )为网格的中心点坐标。</span>
            <span class="token keyword">var</span> gridXZ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>GridHelper</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridXZ<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">50</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">50</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>gridXZ<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> gridXY <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>GridHelper</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridXY<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">50</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridXY<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>x <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>gridXY<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> gridYZ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>GridHelper</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridYZ<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">50</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridYZ<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>z <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>gridYZ<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//添加坐标文字  </span>
            materialtext<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MultiMaterial</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshPhongMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token number">0xffffff</span><span class="token punctuation">,</span> shading<span class="token punctuation">:</span> THREE<span class="token punctuation">.</span>FlatShading <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// front</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshPhongMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token number">0xffffff</span><span class="token punctuation">,</span> shading<span class="token punctuation">:</span> THREE<span class="token punctuation">.</span>SmoothShading <span class="token punctuation">}</span> <span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// side</span>
            <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//引用外部字体库，绘制坐标刻度  </span>
            <span class="token keyword">var</span> loader<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>FontLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            loader<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">'You_Jump_I_Jump/source/fonts/helvetiker_regular.typeface.json'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment" spellcheck="true">//绘制x轴刻度</span>
                <span class="token keyword">var</span> txtMaterX <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token number">0xFF0000</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">100</span><span class="token operator">/</span><span class="token number">10</span><span class="token operator">*</span>i<span class="token punctuation">;</span>
                    <span class="token keyword">var</span> txtGeo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>TextGeometry</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
                        font<span class="token punctuation">:</span> response<span class="token punctuation">,</span>
                        size<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                        height<span class="token punctuation">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span>
                      <span class="token comment" spellcheck="true">//  curveSegments: 12,//弧线分段数，使得文字的曲线更加光滑</span>
                      <span class="token comment" spellcheck="true">//  bevelEnabled: true,//布尔值，是否使用倒角，意为在边缘处斜切</span>
                     <span class="token comment" spellcheck="true">//   bevelThickness: 0.1,//倒角厚度</span>
                      <span class="token comment" spellcheck="true">//  bevelSize: 0.05,//倒角宽度</span>
                     <span class="token comment" spellcheck="true">//   bevelSegments: 3</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
                    <span class="token keyword">var</span> txtMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>txtGeo<span class="token punctuation">,</span>txtMaterX<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    txtMesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>x<span class="token number">-3</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>txtMesh<span class="token punctuation">)</span><span class="token punctuation">;</span>
            　　<span class="token punctuation">}</span>
                <span class="token comment" spellcheck="true">//绘制y轴刻度</span>
                <span class="token keyword">var</span> txtMaterY <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token number">0x00FF00</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">100</span><span class="token operator">/</span><span class="token number">10</span><span class="token operator">*</span>i<span class="token punctuation">;</span>
                    <span class="token keyword">var</span> txtGeo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>TextGeometry</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
                        font<span class="token punctuation">:</span> response<span class="token punctuation">,</span>
                        size<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                        height<span class="token punctuation">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
                    <span class="token keyword">var</span> txtMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>txtGeo<span class="token punctuation">,</span>txtMaterY<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    txtMesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>x<span class="token number">-1.5</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>txtMesh<span class="token punctuation">)</span><span class="token punctuation">;</span>
            　　<span class="token punctuation">}</span>
                 <span class="token comment" spellcheck="true">//绘制z轴刻度</span>
                 <span class="token keyword">var</span> txtMaterZ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token number">0x0000FF</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">100</span><span class="token operator">/</span><span class="token number">10</span><span class="token operator">*</span>i<span class="token punctuation">;</span>
                    <span class="token keyword">var</span> txtGeo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>TextGeometry</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
                        font<span class="token punctuation">:</span> response<span class="token punctuation">,</span>
                        size<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                        height<span class="token punctuation">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
                    <span class="token keyword">var</span> txtMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>txtGeo<span class="token punctuation">,</span>txtMaterZ<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    txtMesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>x<span class="token operator">+</span><span class="token number">2.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    txtMesh<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>y <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
                    scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>txtMesh<span class="token punctuation">)</span><span class="token punctuation">;</span>
            　　<span class="token punctuation">}</span>         　 

            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//绘制坐标轴方向箭头</span>
            <span class="token keyword">var</span> arrX<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>ArrowHelper</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">20</span> <span class="token punctuation">,</span><span class="token number">0xff0000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            arrX<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> arrX <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> arrY<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>ArrowHelper</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">20</span> <span class="token punctuation">,</span><span class="token number">0x00FF00</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            arrY<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> arrY <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> arrZ<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>ArrowHelper</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">20</span> <span class="token punctuation">,</span><span class="token number">0x0000FF</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            arrZ<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> arrZ <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="雾"><a href="#雾" class="headerlink" title="雾"></a>雾</h2><p>方块城市使用普通材质，只要有雾，立体感也可以有。  </p>
<p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="../../../../images/threejscityfog.jpg" alt="">  </p>
<pre class="line-numbers language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>threejs_city<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style language-css"> 
            <span class="token selector">*</span><span class="token punctuation">{</span>
                <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
                <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token selector">body</span><span class="token punctuation">{</span>
                <span class="token property">overflow-x</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
                <span class="token property">overflow-y</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>You_Jump_I_Jump/build/three.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>You_Jump_I_Jump/js/controls/OrbitControls.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">


        <span class="token keyword">var</span> scene<span class="token punctuation">,</span>camera<span class="token punctuation">,</span>renderer<span class="token punctuation">;</span>
        <span class="token keyword">var</span> geometry<span class="token punctuation">,</span>material<span class="token punctuation">,</span>mesh<span class="token punctuation">;</span>
        <span class="token keyword">var</span> width<span class="token punctuation">,</span>height<span class="token punctuation">;</span>
        <span class="token keyword">var</span> materialtext<span class="token punctuation">;</span>
        <span class="token keyword">var</span> text<span class="token punctuation">;</span>

        <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">function</span> <span class="token function">setupThreeJS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            scene <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">drawAxis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            camera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PerspectiveCamera</span><span class="token punctuation">(</span> <span class="token number">75</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerWidth <span class="token operator">/</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">80000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>up<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">45</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span>PI <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//camera.lookAt(0, 0, 0);</span>


            renderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>WebGLRenderer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                antialias<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false表示是否开启反锯齿</span>
                alpha<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false 表示是否可以设置背景色透明</span>
                precision<span class="token punctuation">:</span> <span class="token string">'highp'</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// highp/mediump/lowp 表示着色精度选择</span>
                premultipliedAlpha<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false 表示是否可以设置像素深度（用来度量图像的分辨率）</span>
                preserveDrawingBuffer<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false 表示是否保存绘图缓冲</span>
                maxLights<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 最大灯光数</span>
                stencil<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token comment" spellcheck="true">// false/true 表示是否使用模板字体或图案</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            renderer<span class="token punctuation">.</span><span class="token function">setClearColor</span><span class="token punctuation">(</span><span class="token number">0xEEEEEE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            renderer<span class="token punctuation">.</span>shadowMapEnabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//影子1</span>

            renderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span> window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerHeight <span class="token punctuation">)</span><span class="token punctuation">;</span>
            document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span> renderer<span class="token punctuation">.</span>domElement <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">setupWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">var</span> light <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>DirectionalLight</span><span class="token punctuation">(</span><span class="token number">0xf6e86d</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            light<span class="token punctuation">.</span>castShadow <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            light<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>camera<span class="token punctuation">.</span>near <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//产生阴影的最近距离</span>
            light<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>camera<span class="token punctuation">.</span>far <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//产生阴影的最远距离</span>
            light<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>camera<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">50</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//产生阴影距离位置的最左边位置</span>
            light<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>camera<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//最右边</span>
            light<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>camera<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//最上边</span>
            light<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>camera<span class="token punctuation">.</span>bottom <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">50</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//最下面</span>

            <span class="token comment" spellcheck="true">//这两个值决定使用多少像素生成阴影 默认512</span>
            light<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>mapSize<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">1024</span><span class="token punctuation">;</span>
            light<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>mapSize<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">1024</span><span class="token punctuation">;</span>


            light<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span><span class="token number">400</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
            <span class="token comment" spellcheck="true">// DirectionalLightHelper( light, size, color )</span>
            <span class="token keyword">var</span> helper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>DirectionalLightHelper</span><span class="token punctuation">(</span>light<span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span><span class="token number">0xFFFFFF</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>helper<span class="token punctuation">)</span><span class="token punctuation">;</span> 
            <span class="token comment" spellcheck="true">//this.scene.add(light) // 将环境光添加到场景</span>

            <span class="token comment" spellcheck="true">//scene.fog = new THREE.FogExp2(0x9db3b5, 0.002);</span>
            scene<span class="token punctuation">.</span>fog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Fog</span><span class="token punctuation">(</span><span class="token number">0x9db3b5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">800</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">var</span> geo<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PlaneGeometry</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> mat<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                color<span class="token punctuation">:</span><span class="token number">0x9db3b5</span><span class="token punctuation">,</span>
                overdraw<span class="token punctuation">:</span><span class="token boolean">true</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> floor<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>geo<span class="token punctuation">,</span>mat<span class="token punctuation">)</span><span class="token punctuation">;</span>
            floor<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>x<span class="token operator">=</span><span class="token operator">-</span><span class="token number">90</span><span class="token operator">*</span>Math<span class="token punctuation">.</span>PI<span class="token operator">/</span><span class="token number">180</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>floor<span class="token punctuation">)</span><span class="token punctuation">;</span>
            floor<span class="token punctuation">.</span>receiveShadow <span class="token operator">=</span>floor<span class="token punctuation">.</span>castShadow <span class="token operator">=</span>  <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//影子2</span>


            <span class="token keyword">var</span> geometry<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>CubeGeometry</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
            geometry<span class="token punctuation">.</span><span class="token function">applyMatrix</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Matrix4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">makeTranslation</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0.5</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> material<span class="token operator">=</span>  <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshPhongMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                overdraw<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> 
                color<span class="token punctuation">:</span><span class="token number">0xcccccc</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">300</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">var</span> building<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>geometry<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>material<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                building<span class="token punctuation">.</span>position<span class="token punctuation">.</span>x<span class="token operator">=</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">200</span> <span class="token operator">-</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span>
                building<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">200</span> <span class="token operator">-</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span>
                building<span class="token punctuation">.</span>scale<span class="token punctuation">.</span>x <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">50</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span>
                building<span class="token punctuation">.</span>scale<span class="token punctuation">.</span>y <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> building<span class="token punctuation">.</span>scale<span class="token punctuation">.</span>x <span class="token operator">*</span> <span class="token number">8</span> <span class="token operator">+</span> <span class="token number">8</span><span class="token punctuation">;</span>
                building<span class="token punctuation">.</span>scale<span class="token punctuation">.</span>z <span class="token operator">=</span> building<span class="token punctuation">.</span>scale<span class="token punctuation">.</span>x<span class="token punctuation">;</span>

                building<span class="token punctuation">.</span>castShadow <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                building<span class="token punctuation">.</span>receiveShadow <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>building<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment" spellcheck="true">//官方视角控制器</span>
            controls <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>OrbitControls</span><span class="token punctuation">(</span> camera<span class="token punctuation">,</span> renderer<span class="token punctuation">.</span>domElement <span class="token punctuation">)</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>enableDamping <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> 
            controls<span class="token punctuation">.</span>dampingFactor <span class="token operator">=</span> <span class="token number">0.25</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>screenSpacePanning <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>minDistance <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>maxDistance <span class="token operator">=</span> <span class="token number">1500</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>maxPolarAngle <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>rotateSpeed<span class="token operator">=</span><span class="token number">0.1</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>keyPanSpeed<span class="token operator">=</span><span class="token number">0.01</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>minPolarAngle <span class="token operator">=</span> <span class="token operator">-</span>Math<span class="token punctuation">.</span>PI<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// radians</span>
            controls<span class="token punctuation">.</span>maxPolarAngle <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// radians</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            document<span class="token punctuation">.</span>oncontextmenu<span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>

            <span class="token function">setupThreeJS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">setupWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> onWindowResize<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                controls<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                renderer<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          
                renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>scene<span class="token punctuation">,</span> camera <span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>animate<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>




        <span class="token keyword">function</span> <span class="token function">onWindowResize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            width <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>
            height <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>left <span class="token operator">=</span> width <span class="token operator">/</span> <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>right <span class="token operator">=</span> width <span class="token operator">/</span>  <span class="token number">2</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>top <span class="token operator">=</span> height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>bottom <span class="token operator">=</span> height <span class="token operator">/</span>  <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">;</span>

            <span class="token comment" spellcheck="true">//更新相机投影矩阵，在相机任何参数被改变以后必须被调用</span>
            camera<span class="token punctuation">.</span><span class="token function">updateProjectionMatrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            renderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span> width<span class="token punctuation">,</span>height <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">createText</span><span class="token punctuation">(</span> geom <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            geom<span class="token punctuation">.</span><span class="token function">computeBoundingBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> materials <span class="token operator">=</span> <span class="token punctuation">[</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0xffffff</span><span class="token punctuation">,</span> overdraw<span class="token punctuation">:</span> <span class="token number">0.5</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token number">0x000000</span><span class="token punctuation">,</span> overdraw<span class="token punctuation">:</span> <span class="token number">0.5</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span>
            <span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> mesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span> geom<span class="token punctuation">,</span> materials <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> mesh<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">drawAxis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment" spellcheck="true">//显示简易坐标系，其中坐标系的长度为110</span>
            <span class="token keyword">var</span> axisHelper <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>AxisHelper</span><span class="token punctuation">(</span><span class="token number">110</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>axisHelper<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//GridHelper辅助绘制二维网格。</span>
            <span class="token comment" spellcheck="true">//第一个参数是网格大小，（该网格方形边长）</span>
            <span class="token comment" spellcheck="true">//第二个参数是网格个数， (该网格一条边分成多少份)</span>
            <span class="token comment" spellcheck="true">//第一个参数除以第二个参数，得到该网格每一小格的单位长度</span>
            <span class="token comment" spellcheck="true">//后面是网格颜色。xxx.position.set( 80,0,80 )为网格的中心点坐标。</span>
            <span class="token keyword">var</span> gridXZ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>GridHelper</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridXZ<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">50</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">50</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>gridXZ<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> gridXY <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>GridHelper</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridXY<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">50</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridXY<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>x <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>gridXY<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> gridYZ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>GridHelper</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridYZ<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">50</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridYZ<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>z <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>gridYZ<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//添加坐标文字  </span>
            materialtext<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MultiMaterial</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshPhongMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token number">0xffffff</span><span class="token punctuation">,</span> shading<span class="token punctuation">:</span> THREE<span class="token punctuation">.</span>FlatShading <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// front</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshPhongMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token number">0xffffff</span><span class="token punctuation">,</span> shading<span class="token punctuation">:</span> THREE<span class="token punctuation">.</span>SmoothShading <span class="token punctuation">}</span> <span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// side</span>
            <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//引用外部字体库，绘制坐标刻度  </span>
            <span class="token keyword">var</span> loader<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>FontLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            loader<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">'You_Jump_I_Jump/source/fonts/helvetiker_regular.typeface.json'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment" spellcheck="true">//绘制x轴刻度</span>
                <span class="token keyword">var</span> txtMaterX <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token number">0xFF0000</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">100</span><span class="token operator">/</span><span class="token number">10</span><span class="token operator">*</span>i<span class="token punctuation">;</span>
                    <span class="token keyword">var</span> txtGeo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>TextGeometry</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
                        font<span class="token punctuation">:</span> response<span class="token punctuation">,</span>
                        size<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                        height<span class="token punctuation">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span>
                      <span class="token comment" spellcheck="true">//  curveSegments: 12,//弧线分段数，使得文字的曲线更加光滑</span>
                      <span class="token comment" spellcheck="true">//  bevelEnabled: true,//布尔值，是否使用倒角，意为在边缘处斜切</span>
                     <span class="token comment" spellcheck="true">//   bevelThickness: 0.1,//倒角厚度</span>
                      <span class="token comment" spellcheck="true">//  bevelSize: 0.05,//倒角宽度</span>
                     <span class="token comment" spellcheck="true">//   bevelSegments: 3</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
                    <span class="token keyword">var</span> txtMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>txtGeo<span class="token punctuation">,</span>txtMaterX<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    txtMesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>x<span class="token number">-3</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>txtMesh<span class="token punctuation">)</span><span class="token punctuation">;</span>
            　　<span class="token punctuation">}</span>
                <span class="token comment" spellcheck="true">//绘制y轴刻度</span>
                <span class="token keyword">var</span> txtMaterY <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token number">0x00FF00</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">100</span><span class="token operator">/</span><span class="token number">10</span><span class="token operator">*</span>i<span class="token punctuation">;</span>
                    <span class="token keyword">var</span> txtGeo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>TextGeometry</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
                        font<span class="token punctuation">:</span> response<span class="token punctuation">,</span>
                        size<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                        height<span class="token punctuation">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
                    <span class="token keyword">var</span> txtMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>txtGeo<span class="token punctuation">,</span>txtMaterY<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    txtMesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>x<span class="token number">-1.5</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>txtMesh<span class="token punctuation">)</span><span class="token punctuation">;</span>
            　　<span class="token punctuation">}</span>
                 <span class="token comment" spellcheck="true">//绘制z轴刻度</span>
                 <span class="token keyword">var</span> txtMaterZ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token number">0x0000FF</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">100</span><span class="token operator">/</span><span class="token number">10</span><span class="token operator">*</span>i<span class="token punctuation">;</span>
                    <span class="token keyword">var</span> txtGeo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>TextGeometry</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
                        font<span class="token punctuation">:</span> response<span class="token punctuation">,</span>
                        size<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                        height<span class="token punctuation">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
                    <span class="token keyword">var</span> txtMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>txtGeo<span class="token punctuation">,</span>txtMaterZ<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    txtMesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>x<span class="token operator">+</span><span class="token number">2.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    txtMesh<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>y <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
                    scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>txtMesh<span class="token punctuation">)</span><span class="token punctuation">;</span>
            　　<span class="token punctuation">}</span>         　 

            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//绘制坐标轴方向箭头</span>
            <span class="token keyword">var</span> arrX<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>ArrowHelper</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">20</span> <span class="token punctuation">,</span><span class="token number">0xff0000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            arrX<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> arrX <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> arrY<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>ArrowHelper</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">20</span> <span class="token punctuation">,</span><span class="token number">0x00FF00</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            arrY<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> arrY <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> arrZ<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>ArrowHelper</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">20</span> <span class="token punctuation">,</span><span class="token number">0x0000FF</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            arrZ<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> arrZ <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="画线，在坐标系中看"><a href="#画线，在坐标系中看" class="headerlink" title="画线，在坐标系中看"></a>画线，在坐标系中看</h2><p>绘制出threejs下的辅助坐标轴及网格，然后对照坐标画线。  </p>
<p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="../../../../images/xyzGridDrawLine2.jpg" alt="">  </p>
<pre class="line-numbers language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>xyzGridDrawLine<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style language-css"> 
            <span class="token selector">*</span><span class="token punctuation">{</span>
                <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
                <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token selector">body</span><span class="token punctuation">{</span>
                <span class="token property">overflow-x</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
                <span class="token property">overflow-y</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>You_Jump_I_Jump/build/three.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>You_Jump_I_Jump/js/controls/OrbitControls.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">
        document<span class="token punctuation">.</span>oncontextmenu<span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token keyword">var</span> scene<span class="token punctuation">,</span>camera<span class="token punctuation">,</span>renderer<span class="token punctuation">;</span>
        <span class="token keyword">var</span> geometry<span class="token punctuation">,</span>material<span class="token punctuation">,</span>mesh<span class="token punctuation">;</span>
        <span class="token keyword">var</span> width<span class="token punctuation">,</span>height<span class="token punctuation">;</span>
        <span class="token keyword">var</span> materialtext<span class="token punctuation">;</span>
        <span class="token keyword">var</span> text<span class="token punctuation">;</span>
        <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token keyword">function</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            scene <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token function">drawAxis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


            camera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PerspectiveCamera</span><span class="token punctuation">(</span> <span class="token number">45</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerWidth <span class="token operator">/</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">20000</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">170</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>up<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span><span class="token function">lookAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            geometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Geometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//给空白几何体添加点信息，geometry会把这些点自动组合成线，面。</span>
            geometry<span class="token punctuation">.</span>vertices<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
            geometry<span class="token punctuation">.</span>colors<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Color</span><span class="token punctuation">(</span> <span class="token number">0x444444</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> 
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Color</span><span class="token punctuation">(</span> <span class="token number">0xFF0000</span> <span class="token punctuation">)</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
            material <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>LineBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span> color<span class="token punctuation">:</span><span class="token number">0x442233</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//线构造</span>
            mesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Line</span><span class="token punctuation">(</span>geometry<span class="token punctuation">,</span> material<span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>mesh<span class="token punctuation">)</span><span class="token punctuation">;</span>

            renderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>WebGLRenderer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                antialias<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false表示是否开启反锯齿</span>
                alpha<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false 表示是否可以设置背景色透明</span>
                precision<span class="token punctuation">:</span> <span class="token string">'highp'</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// highp/mediump/lowp 表示着色精度选择</span>
                premultipliedAlpha<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false 表示是否可以设置像素深度（用来度量图像的分辨率）</span>
                preserveDrawingBuffer<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false 表示是否保存绘图缓冲</span>
                maxLights<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 最大灯光数</span>
                stencil<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token comment" spellcheck="true">// false/true 表示是否使用模板字体或图案</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            renderer<span class="token punctuation">.</span><span class="token function">setClearColor</span><span class="token punctuation">(</span><span class="token number">0xEEEEEE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            renderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span> window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerHeight <span class="token punctuation">)</span><span class="token punctuation">;</span>
            document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span> renderer<span class="token punctuation">.</span>domElement <span class="token punctuation">)</span><span class="token punctuation">;</span>


            <span class="token comment" spellcheck="true">//官方视角控制器</span>
            controls <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>OrbitControls</span><span class="token punctuation">(</span> camera<span class="token punctuation">,</span> renderer<span class="token punctuation">.</span>domElement <span class="token punctuation">)</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>enableDamping <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> 
            controls<span class="token punctuation">.</span>dampingFactor <span class="token operator">=</span> <span class="token number">0.25</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>screenSpacePanning <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>minDistance <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>maxDistance <span class="token operator">=</span> <span class="token number">1500</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>maxPolarAngle <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>rotateSpeed<span class="token operator">=</span><span class="token number">0.1</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>keyPanSpeed<span class="token operator">=</span><span class="token number">0.01</span><span class="token punctuation">;</span>


            window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> onWindowResize<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>


        <span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span> animate <span class="token punctuation">)</span><span class="token punctuation">;</span>            

            controls<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            renderer<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          
            renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>scene<span class="token punctuation">,</span> camera <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">onWindowResize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            width <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>
            height <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>left <span class="token operator">=</span> width <span class="token operator">/</span> <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>right <span class="token operator">=</span> width <span class="token operator">/</span>  <span class="token number">2</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>top <span class="token operator">=</span> height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>bottom <span class="token operator">=</span> height <span class="token operator">/</span>  <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">;</span>

            <span class="token comment" spellcheck="true">//更新相机投影矩阵，在相机任何参数被改变以后必须被调用</span>
            camera<span class="token punctuation">.</span><span class="token function">updateProjectionMatrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            renderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span> width<span class="token punctuation">,</span>height <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">createText</span><span class="token punctuation">(</span> geom <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            geom<span class="token punctuation">.</span><span class="token function">computeBoundingBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> materials <span class="token operator">=</span> <span class="token punctuation">[</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0xffffff</span><span class="token punctuation">,</span> overdraw<span class="token punctuation">:</span> <span class="token number">0.5</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token number">0x000000</span><span class="token punctuation">,</span> overdraw<span class="token punctuation">:</span> <span class="token number">0.5</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span>
            <span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> mesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span> geom<span class="token punctuation">,</span> materials <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> mesh<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">drawAxis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment" spellcheck="true">//显示简易坐标系，其中坐标系的长度为110</span>
            <span class="token keyword">var</span> axisHelper <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>AxisHelper</span><span class="token punctuation">(</span><span class="token number">110</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>axisHelper<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//GridHelper辅助绘制二维网格。</span>
            <span class="token comment" spellcheck="true">//第一个参数是网格大小，（该网格方形边长）</span>
            <span class="token comment" spellcheck="true">//第二个参数是网格个数， (该网格一条边分成多少份)</span>
            <span class="token comment" spellcheck="true">//第一个参数除以第二个参数，得到该网格每一小格的单位长度</span>
            <span class="token comment" spellcheck="true">//后面是网格颜色。xxx.position.set( 80,0,80 )为网格的中心点坐标。</span>
            <span class="token keyword">var</span> gridXZ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>GridHelper</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridXZ<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">50</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">50</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>gridXZ<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> gridXY <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>GridHelper</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridXY<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">50</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridXY<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>x <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>gridXY<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> gridYZ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>GridHelper</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridYZ<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">50</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridYZ<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>z <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>gridYZ<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//添加坐标文字  </span>
            materialtext<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MultiMaterial</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshPhongMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token number">0xffffff</span><span class="token punctuation">,</span> shading<span class="token punctuation">:</span> THREE<span class="token punctuation">.</span>FlatShading <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// front</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshPhongMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token number">0xffffff</span><span class="token punctuation">,</span> shading<span class="token punctuation">:</span> THREE<span class="token punctuation">.</span>SmoothShading <span class="token punctuation">}</span> <span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// side</span>
            <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//引用外部字体库，绘制坐标刻度  </span>
            <span class="token keyword">var</span> loader<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>FontLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            loader<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">'You_Jump_I_Jump/source/fonts/helvetiker_regular.typeface.json'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment" spellcheck="true">//绘制x轴刻度</span>
                <span class="token keyword">var</span> txtMaterX <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token number">0xFF0000</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">100</span><span class="token operator">/</span><span class="token number">10</span><span class="token operator">*</span>i<span class="token punctuation">;</span>
                    <span class="token keyword">var</span> txtGeo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>TextGeometry</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
                        font<span class="token punctuation">:</span> response<span class="token punctuation">,</span>
                        size<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                        height<span class="token punctuation">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span>
                      <span class="token comment" spellcheck="true">//  curveSegments: 12,//弧线分段数，使得文字的曲线更加光滑</span>
                      <span class="token comment" spellcheck="true">//  bevelEnabled: true,//布尔值，是否使用倒角，意为在边缘处斜切</span>
                     <span class="token comment" spellcheck="true">//   bevelThickness: 0.1,//倒角厚度</span>
                      <span class="token comment" spellcheck="true">//  bevelSize: 0.05,//倒角宽度</span>
                     <span class="token comment" spellcheck="true">//   bevelSegments: 3</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
                    <span class="token keyword">var</span> txtMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>txtGeo<span class="token punctuation">,</span>txtMaterX<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    txtMesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>x<span class="token number">-3</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>txtMesh<span class="token punctuation">)</span><span class="token punctuation">;</span>
            　　<span class="token punctuation">}</span>
                <span class="token comment" spellcheck="true">//绘制y轴刻度</span>
                <span class="token keyword">var</span> txtMaterY <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token number">0x00FF00</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">100</span><span class="token operator">/</span><span class="token number">10</span><span class="token operator">*</span>i<span class="token punctuation">;</span>
                    <span class="token keyword">var</span> txtGeo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>TextGeometry</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
                        font<span class="token punctuation">:</span> response<span class="token punctuation">,</span>
                        size<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                        height<span class="token punctuation">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
                    <span class="token keyword">var</span> txtMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>txtGeo<span class="token punctuation">,</span>txtMaterY<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    txtMesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>x<span class="token number">-1.5</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>txtMesh<span class="token punctuation">)</span><span class="token punctuation">;</span>
            　　<span class="token punctuation">}</span>
                 <span class="token comment" spellcheck="true">//绘制z轴刻度</span>
                 <span class="token keyword">var</span> txtMaterZ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token number">0x0000FF</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">100</span><span class="token operator">/</span><span class="token number">10</span><span class="token operator">*</span>i<span class="token punctuation">;</span>
                    <span class="token keyword">var</span> txtGeo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>TextGeometry</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
                        font<span class="token punctuation">:</span> response<span class="token punctuation">,</span>
                        size<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                        height<span class="token punctuation">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
                    <span class="token keyword">var</span> txtMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>txtGeo<span class="token punctuation">,</span>txtMaterZ<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    txtMesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>x<span class="token operator">+</span><span class="token number">2.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    txtMesh<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>y <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
                    scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>txtMesh<span class="token punctuation">)</span><span class="token punctuation">;</span>
            　　<span class="token punctuation">}</span>         　 

            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//绘制坐标轴方向箭头</span>
            <span class="token keyword">var</span> arrX<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>ArrowHelper</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">20</span> <span class="token punctuation">,</span><span class="token number">0xff0000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            arrX<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> arrX <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> arrY<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>ArrowHelper</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">20</span> <span class="token punctuation">,</span><span class="token number">0x00FF00</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            arrY<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> arrY <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> arrZ<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>ArrowHelper</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">20</span> <span class="token punctuation">,</span><span class="token number">0x0000FF</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            arrZ<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> arrZ <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span>


<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="直角坐标系"><a href="#直角坐标系" class="headerlink" title="直角坐标系"></a>直角坐标系</h3><p>AxesHelper可以通过嵌套的方式实现坐标轴和物体的同时旋转（类似物体本地坐标与其绑定在一起）  </p>
<pre class="line-numbers language-js"><code class="language-js"><span class="token keyword">var</span> cube<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Three<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>geomery<span class="token punctuation">,</span>material<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//scene.add(cube);</span>
<span class="token keyword">var</span> axesHelper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>AxesHelper</span><span class="token punctuation">(</span> <span class="token number">5</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//scene.add( axesHelper );</span>

<span class="token keyword">var</span> objectTotal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Obeject3D</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
objectTotal<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>cube<span class="token punctuation">)</span><span class="token punctuation">;</span>
objectTotal<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>axesHelper<span class="token punctuation">)</span><span class="token punctuation">;</span>
scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>objectTotal<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="辅助箭头"><a href="#辅助箭头" class="headerlink" title="辅助箭头"></a>辅助箭头</h3><p>ArrowHelper（辅助箭头）</p>
<pre class="line-numbers language-js"><code class="language-js"><span class="token function">ArrowHelper</span><span class="token punctuation">(</span>dir <span class="token punctuation">:</span> Vector3<span class="token punctuation">,</span> origin <span class="token punctuation">:</span> Vector3<span class="token punctuation">,</span> length <span class="token punctuation">:</span> Number<span class="token punctuation">,</span> hex <span class="token punctuation">:</span> Number<span class="token punctuation">,</span> headLength <span class="token punctuation">:</span> Number<span class="token punctuation">,</span> headWidth <span class="token punctuation">:</span> Number <span class="token punctuation">)</span>

dir – 基于箭头原点的方向<span class="token punctuation">.</span> 必须为vecteor3单位向量<span class="token punctuation">.</span>
origin – 箭头的原点<span class="token punctuation">.</span>
length – 箭头的长度<span class="token punctuation">.</span> 默认为 <span class="token number">1</span><span class="token punctuation">.</span>
hex – 定义的<span class="token number">16</span>进制颜色值<span class="token punctuation">.</span> 默认为 <span class="token number">0xffff00</span><span class="token punctuation">.</span>
headLength – <span class="token function">箭头头部</span><span class="token punctuation">(</span>锥体<span class="token punctuation">)</span>的长度<span class="token punctuation">.</span> 默认为箭头长度的<span class="token number">0.2</span><span class="token function">倍</span><span class="token punctuation">(</span><span class="token number">0.2</span> <span class="token operator">*</span> length<span class="token punctuation">)</span><span class="token punctuation">.</span>
headWidth – 箭头的宽度<span class="token punctuation">.</span> <span class="token function">默认为箭头头部</span><span class="token punctuation">(</span>锥体<span class="token punctuation">)</span>长度的<span class="token number">0.2</span><span class="token function">倍</span><span class="token punctuation">(</span><span class="token number">0.2</span> <span class="token operator">*</span> headLength<span class="token punctuation">)</span><span class="token punctuation">.</span>

方法
<span class="token number">1</span><span class="token punctuation">.</span>设置箭头辅助对象的颜色<span class="token punctuation">.</span>
<span class="token punctuation">.</span>setColor <span class="token punctuation">(</span>hex <span class="token punctuation">:</span> Number<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">null</span>
hex – <span class="token number">16</span>进制颜色值<span class="token punctuation">.</span>

<span class="token number">2</span><span class="token punctuation">.</span>设置箭头辅助对象的长度<span class="token punctuation">.</span>
<span class="token punctuation">.</span>setLength <span class="token punctuation">(</span>length <span class="token punctuation">:</span> Number<span class="token punctuation">,</span> headLength <span class="token punctuation">:</span> Number<span class="token punctuation">,</span> headWidth <span class="token punctuation">:</span> Number<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">null</span>
length – 要设置的长度<span class="token punctuation">.</span>
headLength – <span class="token function">要设置的箭头头部</span><span class="token punctuation">(</span>锥体<span class="token punctuation">)</span>的长度<span class="token punctuation">.</span>
headWidth – 要设置的箭头的宽度<span class="token punctuation">.</span>

<span class="token number">3</span><span class="token punctuation">.</span>设置箭头辅助对象的方向<span class="token punctuation">.</span>
<span class="token punctuation">.</span>setDirection <span class="token punctuation">(</span>dir <span class="token punctuation">:</span> Vector3<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">null</span>
dir – 要设置的方向<span class="token punctuation">.</span> 必须为单位向量<span class="token punctuation">.</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="threejs官方控制器"><a href="#threejs官方控制器" class="headerlink" title="threejs官方控制器"></a>threejs官方控制器</h2><p>OrbitControls  </p>
<pre class="line-numbers language-js"><code class="language-js">
官方控制器OrbitControls的参数


<span class="token comment" spellcheck="true">//鼠标控制是否可用</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>enabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//聚焦坐标,环绕物体的位置所在</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>target <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//最大最小相机移动距离(景深相机)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>minDistance <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>maxDistance <span class="token operator">=</span> <span class="token number">Infinity</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//最大最小鼠标缩放大小（正交相机）</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>minZoom <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>maxZoom <span class="token operator">=</span> <span class="token number">Infinity</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//最大仰视角和俯视角</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>minPolarAngle <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// radians</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>maxPolarAngle <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// radians</span>

<span class="token comment" spellcheck="true">//水平方向视角限制</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>minAzimuthAngle <span class="token operator">=</span> <span class="token operator">-</span> <span class="token number">Infinity</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// radians</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>maxAzimuthAngle <span class="token operator">=</span> <span class="token number">Infinity</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// radians</span>


<span class="token comment" spellcheck="true">//惯性滑动，滑动大小默认0.25</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>enableDamping <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>dampingFactor <span class="token operator">=</span> <span class="token number">0.25</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//滚轮是否可控制zoom，zoom速度默认1</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>enableZoom <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>zoomSpeed <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//是否可旋转，旋转速度</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>enableRotate <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>rotateSpeed <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//是否可平移，默认移动速度为7px</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>enablePan <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>keyPanSpeed <span class="token operator">=</span> <span class="token number">7.0</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// pixels moved per arrow key push</span>

<span class="token comment" spellcheck="true">//是否自动旋转，自动旋转速度。默认每秒30圈</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>autoRotate <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>autoRotateSpeed <span class="token operator">=</span> <span class="token number">2.0</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 30 seconds per round when fps is 60</span>

<span class="token comment" spellcheck="true">//是否能使用键盘</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>enableKeys <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//默认键盘控制上下左右的键</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>keys <span class="token operator">=</span> <span class="token punctuation">{</span> LEFT<span class="token punctuation">:</span> <span class="token number">37</span><span class="token punctuation">,</span> UP<span class="token punctuation">:</span> <span class="token number">38</span><span class="token punctuation">,</span> RIGHT<span class="token punctuation">:</span> <span class="token number">39</span><span class="token punctuation">,</span> BOTTOM<span class="token punctuation">:</span> <span class="token number">40</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//鼠标点击按钮</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>mouseButtons <span class="token operator">=</span> <span class="token punctuation">{</span> ORBIT<span class="token punctuation">:</span> THREE<span class="token punctuation">.</span>MOUSE<span class="token punctuation">.</span>LEFT<span class="token punctuation">,</span> ZOOM<span class="token punctuation">:</span> THREE<span class="token punctuation">.</span>MOUSE<span class="token punctuation">.</span>MIDDLE<span class="token punctuation">,</span> PAN<span class="token punctuation">:</span> THREE<span class="token punctuation">.</span>MOUSE<span class="token punctuation">.</span>RIGHT <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="threejs的光源和阴影"><a href="#threejs的光源和阴影" class="headerlink" title="threejs的光源和阴影"></a>threejs的光源和阴影</h2><h3 id="环境光"><a href="#环境光" class="headerlink" title="环境光"></a>环境光</h3><p>环境光可以放在任意一个位置，不会衰减，不需要设置光强，各个点都一样，所以不用设置位置。  </p>
<pre class="line-numbers language-js"><code class="language-js"><span class="token keyword">var</span> light <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>AmbientLight</span><span class="token punctuation">(</span><span class="token number">0xffffff</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>light<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h3 id="点光源"><a href="#点光源" class="headerlink" title="点光源"></a>点光源</h3><p>点光源是从一个点出发，向各个方向发射光线。其第一个参数表示光颜色；第二个参数表示光照强度，范围为0～1；第3个参数表示光照距离，默认为0，表示无限远；第4个参数表示光照强度随着光照防线逐渐衰减的量，默认为1。  </p>
<pre class="line-numbers language-js"><code class="language-js"><span class="token keyword">var</span> light <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PointLight</span><span class="token punctuation">(</span><span class="token number">0xffffff</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
light<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>light<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h3 id="聚光灯"><a href="#聚光灯" class="headerlink" title="聚光灯"></a>聚光灯</h3><p>聚光灯从开始位置以锥形的照射向目标位置发射光线，默认目标位置为原点。第一个参数表示颜色，默认为白色；第二个参数表示光强，默认为1，范围0～1；第三个参数表示光照距离，默认为根据光源距离，线性衰减光源的最大距离；第4个参数表示Math.PI/2；第5个参数表示根据光照锥形计算的阴影的百分比；第6个参数表示光照强度随着光照防线逐渐衰减的量。  </p>
<pre class="line-numbers language-js"><code class="language-js"><span class="token comment" spellcheck="true">//SpotLight( color, intensity, distance, angle, penumbra, decay );  </span>
<span class="token keyword">var</span> light <span class="token operator">=</span> <span class="token keyword">new</span>  <span class="token class-name">THREE<span class="token punctuation">.</span>SpotLight</span><span class="token punctuation">(</span><span class="token number">0xffffff</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
light<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>light<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="方向光"><a href="#方向光" class="headerlink" title="方向光"></a>方向光</h3><p>方向光的创建接收2个参数，第一个表示光照颜色，第二个表示光照强度，光照强度取值范围为0～1，光照递增；</p>
<pre class="line-numbers language-js"><code class="language-js"><span class="token keyword">var</span> light <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>DirectionalLight</span><span class="token punctuation">(</span><span class="token number">0xffffff</span><span class="token punctuation">,</span><span class="token number">0.8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
light<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>light<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>方向光是平行光，从其位置开始，向目标方向照射，不会随着距离而衰减；目标方向默认是原点，可以自定义，然而对于自定义目标位置，也需要加入到场景中才会生效；  </p>
<pre class="line-numbers language-js"><code class="language-js">scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>light<span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>方向光的目标位置也可以是场景中的一个物体（这个物体需要有位置信息）；因此，物体的位置不同，方向光作用于物体的面不同，看到的颜色也不同；平行光可以设置光照强度，光照越强，显示的颜色越鲜艳，否则显示的颜色越暗淡；  </p>
<h3 id="半球光"><a href="#半球光" class="headerlink" title="半球光"></a>半球光</h3><p>半球光是一种位于场景上方，从天空逐渐递减到地面的一种光照，其可以为室外环境模拟更真实的光照效果；当模拟室外光照的时候，可以使用半球光作为基础光照，再添加方向光模拟太阳光。  </p>
<pre class="line-numbers language-js"><code class="language-js"><span class="token function">HemisphereLight</span><span class="token punctuation">(</span>skyColor<span class="token punctuation">,</span> groundColor<span class="token punctuation">,</span> intensity<span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>第一个参数表示天空颜色，默认白色；第二个参数表示地面颜色，默认为黑色；第三个参数表示光照强度，默认为1.</p>
<h3 id="平面光"><a href="#平面光" class="headerlink" title="平面光"></a>平面光</h3><p>平面光是在一个平面上均匀的发射出一个矩形平面，平面光可以用来模拟明亮的窗户或者条形透明物体；该光源threejs暂时还不支持，需要添加扩展库；</p>
<pre class="line-numbers language-js"><code class="language-js"><span class="token function">RectAreaLight</span><span class="token punctuation">(</span>color<span class="token punctuation">,</span> intensity<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="阴影"><a href="#阴影" class="headerlink" title="阴影"></a>阴影</h3><p>支持阴影的有：点光源，聚光灯，方向光  </p>
<p>由于阴影的计算是非常消耗性能的，因此阴影默认是不计算不显示的；需要显示阴影，有以下几个条件：  </p>
<ol>
<li>渲染器需要开启阴影计算: renderer.shadowMap.enabled = true; </li>
<li>光源支持阴影，光照开启阴影：light.castShadow = true; </li>
<li>需要计算阴影的物体开启阴影：cube.castShadow = true; </li>
<li>需要有接收阴影的物体： plane.receiveShadow = true; </li>
</ol>

<p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="../../../../images/2vlnt-aviec.gif" alt="">  </p>
<pre class="line-numbers language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>threejs_city<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style language-css"> 
            <span class="token selector">*</span><span class="token punctuation">{</span>
                <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
                <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token selector">body</span><span class="token punctuation">{</span>
                <span class="token property">overflow-x</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
                <span class="token property">overflow-y</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>You_Jump_I_Jump/build/three.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>You_Jump_I_Jump/js/controls/OrbitControls.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">


        <span class="token keyword">var</span> scene<span class="token punctuation">,</span>camera<span class="token punctuation">,</span>renderer<span class="token punctuation">;</span>
        <span class="token keyword">var</span> geometry<span class="token punctuation">,</span>material<span class="token punctuation">,</span>mesh<span class="token punctuation">;</span>
        <span class="token keyword">var</span> width<span class="token punctuation">,</span>height<span class="token punctuation">;</span>
        <span class="token keyword">var</span> materialtext<span class="token punctuation">;</span>
        <span class="token keyword">var</span> text<span class="token punctuation">;</span>

        <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">function</span> <span class="token function">setupThreeJS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            scene <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">drawAxis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            camera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PerspectiveCamera</span><span class="token punctuation">(</span> <span class="token number">75</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerWidth <span class="token operator">/</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>up<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span><span class="token function">lookAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


            renderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>WebGLRenderer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                antialias<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false表示是否开启反锯齿</span>
                alpha<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false 表示是否可以设置背景色透明</span>
                precision<span class="token punctuation">:</span> <span class="token string">'highp'</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// highp/mediump/lowp 表示着色精度选择</span>
                premultipliedAlpha<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false 表示是否可以设置像素深度（用来度量图像的分辨率）</span>
                preserveDrawingBuffer<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false 表示是否保存绘图缓冲</span>
                maxLights<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 最大灯光数</span>
                stencil<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token comment" spellcheck="true">// false/true 表示是否使用模板字体或图案</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            renderer<span class="token punctuation">.</span><span class="token function">setClearColor</span><span class="token punctuation">(</span><span class="token number">0xEEEEEE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            renderer<span class="token punctuation">.</span>shadowMapEnabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//影子1</span>

            renderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span> window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerHeight <span class="token punctuation">)</span><span class="token punctuation">;</span>
            document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span> renderer<span class="token punctuation">.</span>domElement <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">setupWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

            <span class="token keyword">var</span> amlight <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>AmbientLight</span><span class="token punctuation">(</span><span class="token number">0x003300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>amlight<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">var</span> splight <span class="token operator">=</span> <span class="token keyword">new</span>  <span class="token class-name">THREE<span class="token punctuation">.</span>SpotLight</span><span class="token punctuation">(</span><span class="token number">0xffffff</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            splight<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>splight<span class="token punctuation">)</span><span class="token punctuation">;</span>
            splight<span class="token punctuation">.</span>castShadow <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            splight<span class="token punctuation">.</span>shadowMapHeight<span class="token operator">=</span><span class="token number">2048</span><span class="token punctuation">;</span>
            splight<span class="token punctuation">.</span>shadowMapWidth<span class="token operator">=</span><span class="token number">2048</span><span class="token punctuation">;</span>

            <span class="token keyword">var</span> geometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>CubeGeometry</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">var</span> material <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshLambertMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token number">0xff0000</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            mesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>geometry<span class="token punctuation">,</span>material<span class="token punctuation">)</span><span class="token punctuation">;</span>
            mesh<span class="token punctuation">.</span>castShadow <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>mesh<span class="token punctuation">)</span><span class="token punctuation">;</span>
            mesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment" spellcheck="true">//添加平面, 接受阴影</span>
            <span class="token keyword">var</span> planeGeometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PlaneGeometry</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> planeMaterial <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshLambertMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span><span class="token number">0xFFFFFF</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> plane <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>planeGeometry<span class="token punctuation">,</span>planeMaterial<span class="token punctuation">)</span><span class="token punctuation">;</span>
            plane<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">0.5</span><span class="token operator">*</span>Math<span class="token punctuation">.</span>PI<span class="token punctuation">;</span>
            plane<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">;</span>
            plane<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>plane<span class="token punctuation">)</span><span class="token punctuation">;</span>
            plane<span class="token punctuation">.</span>receiveShadow <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

            <span class="token comment" spellcheck="true">//官方视角控制器</span>
            controls <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>OrbitControls</span><span class="token punctuation">(</span> camera<span class="token punctuation">,</span> renderer<span class="token punctuation">.</span>domElement <span class="token punctuation">)</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>enableDamping <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> 
            controls<span class="token punctuation">.</span>dampingFactor <span class="token operator">=</span> <span class="token number">0.25</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>screenSpacePanning <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>minDistance <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>maxDistance <span class="token operator">=</span> <span class="token number">1500</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>maxPolarAngle <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>rotateSpeed<span class="token operator">=</span><span class="token number">0.1</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>keyPanSpeed<span class="token operator">=</span><span class="token number">0.01</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>minPolarAngle <span class="token operator">=</span> <span class="token operator">-</span>Math<span class="token punctuation">.</span>PI<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// radians</span>
            controls<span class="token punctuation">.</span>maxPolarAngle <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// radians</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            document<span class="token punctuation">.</span>oncontextmenu<span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>

            <span class="token function">setupThreeJS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">setupWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> onWindowResize<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                controls<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                mesh<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>y<span class="token operator">+</span><span class="token operator">=</span><span class="token number">0.01</span><span class="token punctuation">;</span>
                mesh<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>z<span class="token operator">+</span><span class="token operator">=</span><span class="token number">0.01</span><span class="token punctuation">;</span>

                renderer<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          
                renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>scene<span class="token punctuation">,</span> camera <span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>animate<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>




        <span class="token keyword">function</span> <span class="token function">onWindowResize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            width <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>
            height <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>left <span class="token operator">=</span> width <span class="token operator">/</span> <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>right <span class="token operator">=</span> width <span class="token operator">/</span>  <span class="token number">2</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>top <span class="token operator">=</span> height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>bottom <span class="token operator">=</span> height <span class="token operator">/</span>  <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">;</span>

            <span class="token comment" spellcheck="true">//更新相机投影矩阵，在相机任何参数被改变以后必须被调用</span>
            camera<span class="token punctuation">.</span><span class="token function">updateProjectionMatrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            renderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span> width<span class="token punctuation">,</span>height <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">createText</span><span class="token punctuation">(</span> geom <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            geom<span class="token punctuation">.</span><span class="token function">computeBoundingBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> materials <span class="token operator">=</span> <span class="token punctuation">[</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0xffffff</span><span class="token punctuation">,</span> overdraw<span class="token punctuation">:</span> <span class="token number">0.5</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token number">0x000000</span><span class="token punctuation">,</span> overdraw<span class="token punctuation">:</span> <span class="token number">0.5</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span>
            <span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> mesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span> geom<span class="token punctuation">,</span> materials <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> mesh<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">drawAxis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment" spellcheck="true">//显示简易坐标系，其中坐标系的长度为110</span>
            <span class="token keyword">var</span> axisHelper <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>AxisHelper</span><span class="token punctuation">(</span><span class="token number">110</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>axisHelper<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//GridHelper辅助绘制二维网格。</span>
            <span class="token comment" spellcheck="true">//第一个参数是网格大小，（该网格方形边长）</span>
            <span class="token comment" spellcheck="true">//第二个参数是网格个数， (该网格一条边分成多少份)</span>
            <span class="token comment" spellcheck="true">//第一个参数除以第二个参数，得到该网格每一小格的单位长度</span>
            <span class="token comment" spellcheck="true">//后面是网格颜色。xxx.position.set( 80,0,80 )为网格的中心点坐标。</span>
            <span class="token keyword">var</span> gridXZ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>GridHelper</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridXZ<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">50</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">50</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>gridXZ<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> gridXY <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>GridHelper</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridXY<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">50</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridXY<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>x <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>gridXY<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> gridYZ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>GridHelper</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridYZ<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">50</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridYZ<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>z <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>gridYZ<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//添加坐标文字  </span>
            materialtext<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MultiMaterial</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshPhongMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token number">0xffffff</span><span class="token punctuation">,</span> shading<span class="token punctuation">:</span> THREE<span class="token punctuation">.</span>FlatShading <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// front</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshPhongMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token number">0xffffff</span><span class="token punctuation">,</span> shading<span class="token punctuation">:</span> THREE<span class="token punctuation">.</span>SmoothShading <span class="token punctuation">}</span> <span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// side</span>
            <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//引用外部字体库，绘制坐标刻度  </span>
            <span class="token keyword">var</span> loader<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>FontLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            loader<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">'You_Jump_I_Jump/source/fonts/helvetiker_regular.typeface.json'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment" spellcheck="true">//绘制x轴刻度</span>
                <span class="token keyword">var</span> txtMaterX <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token number">0xFF0000</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">100</span><span class="token operator">/</span><span class="token number">10</span><span class="token operator">*</span>i<span class="token punctuation">;</span>
                    <span class="token keyword">var</span> txtGeo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>TextGeometry</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
                        font<span class="token punctuation">:</span> response<span class="token punctuation">,</span>
                        size<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                        height<span class="token punctuation">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span>
                      <span class="token comment" spellcheck="true">//  curveSegments: 12,//弧线分段数，使得文字的曲线更加光滑</span>
                      <span class="token comment" spellcheck="true">//  bevelEnabled: true,//布尔值，是否使用倒角，意为在边缘处斜切</span>
                     <span class="token comment" spellcheck="true">//   bevelThickness: 0.1,//倒角厚度</span>
                      <span class="token comment" spellcheck="true">//  bevelSize: 0.05,//倒角宽度</span>
                     <span class="token comment" spellcheck="true">//   bevelSegments: 3</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
                    <span class="token keyword">var</span> txtMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>txtGeo<span class="token punctuation">,</span>txtMaterX<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    txtMesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>x<span class="token number">-3</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>txtMesh<span class="token punctuation">)</span><span class="token punctuation">;</span>
            　　<span class="token punctuation">}</span>
                <span class="token comment" spellcheck="true">//绘制y轴刻度</span>
                <span class="token keyword">var</span> txtMaterY <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token number">0x00FF00</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">100</span><span class="token operator">/</span><span class="token number">10</span><span class="token operator">*</span>i<span class="token punctuation">;</span>
                    <span class="token keyword">var</span> txtGeo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>TextGeometry</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
                        font<span class="token punctuation">:</span> response<span class="token punctuation">,</span>
                        size<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                        height<span class="token punctuation">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
                    <span class="token keyword">var</span> txtMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>txtGeo<span class="token punctuation">,</span>txtMaterY<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    txtMesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>x<span class="token number">-1.5</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>txtMesh<span class="token punctuation">)</span><span class="token punctuation">;</span>
            　　<span class="token punctuation">}</span>
                 <span class="token comment" spellcheck="true">//绘制z轴刻度</span>
                 <span class="token keyword">var</span> txtMaterZ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token number">0x0000FF</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">100</span><span class="token operator">/</span><span class="token number">10</span><span class="token operator">*</span>i<span class="token punctuation">;</span>
                    <span class="token keyword">var</span> txtGeo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>TextGeometry</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
                        font<span class="token punctuation">:</span> response<span class="token punctuation">,</span>
                        size<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                        height<span class="token punctuation">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
                    <span class="token keyword">var</span> txtMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>txtGeo<span class="token punctuation">,</span>txtMaterZ<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    txtMesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>x<span class="token operator">+</span><span class="token number">2.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    txtMesh<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>y <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
                    scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>txtMesh<span class="token punctuation">)</span><span class="token punctuation">;</span>
            　　<span class="token punctuation">}</span>         　 

            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//绘制坐标轴方向箭头</span>
            <span class="token keyword">var</span> arrX<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>ArrowHelper</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">20</span> <span class="token punctuation">,</span><span class="token number">0xff0000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            arrX<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> arrX <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> arrY<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>ArrowHelper</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">20</span> <span class="token punctuation">,</span><span class="token number">0x00FF00</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            arrY<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> arrY <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> arrZ<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>ArrowHelper</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">20</span> <span class="token punctuation">,</span><span class="token number">0x0000FF</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            arrZ<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> arrZ <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="threejs材质"><a href="#threejs材质" class="headerlink" title="threejs材质"></a>threejs材质</h2><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="../../../../images/20201229101940943.png" alt="">  </p>
<h4 id="基本材质MeshBasicMaterial"><a href="#基本材质MeshBasicMaterial" class="headerlink" title="基本材质MeshBasicMaterial"></a>基本材质MeshBasicMaterial</h4><p>对光照无感，给几何体一种简单的颜色或显示线框。</p>
<pre class="line-numbers language-js"><code class="language-js">参数集：  
visible：是否可见，默认为<span class="token boolean">true</span>  
side：渲染面片正面或是反面，默认为正面THREE<span class="token punctuation">.</span>FrontSide，可设置为反面THREE<span class="token punctuation">.</span>BackSide，或双面THREE<span class="token punctuation">.</span>DoubleSide  
wireframe：是否渲染线而非面，默认为<span class="token boolean">false</span>  
color：十六进制RGB颜色，如红色表示为<span class="token number">0xff0000</span>  
opacity<span class="token punctuation">:</span> <span class="token number">0.5</span>  
map：使用纹理贴图  
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="兰伯特材质MeshLambertMaterial"><a href="#兰伯特材质MeshLambertMaterial" class="headerlink" title="兰伯特材质MeshLambertMaterial"></a>兰伯特材质MeshLambertMaterial</h4><p>对光照有反应，用于创建暗淡的不发光的物体。在灰暗的或不光滑的表面产生均匀散射而形成的材质类型。  </p>
<pre class="line-numbers language-js"><code class="language-js">参数集：  
color是用来表现材质对散射光的反射能力，也是最常用来设置材质颜色的属性。除此之外，还可以用ambient和emissive控制材质的颜色。  
ambient表示对环境光的反射能力，只有当设置了AmbientLight后，该值才是有效的，材质对环境光的反射能力与环境光强相乘后得到材质实际表现的颜色。  
emissive是材质的自发光颜色，可以用来表现光源的颜色。  
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="冯材质MeshPhongMaterial"><a href="#冯材质MeshPhongMaterial" class="headerlink" title="冯材质MeshPhongMaterial"></a>冯材质MeshPhongMaterial</h4><p>对光照也有反应，用于创建金属类明亮的物体。  </p>
<pre class="line-numbers language-js"><code class="language-js">参数集：  
color<span class="token punctuation">:</span>材料的颜色，默认为白色  
shininess<span class="token punctuation">:</span>光滑度，指定高光部分的亮度，默认值为<span class="token number">30</span>  
specular<span class="token punctuation">:</span>高光部分的颜色，默认值为<span class="token number">0x111111</span>深灰色，如果把它的颜色设置为跟color颜色一样的话，会得到类似金属一样的材质，设置成灰色，则看起来更像塑料  
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="深度着色材质MeshDepthMaterial"><a href="#深度着色材质MeshDepthMaterial" class="headerlink" title="深度着色材质MeshDepthMaterial"></a>深度着色材质MeshDepthMaterial</h4><p>MeshDepthMaterial是一种基于深度着色的材质，这种材质的外观不是由光照或者某个材质决定，而是由物体到相机的远近距离决定，当物体离相机较近时会呈现白色，较远时会呈现黑色，所以可以使物体实现，渐变的效果。<br>摄像机的near属性和far属性之间的距离决定了场景的亮度和物体消失的速度。如果这个距离非常大，那么当物体远离摄像机时，只会稍微消失一点。如果这个距离非常小，那么物体消失的效果会非常明显。  </p>
<h2 id="ShapeGeometry自定义形状贴图"><a href="#ShapeGeometry自定义形状贴图" class="headerlink" title="ShapeGeometry自定义形状贴图"></a>ShapeGeometry自定义形状贴图</h2><p><a href="https://blog.csdn.net/ALLENJIAO/article/details/84320386" target="_blank" rel="noopener">https://blog.csdn.net/ALLENJIAO/article/details/84320386</a>  </p>
<h2 id="贴图的UV坐标"><a href="#贴图的UV坐标" class="headerlink" title="贴图的UV坐标"></a>贴图的UV坐标</h2><p><a href="http://paulyg.f2s.com/uv.htm" target="_blank" rel="noopener">http://paulyg.f2s.com/uv.htm</a><br><a href="https://blog.csdn.net/u014291990/article/details/103374108" target="_blank" rel="noopener">https://blog.csdn.net/u014291990/article/details/103374108</a><br><a href="http://www.yanhuangxueyuan.com/threejs/docs/index.html#api/zh/core/Geometry" target="_blank" rel="noopener">http://www.yanhuangxueyuan.com/threejs/docs/index.html#api/zh/core/Geometry</a>  </p>
<p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="../../../../images/dingdianshuju0threejs.jpg" alt="定点数据">  </p>
<p>纹理坐标含义就是字面意思，一张纹理贴图图像的坐标，选择一张图片，比如以图片左下角为坐标原点，右上角为坐标(1.0,1.0)，图片上所有位置纵横坐标都介于0.0~1.0之间。<br>纹理UV坐标和顶点位置坐标是一一对应关系，这也就是为什么一张图片可以映射到一个模型的表面，只要把图片的每个纹理坐标和模型的顶点位置建立一对一的关系，就可以实现图像到模型的映射。  </p>
<p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="../../../../images/wenliyingshethreejs0.jpg" alt="纹理映射">  </p>
<p>几何体有两组UV坐标，第一组组用于.map、.normalMap、.specularMap等贴图的映射，第二组用于阴影贴图.lightMap的映射  </p>
<pre class="line-numbers language-js"><code class="language-js">
<span class="token comment" spellcheck="true">//几何体表面所有位置全部对应贴图(0.4,0.4)坐标位置的像素值，这样话网格模型不会显示完整的地图，  </span>
<span class="token comment" spellcheck="true">//而是显示采样点纹理坐标(0.4,0.4)对应的RGB值。  </span>

<span class="token comment" spellcheck="true">//矩形平面，细分数默认1，即2个三角形拼接成一个矩形</span>
<span class="token keyword">var</span> geometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PlaneGeometry</span><span class="token punctuation">(</span><span class="token number">204</span><span class="token punctuation">,</span> <span class="token number">102</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">...</span>
<span class="token comment" spellcheck="true">//遍历uv坐标  </span>
geometry<span class="token punctuation">.</span>faceVertexUvs<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>elem <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  elem<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>Vector2 <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// 所有的UV坐标全部设置为一个值</span>
    Vector2<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">0.4</span><span class="token punctuation">,</span><span class="token number">0.4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Geometry自定义顶点UV坐标<br>下面代码通过几何体Geometry自定义了一个由两个三角形组成的矩形几何体，并且通过几何体的.faceVertexUvs[0]属性设置了每个顶点对应的第一组UV坐标</p>
<pre class="line-numbers language-js"><code class="language-js"><span class="token keyword">var</span> geometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Geometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//创建一个空几何体对象</span>
<span class="token comment" spellcheck="true">/**顶点坐标(纹理映射位置)*/</span>
<span class="token keyword">var</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//顶点1坐标</span>
<span class="token keyword">var</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span><span class="token number">160</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//顶点2坐标</span>
<span class="token keyword">var</span> p3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span><span class="token number">160</span><span class="token punctuation">,</span><span class="token number">80</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//顶点3坐标</span>
<span class="token keyword">var</span> p4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">80</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//顶点4坐标</span>
geometry<span class="token punctuation">.</span>vertices<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span>p2<span class="token punctuation">,</span>p3<span class="token punctuation">,</span>p4<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//顶点坐标添加到geometry对象</span>
<span class="token comment" spellcheck="true">/** 三角面1、三角面2*/</span>
<span class="token keyword">var</span> normal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//三角面法向量</span>
<span class="token keyword">var</span> face0 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Face3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> normal<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//三角面1</span>
<span class="token keyword">var</span> face1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Face3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> normal<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//三角面2</span>
geometry<span class="token punctuation">.</span>faces<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> face0<span class="token punctuation">,</span>face1 <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//三角面1、2添加到几何体</span>
<span class="token comment" spellcheck="true">/**纹理坐标*/</span>
<span class="token keyword">var</span> t0 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector2</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//图片左下角</span>
<span class="token keyword">var</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector2</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//图片右下角</span>
<span class="token keyword">var</span> t2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector2</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//图片右上角</span>
<span class="token keyword">var</span> t3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector2</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//图片左上角</span>
uv1 <span class="token operator">=</span> <span class="token punctuation">[</span>t0<span class="token punctuation">,</span>t1<span class="token punctuation">,</span>t2<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//选中图片一个三角区域像素——映射到三角面1</span>
uv2 <span class="token operator">=</span> <span class="token punctuation">[</span>t0<span class="token punctuation">,</span>t2<span class="token punctuation">,</span>t3<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//选中图片一个三角区域像素——映射到三角面2</span>
geometry<span class="token punctuation">.</span>faceVertexUvs<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>uv1<span class="token punctuation">,</span>uv2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//纹理坐标传递给纹理三角面属性</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BufferGeometry自定义顶点UV坐标<br>下面代码通过几何体BufferGeometry自定义了一个由两个三角形组成的矩形几何体，并且通过几何体的.attributes.uv属性设置了每个顶点对应的第一组UV坐标。  </p>
<pre class="line-numbers language-js"><code class="language-js"><span class="token keyword">var</span> geometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>BufferGeometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//声明一个空几何体对象</span>
<span class="token comment" spellcheck="true">//类型数组创建顶点位置position数据</span>
<span class="token keyword">var</span> vertices <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//顶点1坐标</span>
  <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//顶点2坐标</span>
  <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//顶点3坐标</span>
  <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//顶点4坐标</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// 创建属性缓冲区对象</span>
<span class="token keyword">var</span> attribue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>BufferAttribute</span><span class="token punctuation">(</span>vertices<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//3个为一组</span>
<span class="token comment" spellcheck="true">// 设置几何体attributes属性的位置position属性</span>
geometry<span class="token punctuation">.</span>attributes<span class="token punctuation">.</span>position <span class="token operator">=</span> attribue
<span class="token keyword">var</span> normals <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//顶点1法向量</span>
  <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//顶点2法向量</span>
  <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//顶点3法向量</span>
  <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//顶点4法向量</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// 设置几何体attributes属性的位置normal属性</span>
geometry<span class="token punctuation">.</span>attributes<span class="token punctuation">.</span>normal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>BufferAttribute</span><span class="token punctuation">(</span>normals<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//3个为一组,表示一个顶点的xyz坐标</span>
<span class="token comment" spellcheck="true">// Uint16Array类型数组创建顶点索引数据</span>
<span class="token keyword">var</span> indexes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint16Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">// 索引数据赋值给几何体的index属性</span>
geometry<span class="token punctuation">.</span>index <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>BufferAttribute</span><span class="token punctuation">(</span>indexes<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//1个为一组</span>
 <span class="token comment" spellcheck="true">/**纹理坐标*/</span>
 <span class="token keyword">var</span> uvs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
   <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//图片左下角</span>
   <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//图片右下角</span>
   <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//图片右上角</span>
   <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//图片左上角</span>
 <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token comment" spellcheck="true">// 设置几何体attributes属性的位置normal属性</span>
 geometry<span class="token punctuation">.</span>attributes<span class="token punctuation">.</span>uv <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>BufferAttribute</span><span class="token punctuation">(</span>uvs<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//2个为一组,表示一个顶点的纹理坐标</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="辅助对象"><a href="#辅助对象" class="headerlink" title="辅助对象"></a>辅助对象</h2><p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="../../../../images/boxhelpert3.jpg" alt="">  </p>
<p>BoxHelper 盒辅助:显示包围一个对象的线框盒  </p>
<pre class="line-numbers language-js"><code class="language-js"><span class="token keyword">var</span> sphere <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>SphereGeometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">var</span> object <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span> sphere<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token number">0xff0000</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> box <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>BoxHelper</span><span class="token punctuation">(</span> object <span class="token punctuation">)</span><span class="token punctuation">;</span> 
scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> box <span class="token punctuation">)</span><span class="token punctuation">;</span>  
scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> object <span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BoundingBoxHelper包围盒辅助,这个辅助对象将创建一个带盒子模型(BoxGeometry)的线框网孔(Mesh)对象;这个包围盒将因此具有面对角线。BoxHelper生成一个不包含面对角线的Line对象。  </p>
<pre class="line-numbers language-js"><code class="language-js"><span class="token keyword">var</span> hex <span class="token operator">=</span> <span class="token number">0xff0000</span><span class="token punctuation">;</span> 
<span class="token keyword">var</span> sphereMaterial <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshLambertMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token number">0x00ff00</span><span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">var</span> sphere <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>SphereGeometry</span><span class="token punctuation">(</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">,</span> sphereMaterial <span class="token punctuation">)</span><span class="token punctuation">;</span> 
scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> sphere <span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">var</span> bbox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>BoundingBoxHelper</span><span class="token punctuation">(</span> sphere<span class="token punctuation">,</span> hex <span class="token punctuation">)</span><span class="token punctuation">;</span> 
bbox<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> bbox <span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>PointLightHelper 点光源辅助  </p>
<pre class="line-numbers language-js"><code class="language-js"><span class="token keyword">var</span> pointLight <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PointLight</span><span class="token punctuation">(</span> <span class="token number">0xff0000</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1000</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
pointLight<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> 
scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> pointLight <span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">var</span> sphereSize <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> 
<span class="token keyword">var</span> pointLightHelper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PointLightHelper</span><span class="token punctuation">(</span> pointLight<span class="token punctuation">,</span> sphereSize <span class="token punctuation">)</span><span class="token punctuation">;</span> 
scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> pointLightHelper <span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>DirectionalLightHelper 平行光辅助  </p>
<pre class="line-numbers language-js"><code class="language-js"><span class="token keyword">var</span> helper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>DirectionalLightHelper</span><span class="token punctuation">(</span>light<span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span><span class="token number">0xFFFFFF</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>helper<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>SpotLightHelper 聚光辅助  </p>
<pre class="line-numbers language-js"><code class="language-js"><span class="token keyword">var</span> spotLight <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>SpotLight</span><span class="token punctuation">(</span> <span class="token number">0xffffff</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> 
spotLight<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> 
scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> spotLight <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> spotLightHelper <span class="token operator">=</span> 
<span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>SpotLightHelper</span><span class="token punctuation">(</span> spotLight <span class="token punctuation">)</span><span class="token punctuation">;</span> 
scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> spotLightHelper <span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="官方FlyControls控制器"><a href="#官方FlyControls控制器" class="headerlink" title="官方FlyControls控制器"></a>官方FlyControls控制器</h2><table>
<tbody><tr>
<th>操控</th><th>动作</th>
</tr>
<tr>
<td>鼠标左右键</td><td>前进和后退</td>
</tr>
<tr>
<td>上下左右方向键（w，a，s，d）</td><td>前后左右移动</td>
</tr>
<tr>
<td>q、e</td><td>切斜</td>
</tr>
<tr>
<td>r、f</td><td>上下</td>
</tr>
</tbody></table>  

<pre class="line-numbers language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>第一人称控制器<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style language-css"> 
            <span class="token selector">*</span><span class="token punctuation">{</span>
                <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
                <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token selector">body</span><span class="token punctuation">{</span>
                <span class="token property">overflow-x</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
                <span class="token property">overflow-y</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>You_Jump_I_Jump/build/three.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>You_Jump_I_Jump/js/controls/FlyControls.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">


        <span class="token keyword">var</span> scene<span class="token punctuation">,</span>camera<span class="token punctuation">,</span>renderer<span class="token punctuation">;</span>
        <span class="token keyword">var</span> geometry<span class="token punctuation">,</span>material<span class="token punctuation">,</span>mesh<span class="token punctuation">;</span>
        <span class="token keyword">var</span> width<span class="token punctuation">,</span>height<span class="token punctuation">;</span>
        <span class="token keyword">var</span> materialtext<span class="token punctuation">;</span>
        <span class="token keyword">var</span> text<span class="token punctuation">;</span>
        <span class="token keyword">var</span> clock<span class="token punctuation">;</span>

        <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">function</span> <span class="token function">setupThreeJS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            scene <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">drawAxis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            camera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PerspectiveCamera</span><span class="token punctuation">(</span> <span class="token number">75</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerWidth <span class="token operator">/</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">80000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>up<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">45</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span>PI <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">;</span>


            renderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>WebGLRenderer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                antialias<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false表示是否开启反锯齿</span>
                alpha<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false 表示是否可以设置背景色透明</span>
                precision<span class="token punctuation">:</span> <span class="token string">'highp'</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// highp/mediump/lowp 表示着色精度选择</span>
                premultipliedAlpha<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false 表示是否可以设置像素深度（用来度量图像的分辨率）</span>
                preserveDrawingBuffer<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false 表示是否保存绘图缓冲</span>
                maxLights<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 最大灯光数</span>
                stencil<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token comment" spellcheck="true">// false/true 表示是否使用模板字体或图案</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            renderer<span class="token punctuation">.</span><span class="token function">setClearColor</span><span class="token punctuation">(</span><span class="token number">0xEEEEEE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            renderer<span class="token punctuation">.</span>shadowMapEnabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//影子1</span>

            renderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span> window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerHeight <span class="token punctuation">)</span><span class="token punctuation">;</span>
            document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span> renderer<span class="token punctuation">.</span>domElement <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">setupWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

            <span class="token keyword">var</span> ambientLight <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>AmbientLight</span><span class="token punctuation">(</span><span class="token number">0xffffff</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// 创建环境光</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>ambientLight<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// 将环境光添加到场景</span>

            <span class="token keyword">var</span> geo<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PlaneGeometry</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> mat<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                color<span class="token punctuation">:</span><span class="token number">0x9db3b5</span><span class="token punctuation">,</span>
                overdraw<span class="token punctuation">:</span><span class="token boolean">true</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> floor<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>geo<span class="token punctuation">,</span>mat<span class="token punctuation">)</span><span class="token punctuation">;</span>
            floor<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>x<span class="token operator">=</span><span class="token operator">-</span><span class="token number">90</span><span class="token operator">*</span>Math<span class="token punctuation">.</span>PI<span class="token operator">/</span><span class="token number">180</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>floor<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">var</span> geometry<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>CubeGeometry</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
            geometry<span class="token punctuation">.</span><span class="token function">applyMatrix</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Matrix4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">makeTranslation</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0.5</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> material<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshDepthMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//new THREE.MeshPhongMaterial({color: 0x00ffff});</span>

            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">300</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">var</span> building<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>geometry<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>material<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                building<span class="token punctuation">.</span>position<span class="token punctuation">.</span>x<span class="token operator">=</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">200</span> <span class="token operator">-</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span>
                building<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">200</span> <span class="token operator">-</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span>
                building<span class="token punctuation">.</span>scale<span class="token punctuation">.</span>x <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">50</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span>
                building<span class="token punctuation">.</span>scale<span class="token punctuation">.</span>y <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> building<span class="token punctuation">.</span>scale<span class="token punctuation">.</span>x <span class="token operator">*</span> <span class="token number">8</span> <span class="token operator">+</span> <span class="token number">8</span><span class="token punctuation">;</span>
                building<span class="token punctuation">.</span>scale<span class="token punctuation">.</span>z <span class="token operator">=</span> building<span class="token punctuation">.</span>scale<span class="token punctuation">.</span>x<span class="token punctuation">;</span>
                scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>building<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment" spellcheck="true">//官方视角控制器</span>

            clock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Clock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            controls <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>FlyControls</span><span class="token punctuation">(</span>camera<span class="token punctuation">,</span>renderer<span class="token punctuation">.</span>domElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>rollSpeed<span class="token operator">=</span>Math<span class="token punctuation">.</span>PI<span class="token operator">/</span><span class="token number">24</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//翻滚速度</span>
            controls<span class="token punctuation">.</span>autoForward<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//自动向前移动  </span>
            controls<span class="token punctuation">.</span>dragToLook<span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>movementSpeed<span class="token operator">=</span><span class="token number">25</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//移动速度</span>


        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            document<span class="token punctuation">.</span>oncontextmenu<span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>

            <span class="token function">setupThreeJS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">setupWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> onWindowResize<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

                controls<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>clock<span class="token punctuation">.</span><span class="token function">getDelta</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                renderer<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          
                renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>scene<span class="token punctuation">,</span> camera <span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>animate<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>




        <span class="token keyword">function</span> <span class="token function">onWindowResize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            width <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>
            height <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>left <span class="token operator">=</span> width <span class="token operator">/</span> <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>right <span class="token operator">=</span> width <span class="token operator">/</span>  <span class="token number">2</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>top <span class="token operator">=</span> height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>bottom <span class="token operator">=</span> height <span class="token operator">/</span>  <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">;</span>

            <span class="token comment" spellcheck="true">//更新相机投影矩阵，在相机任何参数被改变以后必须被调用</span>

            camera<span class="token punctuation">.</span><span class="token function">updateProjectionMatrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            renderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span> width<span class="token punctuation">,</span>height <span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment" spellcheck="true">//如果窗口变动，需要更新控件的操控范围</span>
            <span class="token comment" spellcheck="true">//controls.handleResize();</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">createText</span><span class="token punctuation">(</span> geom <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            geom<span class="token punctuation">.</span><span class="token function">computeBoundingBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> materials <span class="token operator">=</span> <span class="token punctuation">[</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0xffffff</span><span class="token punctuation">,</span> overdraw<span class="token punctuation">:</span> <span class="token number">0.5</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token number">0x000000</span><span class="token punctuation">,</span> overdraw<span class="token punctuation">:</span> <span class="token number">0.5</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span>
            <span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> mesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span> geom<span class="token punctuation">,</span> materials <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> mesh<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">drawAxis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment" spellcheck="true">//显示简易坐标系，其中坐标系的长度为110</span>
            <span class="token keyword">var</span> axisHelper <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>AxisHelper</span><span class="token punctuation">(</span><span class="token number">110</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>axisHelper<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//GridHelper辅助绘制二维网格。</span>
            <span class="token comment" spellcheck="true">//第一个参数是网格大小，（该网格方形边长）</span>
            <span class="token comment" spellcheck="true">//第二个参数是网格个数， (该网格一条边分成多少份)</span>
            <span class="token comment" spellcheck="true">//第一个参数除以第二个参数，得到该网格每一小格的单位长度</span>
            <span class="token comment" spellcheck="true">//后面是网格颜色。xxx.position.set( 80,0,80 )为网格的中心点坐标。</span>
            <span class="token keyword">var</span> gridXZ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>GridHelper</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridXZ<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">50</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">50</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>gridXZ<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> gridXY <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>GridHelper</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridXY<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">50</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridXY<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>x <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>gridXY<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> gridYZ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>GridHelper</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridYZ<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">50</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridYZ<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>z <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>gridYZ<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//添加坐标文字  </span>
            materialtext<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MultiMaterial</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshPhongMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token number">0xffffff</span><span class="token punctuation">,</span> shading<span class="token punctuation">:</span> THREE<span class="token punctuation">.</span>FlatShading <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// front</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshPhongMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token number">0xffffff</span><span class="token punctuation">,</span> shading<span class="token punctuation">:</span> THREE<span class="token punctuation">.</span>SmoothShading <span class="token punctuation">}</span> <span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// side</span>
            <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//引用外部字体库，绘制坐标刻度  </span>
            <span class="token keyword">var</span> loader<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>FontLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            loader<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">'You_Jump_I_Jump/source/fonts/helvetiker_regular.typeface.json'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment" spellcheck="true">//绘制x轴刻度</span>
                <span class="token keyword">var</span> txtMaterX <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token number">0xFF0000</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">100</span><span class="token operator">/</span><span class="token number">10</span><span class="token operator">*</span>i<span class="token punctuation">;</span>
                    <span class="token keyword">var</span> txtGeo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>TextGeometry</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
                        font<span class="token punctuation">:</span> response<span class="token punctuation">,</span>
                        size<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                        height<span class="token punctuation">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span>
                      <span class="token comment" spellcheck="true">//  curveSegments: 12,//弧线分段数，使得文字的曲线更加光滑</span>
                      <span class="token comment" spellcheck="true">//  bevelEnabled: true,//布尔值，是否使用倒角，意为在边缘处斜切</span>
                     <span class="token comment" spellcheck="true">//   bevelThickness: 0.1,//倒角厚度</span>
                      <span class="token comment" spellcheck="true">//  bevelSize: 0.05,//倒角宽度</span>
                     <span class="token comment" spellcheck="true">//   bevelSegments: 3</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
                    <span class="token keyword">var</span> txtMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>txtGeo<span class="token punctuation">,</span>txtMaterX<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    txtMesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>x<span class="token number">-3</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>txtMesh<span class="token punctuation">)</span><span class="token punctuation">;</span>
            　　<span class="token punctuation">}</span>
                <span class="token comment" spellcheck="true">//绘制y轴刻度</span>
                <span class="token keyword">var</span> txtMaterY <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token number">0x00FF00</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">100</span><span class="token operator">/</span><span class="token number">10</span><span class="token operator">*</span>i<span class="token punctuation">;</span>
                    <span class="token keyword">var</span> txtGeo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>TextGeometry</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
                        font<span class="token punctuation">:</span> response<span class="token punctuation">,</span>
                        size<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                        height<span class="token punctuation">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
                    <span class="token keyword">var</span> txtMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>txtGeo<span class="token punctuation">,</span>txtMaterY<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    txtMesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>x<span class="token number">-1.5</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>txtMesh<span class="token punctuation">)</span><span class="token punctuation">;</span>
            　　<span class="token punctuation">}</span>
                 <span class="token comment" spellcheck="true">//绘制z轴刻度</span>
                 <span class="token keyword">var</span> txtMaterZ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token number">0x0000FF</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">100</span><span class="token operator">/</span><span class="token number">10</span><span class="token operator">*</span>i<span class="token punctuation">;</span>
                    <span class="token keyword">var</span> txtGeo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>TextGeometry</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
                        font<span class="token punctuation">:</span> response<span class="token punctuation">,</span>
                        size<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                        height<span class="token punctuation">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
                    <span class="token keyword">var</span> txtMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>txtGeo<span class="token punctuation">,</span>txtMaterZ<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    txtMesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>x<span class="token operator">+</span><span class="token number">2.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    txtMesh<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>y <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
                    scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>txtMesh<span class="token punctuation">)</span><span class="token punctuation">;</span>
            　　<span class="token punctuation">}</span>         　 

            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//绘制坐标轴方向箭头</span>
            <span class="token keyword">var</span> arrX<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>ArrowHelper</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">20</span> <span class="token punctuation">,</span><span class="token number">0xff0000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            arrX<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> arrX <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> arrY<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>ArrowHelper</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">20</span> <span class="token punctuation">,</span><span class="token number">0x00FF00</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            arrY<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> arrY <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> arrZ<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>ArrowHelper</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">20</span> <span class="token punctuation">,</span><span class="token number">0x0000FF</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            arrZ<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> arrZ <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="官方FirstPersonControls控制器"><a href="#官方FirstPersonControls控制器" class="headerlink" title="官方FirstPersonControls控制器"></a>官方FirstPersonControls控制器</h2><table>
<tbody><tr>
<th>操控</th><th>动作</th>
</tr>
<tr>
<td>移动鼠标</td><td>以指针为中心点移动视角</td>
</tr>
<tr>
<td>上下左右方向键（w，a，s，d）</td><td>前后左右移动</td>
</tr>
<tr>
<td>鼠标左键按下</td><td>向前移动</td>
</tr>
<tr>
<td>鼠标右键按下</td><td>向后移动</td>
</tr>
<tr>
<td>R</td><td>向上移动</td>
</tr>
<tr>
<td>F</td><td>向下移动</td>
</tr>
</tbody></table>  

<pre class="line-numbers language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>第一人称控制器<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style language-css"> 
            <span class="token selector">*</span><span class="token punctuation">{</span>
                <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
                <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token selector">body</span><span class="token punctuation">{</span>
                <span class="token property">overflow-x</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
                <span class="token property">overflow-y</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>You_Jump_I_Jump/build/three.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>You_Jump_I_Jump/js/controls/FirstPersonControls.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">


        <span class="token keyword">var</span> scene<span class="token punctuation">,</span>camera<span class="token punctuation">,</span>renderer<span class="token punctuation">;</span>
        <span class="token keyword">var</span> geometry<span class="token punctuation">,</span>material<span class="token punctuation">,</span>mesh<span class="token punctuation">;</span>
        <span class="token keyword">var</span> width<span class="token punctuation">,</span>height<span class="token punctuation">;</span>
        <span class="token keyword">var</span> materialtext<span class="token punctuation">;</span>
        <span class="token keyword">var</span> text<span class="token punctuation">;</span>
        <span class="token keyword">var</span> clock<span class="token punctuation">;</span>

        <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">function</span> <span class="token function">setupThreeJS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            scene <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">drawAxis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            camera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PerspectiveCamera</span><span class="token punctuation">(</span> <span class="token number">75</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerWidth <span class="token operator">/</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">80000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>up<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">45</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span>PI <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">;</span>


            renderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>WebGLRenderer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                antialias<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false表示是否开启反锯齿</span>
                alpha<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false 表示是否可以设置背景色透明</span>
                precision<span class="token punctuation">:</span> <span class="token string">'highp'</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// highp/mediump/lowp 表示着色精度选择</span>
                premultipliedAlpha<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false 表示是否可以设置像素深度（用来度量图像的分辨率）</span>
                preserveDrawingBuffer<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false 表示是否保存绘图缓冲</span>
                maxLights<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 最大灯光数</span>
                stencil<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token comment" spellcheck="true">// false/true 表示是否使用模板字体或图案</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            renderer<span class="token punctuation">.</span><span class="token function">setClearColor</span><span class="token punctuation">(</span><span class="token number">0xEEEEEE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            renderer<span class="token punctuation">.</span>shadowMapEnabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//影子1</span>

            renderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span> window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerHeight <span class="token punctuation">)</span><span class="token punctuation">;</span>
            document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span> renderer<span class="token punctuation">.</span>domElement <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">setupWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

            <span class="token keyword">var</span> ambientLight <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>AmbientLight</span><span class="token punctuation">(</span><span class="token number">0xffffff</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// 创建环境光</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>ambientLight<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// 将环境光添加到场景</span>

            <span class="token keyword">var</span> geo<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PlaneGeometry</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> mat<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                color<span class="token punctuation">:</span><span class="token number">0x9db3b5</span><span class="token punctuation">,</span>
                overdraw<span class="token punctuation">:</span><span class="token boolean">true</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> floor<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>geo<span class="token punctuation">,</span>mat<span class="token punctuation">)</span><span class="token punctuation">;</span>
            floor<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>x<span class="token operator">=</span><span class="token operator">-</span><span class="token number">90</span><span class="token operator">*</span>Math<span class="token punctuation">.</span>PI<span class="token operator">/</span><span class="token number">180</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>floor<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">var</span> geometry<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>CubeGeometry</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
            geometry<span class="token punctuation">.</span><span class="token function">applyMatrix</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Matrix4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">makeTranslation</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0.5</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> material<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshDepthMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//new THREE.MeshPhongMaterial({color: 0x00ffff});</span>

            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">300</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">var</span> building<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>geometry<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>material<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                building<span class="token punctuation">.</span>position<span class="token punctuation">.</span>x<span class="token operator">=</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">200</span> <span class="token operator">-</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span>
                building<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">200</span> <span class="token operator">-</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span>
                building<span class="token punctuation">.</span>scale<span class="token punctuation">.</span>x <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">50</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span>
                building<span class="token punctuation">.</span>scale<span class="token punctuation">.</span>y <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> building<span class="token punctuation">.</span>scale<span class="token punctuation">.</span>x <span class="token operator">*</span> <span class="token number">8</span> <span class="token operator">+</span> <span class="token number">8</span><span class="token punctuation">;</span>
                building<span class="token punctuation">.</span>scale<span class="token punctuation">.</span>z <span class="token operator">=</span> building<span class="token punctuation">.</span>scale<span class="token punctuation">.</span>x<span class="token punctuation">;</span>
                scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>building<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment" spellcheck="true">//官方视角控制器</span>

            clock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Clock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            controls <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>FirstPersonControls</span><span class="token punctuation">(</span>camera<span class="token punctuation">)</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>enabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>lookSpeed <span class="token operator">=</span> <span class="token number">0.1</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//鼠标移动查看的速度</span>
            controls<span class="token punctuation">.</span>movementSpeed <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//相机移动速度</span>
            controls<span class="token punctuation">.</span>noFly <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>constrainVertical <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//约束垂直</span>
            controls<span class="token punctuation">.</span>verticalMin <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>verticalMax <span class="token operator">=</span> <span class="token number">2.0</span><span class="token punctuation">;</span>
            controls<span class="token punctuation">.</span>lon <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//进入初始视角x轴的角度</span>
            controls<span class="token punctuation">.</span>lat <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//初始视角进入后y轴的角度</span>


        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            document<span class="token punctuation">.</span>oncontextmenu<span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>

            <span class="token function">setupThreeJS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">setupWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> onWindowResize<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

                controls<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>clock<span class="token punctuation">.</span><span class="token function">getDelta</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                renderer<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          
                renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>scene<span class="token punctuation">,</span> camera <span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>animate<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>




        <span class="token keyword">function</span> <span class="token function">onWindowResize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            width <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>
            height <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>left <span class="token operator">=</span> width <span class="token operator">/</span> <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>right <span class="token operator">=</span> width <span class="token operator">/</span>  <span class="token number">2</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>top <span class="token operator">=</span> height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>bottom <span class="token operator">=</span> height <span class="token operator">/</span>  <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">;</span>

            <span class="token comment" spellcheck="true">//更新相机投影矩阵，在相机任何参数被改变以后必须被调用</span>

            camera<span class="token punctuation">.</span><span class="token function">updateProjectionMatrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            renderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span> width<span class="token punctuation">,</span>height <span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment" spellcheck="true">//如果窗口变动，需要更新控件的操控范围</span>
            <span class="token comment" spellcheck="true">//controls.handleResize();</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">createText</span><span class="token punctuation">(</span> geom <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            geom<span class="token punctuation">.</span><span class="token function">computeBoundingBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> materials <span class="token operator">=</span> <span class="token punctuation">[</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0xffffff</span><span class="token punctuation">,</span> overdraw<span class="token punctuation">:</span> <span class="token number">0.5</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token number">0x000000</span><span class="token punctuation">,</span> overdraw<span class="token punctuation">:</span> <span class="token number">0.5</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span>
            <span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> mesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span> geom<span class="token punctuation">,</span> materials <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> mesh<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">drawAxis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment" spellcheck="true">//显示简易坐标系，其中坐标系的长度为110</span>
            <span class="token keyword">var</span> axisHelper <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>AxisHelper</span><span class="token punctuation">(</span><span class="token number">110</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>axisHelper<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//GridHelper辅助绘制二维网格。</span>
            <span class="token comment" spellcheck="true">//第一个参数是网格大小，（该网格方形边长）</span>
            <span class="token comment" spellcheck="true">//第二个参数是网格个数， (该网格一条边分成多少份)</span>
            <span class="token comment" spellcheck="true">//第一个参数除以第二个参数，得到该网格每一小格的单位长度</span>
            <span class="token comment" spellcheck="true">//后面是网格颜色。xxx.position.set( 80,0,80 )为网格的中心点坐标。</span>
            <span class="token keyword">var</span> gridXZ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>GridHelper</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridXZ<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">50</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">50</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>gridXZ<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> gridXY <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>GridHelper</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridXY<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">50</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridXY<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>x <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>gridXY<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> gridYZ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>GridHelper</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridYZ<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">50</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridYZ<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>z <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>gridYZ<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//添加坐标文字  </span>
            materialtext<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MultiMaterial</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshPhongMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token number">0xffffff</span><span class="token punctuation">,</span> shading<span class="token punctuation">:</span> THREE<span class="token punctuation">.</span>FlatShading <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// front</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshPhongMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token number">0xffffff</span><span class="token punctuation">,</span> shading<span class="token punctuation">:</span> THREE<span class="token punctuation">.</span>SmoothShading <span class="token punctuation">}</span> <span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// side</span>
            <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//引用外部字体库，绘制坐标刻度  </span>
            <span class="token keyword">var</span> loader<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>FontLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            loader<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">'You_Jump_I_Jump/source/fonts/helvetiker_regular.typeface.json'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment" spellcheck="true">//绘制x轴刻度</span>
                <span class="token keyword">var</span> txtMaterX <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token number">0xFF0000</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">100</span><span class="token operator">/</span><span class="token number">10</span><span class="token operator">*</span>i<span class="token punctuation">;</span>
                    <span class="token keyword">var</span> txtGeo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>TextGeometry</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
                        font<span class="token punctuation">:</span> response<span class="token punctuation">,</span>
                        size<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                        height<span class="token punctuation">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span>
                      <span class="token comment" spellcheck="true">//  curveSegments: 12,//弧线分段数，使得文字的曲线更加光滑</span>
                      <span class="token comment" spellcheck="true">//  bevelEnabled: true,//布尔值，是否使用倒角，意为在边缘处斜切</span>
                     <span class="token comment" spellcheck="true">//   bevelThickness: 0.1,//倒角厚度</span>
                      <span class="token comment" spellcheck="true">//  bevelSize: 0.05,//倒角宽度</span>
                     <span class="token comment" spellcheck="true">//   bevelSegments: 3</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
                    <span class="token keyword">var</span> txtMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>txtGeo<span class="token punctuation">,</span>txtMaterX<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    txtMesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>x<span class="token number">-3</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>txtMesh<span class="token punctuation">)</span><span class="token punctuation">;</span>
            　　<span class="token punctuation">}</span>
                <span class="token comment" spellcheck="true">//绘制y轴刻度</span>
                <span class="token keyword">var</span> txtMaterY <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token number">0x00FF00</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">100</span><span class="token operator">/</span><span class="token number">10</span><span class="token operator">*</span>i<span class="token punctuation">;</span>
                    <span class="token keyword">var</span> txtGeo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>TextGeometry</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
                        font<span class="token punctuation">:</span> response<span class="token punctuation">,</span>
                        size<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                        height<span class="token punctuation">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
                    <span class="token keyword">var</span> txtMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>txtGeo<span class="token punctuation">,</span>txtMaterY<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    txtMesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>x<span class="token number">-1.5</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>txtMesh<span class="token punctuation">)</span><span class="token punctuation">;</span>
            　　<span class="token punctuation">}</span>
                 <span class="token comment" spellcheck="true">//绘制z轴刻度</span>
                 <span class="token keyword">var</span> txtMaterZ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token number">0x0000FF</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">100</span><span class="token operator">/</span><span class="token number">10</span><span class="token operator">*</span>i<span class="token punctuation">;</span>
                    <span class="token keyword">var</span> txtGeo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>TextGeometry</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
                        font<span class="token punctuation">:</span> response<span class="token punctuation">,</span>
                        size<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                        height<span class="token punctuation">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
                    <span class="token keyword">var</span> txtMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>txtGeo<span class="token punctuation">,</span>txtMaterZ<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    txtMesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>x<span class="token operator">+</span><span class="token number">2.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    txtMesh<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>y <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
                    scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>txtMesh<span class="token punctuation">)</span><span class="token punctuation">;</span>
            　　<span class="token punctuation">}</span>         　 

            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//绘制坐标轴方向箭头</span>
            <span class="token keyword">var</span> arrX<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>ArrowHelper</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">20</span> <span class="token punctuation">,</span><span class="token number">0xff0000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            arrX<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> arrX <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> arrY<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>ArrowHelper</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">20</span> <span class="token punctuation">,</span><span class="token number">0x00FF00</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            arrY<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> arrY <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> arrZ<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>ArrowHelper</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">20</span> <span class="token punctuation">,</span><span class="token number">0x0000FF</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            arrZ<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> arrZ <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="可视化变换对象-轻量级场景编辑器雏形"><a href="#可视化变换对象-轻量级场景编辑器雏形" class="headerlink" title="可视化变换对象(轻量级场景编辑器雏形)"></a>可视化变换对象(轻量级场景编辑器雏形)</h2><pre class="line-numbers language-html"><code class="language-html"> TransformControls Method:
    dispose() //解绑所有事件  
    attach()  
    detach()  
    setMode(mode) //设置场景编辑模式  
        - mode[scale/rotate/translate][string]  
    setTranslationSnap()  
    setRotationSnap()  
    setSize()  
    setSpace()  
    update()  
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://cdn.jsdelivr.net/gh/shw2018/cdn@1.0/sakura/img/loader/orange.progress-bar-stripe-loader.svg" data-original="../../../../images/vlcsnap-2021-08-22-01h16m30s287.png" alt="">  </p>
<pre class="line-numbers language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>轻量级场景编辑器雏形<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style language-css"> 
            <span class="token selector">*</span><span class="token punctuation">{</span>
                <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
                <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token selector">body</span><span class="token punctuation">{</span>
                <span class="token property">overflow-x</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
                <span class="token property">overflow-y</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>


    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style language-css">
        <span class="token selector"><span class="token id">#low_right</span>
        </span><span class="token punctuation">{</span>
            <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
            <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">370</span>px<span class="token punctuation">;</span>
            <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">130</span>px<span class="token punctuation">;</span>
            <span class="token property">background</span><span class="token punctuation">:</span> <span class="token hexcode">#eee</span><span class="token punctuation">;</span>
            <span class="token property">bottom</span><span class="token punctuation">:</span> <span class="token number">10</span>px<span class="token punctuation">;</span>
            <span class="token property">right</span><span class="token punctuation">:</span> <span class="token number">10</span>px<span class="token punctuation">;</span>
            <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token hexcode">#DCFCE9</span><span class="token punctuation">;</span>
            <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">8</span>px double <span class="token hexcode">#06F867</span><span class="token punctuation">;</span>
            <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
            <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">0</span>px<span class="token punctuation">;</span>
            <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span>px<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token selector"><span class="token id">#low_right</span> table</span><span class="token punctuation">{</span>
            <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">250</span>px<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token selector"><span class="token id">#low_right</span> td</span><span class="token punctuation">{</span>
            <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">60</span>px<span class="token punctuation">;</span>
            <span class="token property">margin-left</span><span class="token punctuation">:</span> <span class="token number">20</span>px<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>You_Jump_I_Jump/build/three.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>You_Jump_I_Jump/js/controls/OrbitControls.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>You_Jump_I_Jump/js/controls/DragControls.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>You_Jump_I_Jump/js/controls/TransformControls.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span> 

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">


        <span class="token keyword">var</span> scene<span class="token punctuation">,</span>camera<span class="token punctuation">,</span>renderer<span class="token punctuation">;</span>
        <span class="token keyword">var</span> geometry<span class="token punctuation">,</span>material<span class="token punctuation">,</span>mesh<span class="token punctuation">,</span>mesh2<span class="token punctuation">;</span>
        <span class="token keyword">var</span> width<span class="token punctuation">,</span>height<span class="token punctuation">;</span>
        <span class="token keyword">var</span> materialtext<span class="token punctuation">;</span>
        <span class="token keyword">var</span> text<span class="token punctuation">;</span>
        <span class="token keyword">var</span> clock<span class="token punctuation">;</span>
        <span class="token keyword">var</span> transformControls<span class="token punctuation">;</span>
        <span class="token keyword">var</span> nowSelectObj<span class="token punctuation">;</span>
        <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">function</span> <span class="token function">setupThreeJS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            scene <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">drawAxis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            camera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PerspectiveCamera</span><span class="token punctuation">(</span> <span class="token number">75</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerWidth <span class="token operator">/</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
            camera<span class="token punctuation">.</span>up<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
            camera<span class="token punctuation">.</span><span class="token function">lookAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>



            renderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>WebGLRenderer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                antialias<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false表示是否开启反锯齿</span>
                alpha<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false 表示是否可以设置背景色透明</span>
                precision<span class="token punctuation">:</span> <span class="token string">'highp'</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// highp/mediump/lowp 表示着色精度选择</span>
                premultipliedAlpha<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false 表示是否可以设置像素深度（用来度量图像的分辨率）</span>
                preserveDrawingBuffer<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// true/false 表示是否保存绘图缓冲</span>
                maxLights<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 最大灯光数</span>
                stencil<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token comment" spellcheck="true">// false/true 表示是否使用模板字体或图案</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            renderer<span class="token punctuation">.</span><span class="token function">setClearColor</span><span class="token punctuation">(</span><span class="token number">0xEEEEEE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            renderer<span class="token punctuation">.</span>shadowMapEnabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//影子1</span>

            renderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span> window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerHeight <span class="token punctuation">)</span><span class="token punctuation">;</span>
            document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span> renderer<span class="token punctuation">.</span>domElement <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">setupWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>


            <span class="token keyword">var</span> amlight <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>AmbientLight</span><span class="token punctuation">(</span><span class="token number">0x003300</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>amlight<span class="token punctuation">)</span><span class="token punctuation">;</span> 
            <span class="token keyword">var</span> splight <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>SpotLight</span><span class="token punctuation">(</span><span class="token number">0xffffff</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
            splight<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>splight<span class="token punctuation">)</span><span class="token punctuation">;</span> 
            splight<span class="token punctuation">.</span>castShadow <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> 
            splight<span class="token punctuation">.</span>shadowMapHeight<span class="token operator">=</span><span class="token number">2048</span><span class="token punctuation">;</span> 
            splight<span class="token punctuation">.</span>shadowMapWidth<span class="token operator">=</span><span class="token number">2048</span><span class="token punctuation">;</span> 
            <span class="token keyword">var</span> geometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>CubeGeometry</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
            <span class="token keyword">var</span> material <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshLambertMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token number">0xff0000</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
            mesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>geometry<span class="token punctuation">,</span>material<span class="token punctuation">)</span><span class="token punctuation">;</span> 
            mesh<span class="token punctuation">.</span>castShadow <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> 
            mesh<span class="token punctuation">.</span>name<span class="token operator">=</span><span class="token string">"mesh1"</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>mesh<span class="token punctuation">)</span><span class="token punctuation">;</span> 
            mesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
            mesh2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>geometry<span class="token punctuation">,</span>material<span class="token punctuation">)</span><span class="token punctuation">;</span> 
            mesh2<span class="token punctuation">.</span>castShadow <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            mesh2<span class="token punctuation">.</span>name<span class="token operator">=</span><span class="token string">"mesh2"</span><span class="token punctuation">;</span> 
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>mesh2<span class="token punctuation">)</span><span class="token punctuation">;</span> 
            mesh2<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0.5</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
            <span class="token comment" spellcheck="true">//添加平面, 接受阴影 </span>
            <span class="token keyword">var</span> planeGeometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PlaneGeometry</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
            <span class="token keyword">var</span> planeMaterial <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshLambertMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span><span class="token number">0xFFFFFF</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
            <span class="token keyword">var</span> plane <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>planeGeometry<span class="token punctuation">,</span>planeMaterial<span class="token punctuation">)</span><span class="token punctuation">;</span> 
            plane<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">0.5</span><span class="token operator">*</span>Math<span class="token punctuation">.</span>PI<span class="token punctuation">;</span> 
            plane<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">;</span> 
            plane<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> 
            plane<span class="token punctuation">.</span>name<span class="token operator">=</span><span class="token string">"dimian"</span><span class="token punctuation">;</span>
           <span class="token comment" spellcheck="true">// scene.add(plane); </span>
            plane<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">0.1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
            plane<span class="token punctuation">.</span>receiveShadow <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> 




            <span class="token comment" spellcheck="true">//官方视角控制器 </span>

            controls <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>OrbitControls</span><span class="token punctuation">(</span> camera<span class="token punctuation">,</span> renderer<span class="token punctuation">.</span>domElement <span class="token punctuation">)</span><span class="token punctuation">;</span> 
            controls<span class="token punctuation">.</span>enableDamping <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> 
            controls<span class="token punctuation">.</span>dampingFactor <span class="token operator">=</span> <span class="token number">0.25</span><span class="token punctuation">;</span> 
            controls<span class="token punctuation">.</span>screenSpacePanning <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> 
            controls<span class="token punctuation">.</span>minDistance <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> 
            controls<span class="token punctuation">.</span>maxDistance <span class="token operator">=</span> <span class="token number">1500</span><span class="token punctuation">;</span> 
            controls<span class="token punctuation">.</span>maxPolarAngle <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span> 
            controls<span class="token punctuation">.</span>rotateSpeed<span class="token operator">=</span><span class="token number">0.1</span><span class="token punctuation">;</span> 
            controls<span class="token punctuation">.</span>keyPanSpeed<span class="token operator">=</span><span class="token number">0.01</span><span class="token punctuation">;</span> 
            controls<span class="token punctuation">.</span>minPolarAngle <span class="token operator">=</span> <span class="token operator">-</span>Math<span class="token punctuation">.</span>PI<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// radians </span>
            controls<span class="token punctuation">.</span>maxPolarAngle <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// radians</span>


            <span class="token function">initDragControls</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            document<span class="token punctuation">.</span>oncontextmenu<span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>

            <span class="token function">setupThreeJS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">setupWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> onWindowResize<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'keydown'</span><span class="token punctuation">,</span>threejsKeyPressed<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousedown'</span><span class="token punctuation">,</span>getIntersects<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseup'</span><span class="token punctuation">,</span>getIntersectsMouseUp<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>



                renderer<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          
                renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>scene<span class="token punctuation">,</span> camera <span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>animate<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">getIntersectsMouseUp</span><span class="token punctuation">(</span>evt<span class="token punctuation">)</span><span class="token punctuation">{</span>
            controls<span class="token punctuation">.</span>enabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">getIntersects</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">{</span>
            event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> raycaster<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Raycaster</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> mouse<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//通过鼠标点击位置，计算出raycaster所需点的位置，以屏幕为中心点，范围-1到1</span>
            mouse<span class="token punctuation">.</span>x<span class="token operator">=</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>clientX<span class="token operator">/</span>window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">2</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
            mouse<span class="token punctuation">.</span>y<span class="token operator">=</span><span class="token operator">-</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>clientY<span class="token operator">/</span>window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">2</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//通过鼠标点的位置和当前相机矩阵计算出射线位置  </span>
            raycaster<span class="token punctuation">.</span><span class="token function">setFromCamera</span><span class="token punctuation">(</span>mouse<span class="token punctuation">,</span>camera<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//获取与射线相交的对象数组，按距离排序，越近的越靠前</span>
            <span class="token keyword">var</span> intersects<span class="token operator">=</span>raycaster<span class="token punctuation">.</span><span class="token function">intersectObjects</span><span class="token punctuation">(</span>scene<span class="token punctuation">.</span>children<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>intersects<span class="token punctuation">.</span>length<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token function">doSomethingSelectObj</span><span class="token punctuation">(</span>intersects<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>object<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

        <span class="token punctuation">}</span>
        <span class="token keyword">function</span> <span class="token function">doSomethingSelectObj</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment" spellcheck="true">//console.log("现在选择物体："+obj.name);</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>transformControls<span class="token operator">==</span><span class="token keyword">null</span><span class="token operator">||</span><span class="token operator">!</span>controls<span class="token punctuation">.</span>enabled<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>type<span class="token operator">==</span><span class="token string">"Mesh"</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                transformControls<span class="token punctuation">.</span><span class="token function">detach</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                nowSelectObj<span class="token operator">=</span>obj<span class="token punctuation">;</span>
                transformControls<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span>nowSelectObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>





        <span class="token punctuation">}</span>
        <span class="token keyword">function</span> <span class="token function">threejsKeyPressed</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">var</span> key<span class="token operator">=</span>event<span class="token punctuation">.</span>keyCode<span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">switch</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">case</span> <span class="token number">27</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>ESC键
                    <span class="token keyword">if</span><span class="token punctuation">(</span>transformControls<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                        transformControls<span class="token punctuation">.</span><span class="token function">detach</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        nowSelectObj<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token keyword">case</span> <span class="token number">87</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>W键
                    <span class="token keyword">if</span><span class="token punctuation">(</span>transformControls<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                        transformControls<span class="token punctuation">.</span><span class="token function">setMode</span><span class="token punctuation">(</span><span class="token string">'translate'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>                    
                <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token keyword">case</span> <span class="token number">69</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>E键
                    <span class="token keyword">if</span><span class="token punctuation">(</span>transformControls<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                        transformControls<span class="token punctuation">.</span><span class="token function">setMode</span><span class="token punctuation">(</span><span class="token string">'rotate'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>  
                <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token keyword">case</span> <span class="token number">82</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>R键
                    <span class="token keyword">if</span><span class="token punctuation">(</span>transformControls<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                        transformControls<span class="token punctuation">.</span><span class="token function">setMode</span><span class="token punctuation">(</span><span class="token string">'scale'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>  
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">initDragControls</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

            <span class="token comment" spellcheck="true">// 添加平移控件</span>
            transformControls <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>TransformControls</span><span class="token punctuation">(</span>camera<span class="token punctuation">,</span> renderer<span class="token punctuation">.</span>domElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>transformControls<span class="token punctuation">)</span><span class="token punctuation">;</span>

            transformControls<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"mouseDown"</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>evt<span class="token punctuation">)</span><span class="token punctuation">{</span>
                controls<span class="token punctuation">.</span>enabled <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            transformControls<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"mouseUp"</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>evt<span class="token punctuation">)</span><span class="token punctuation">{</span>
                controls<span class="token punctuation">.</span>enabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            transformControls<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"change"</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>evt<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>nowSelectObj<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">return</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                data<span class="token punctuation">[</span><span class="token string">'posX'</span><span class="token punctuation">]</span><span class="token operator">=</span>nowSelectObj<span class="token punctuation">.</span>position<span class="token punctuation">.</span>x<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                data<span class="token punctuation">[</span><span class="token string">'posY'</span><span class="token punctuation">]</span><span class="token operator">=</span>nowSelectObj<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                data<span class="token punctuation">[</span><span class="token string">'posZ'</span><span class="token punctuation">]</span><span class="token operator">=</span>nowSelectObj<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                data<span class="token punctuation">[</span><span class="token string">'rotX'</span><span class="token punctuation">]</span><span class="token operator">=</span>THREE<span class="token punctuation">.</span>Math<span class="token punctuation">.</span><span class="token function">radToDeg</span><span class="token punctuation">(</span>nowSelectObj<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                data<span class="token punctuation">[</span><span class="token string">'rotY'</span><span class="token punctuation">]</span><span class="token operator">=</span>THREE<span class="token punctuation">.</span>Math<span class="token punctuation">.</span><span class="token function">radToDeg</span><span class="token punctuation">(</span>nowSelectObj<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                data<span class="token punctuation">[</span><span class="token string">'rotZ'</span><span class="token punctuation">]</span><span class="token operator">=</span>THREE<span class="token punctuation">.</span>Math<span class="token punctuation">.</span><span class="token function">radToDeg</span><span class="token punctuation">(</span>nowSelectObj<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                data<span class="token punctuation">[</span><span class="token string">'scaleX'</span><span class="token punctuation">]</span><span class="token operator">=</span>nowSelectObj<span class="token punctuation">.</span>scale<span class="token punctuation">.</span>x<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                data<span class="token punctuation">[</span><span class="token string">'scaleY'</span><span class="token punctuation">]</span><span class="token operator">=</span>nowSelectObj<span class="token punctuation">.</span>scale<span class="token punctuation">.</span>y<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                data<span class="token punctuation">[</span><span class="token string">'scaleZ'</span><span class="token punctuation">]</span><span class="token operator">=</span>nowSelectObj<span class="token punctuation">.</span>scale<span class="token punctuation">.</span>z<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                data<span class="token punctuation">[</span><span class="token string">'nowSelectedMeshName'</span><span class="token punctuation">]</span><span class="token operator">=</span>nowSelectObj<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
                <span class="token function">scan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment" spellcheck="true">//console.log("Position: "+nowSelectObj.position.x.toFixed(9)+"  "+nowSelectObj.position.y.toFixed(9)+"  "+nowSelectObj.position.z.toFixed(9)+"  ");</span>
                <span class="token comment" spellcheck="true">//console.log("Rotation: "+THREE.Math.radToDeg(nowSelectObj.rotation.x).toFixed(9)+" "+THREE.Math.radToDeg(nowSelectObj.rotation.y).toFixed(9)+" "+THREE.Math.radToDeg(nowSelectObj.rotation.z).toFixed(9)+" " );</span>
                <span class="token comment" spellcheck="true">//console.log("Scale: "+nowSelectObj.scale.x.toFixed(9)+"  "+nowSelectObj.scale.y.toFixed(9)+"  "+nowSelectObj.scale.z.toFixed(9)+"  ");</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>




            <span class="token comment" spellcheck="true">/*
            // 过滤不是 Mesh 的物体,例如辅助网格对象
            var objects = [];
            for (let i = 0; i &lt; scene.children.length; i++) {
                if (scene.children[i].isMesh) {
                    if(scene.children[i].name!="dimian"){
                        objects.push(scene.children[i]);
                    }

                }
            }
            // 初始化拖拽控件 (拖拽是随意拖拽，试过其实不好控制)
            var dragControls = new THREE.DragControls(objects, camera, renderer.domElement);
            // 鼠标略过事件
            dragControls.addEventListener('hoveron', function (event) {
                // 让变换控件对象和选中的对象绑定
                //transformControls.attach(event.object);
                //transformControls.setMode("scale");
            });
            // 开始拖拽
            dragControls.addEventListener('dragstart', function (event) {
                controls.enabled = false;
                console.log("dragstart");
            });
            // 拖拽结束
            dragControls.addEventListener('dragend', function (event) {
                controls.enabled = true;
                console.log("dragend");
            });
            */</span> 

        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">onWindowResize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            width <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientWidth<span class="token punctuation">;</span>
            height <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>left <span class="token operator">=</span> width <span class="token operator">/</span> <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>right <span class="token operator">=</span> width <span class="token operator">/</span>  <span class="token number">2</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>top <span class="token operator">=</span> height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
            camera<span class="token punctuation">.</span>bottom <span class="token operator">=</span> height <span class="token operator">/</span>  <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">;</span>

            <span class="token comment" spellcheck="true">//更新相机投影矩阵，在相机任何参数被改变以后必须被调用</span>

            camera<span class="token punctuation">.</span><span class="token function">updateProjectionMatrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            renderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span> width<span class="token punctuation">,</span>height <span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment" spellcheck="true">//如果窗口变动，需要更新控件的操控范围</span>
            <span class="token comment" spellcheck="true">//controls.handleResize();</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">createText</span><span class="token punctuation">(</span> geom <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            geom<span class="token punctuation">.</span><span class="token function">computeBoundingBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> materials <span class="token operator">=</span> <span class="token punctuation">[</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0xffffff</span><span class="token punctuation">,</span> overdraw<span class="token punctuation">:</span> <span class="token number">0.5</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token number">0x000000</span><span class="token punctuation">,</span> overdraw<span class="token punctuation">:</span> <span class="token number">0.5</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span>
            <span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> mesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span> geom<span class="token punctuation">,</span> materials <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> mesh<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token function">drawAxis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment" spellcheck="true">//显示简易坐标系，其中坐标系的长度为110</span>
            <span class="token keyword">var</span> axisHelper <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>AxisHelper</span><span class="token punctuation">(</span><span class="token number">110</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>axisHelper<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//GridHelper辅助绘制二维网格。</span>
            <span class="token comment" spellcheck="true">//第一个参数是网格大小，（该网格方形边长）</span>
            <span class="token comment" spellcheck="true">//第二个参数是网格个数， (该网格一条边分成多少份)</span>
            <span class="token comment" spellcheck="true">//第一个参数除以第二个参数，得到该网格每一小格的单位长度</span>
            <span class="token comment" spellcheck="true">//后面是网格颜色。xxx.position.set( 80,0,80 )为网格的中心点坐标。</span>
            <span class="token keyword">var</span> gridXZ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>GridHelper</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridXZ<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">50</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">50</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>gridXZ<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> gridXY <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>GridHelper</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridXY<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">50</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridXY<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>x <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>gridXY<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> gridYZ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>GridHelper</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">,</span> <span class="token number">0xEED5B7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridYZ<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">50</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            gridYZ<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>z <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>gridYZ<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//添加坐标文字  </span>
            materialtext<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MultiMaterial</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshPhongMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token number">0xffffff</span><span class="token punctuation">,</span> shading<span class="token punctuation">:</span> THREE<span class="token punctuation">.</span>FlatShading <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// front</span>
                <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshPhongMaterial</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token number">0xffffff</span><span class="token punctuation">,</span> shading<span class="token punctuation">:</span> THREE<span class="token punctuation">.</span>SmoothShading <span class="token punctuation">}</span> <span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// side</span>
            <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//引用外部字体库，绘制坐标刻度  </span>
            <span class="token keyword">var</span> loader<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>FontLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            loader<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">'You_Jump_I_Jump/source/fonts/helvetiker_regular.typeface.json'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment" spellcheck="true">//绘制x轴刻度</span>
                <span class="token keyword">var</span> txtMaterX <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token number">0xFF0000</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">100</span><span class="token operator">/</span><span class="token number">10</span><span class="token operator">*</span>i<span class="token punctuation">;</span>
                    <span class="token keyword">var</span> txtGeo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>TextGeometry</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
                        font<span class="token punctuation">:</span> response<span class="token punctuation">,</span>
                        size<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                        height<span class="token punctuation">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span>
                      <span class="token comment" spellcheck="true">//  curveSegments: 12,//弧线分段数，使得文字的曲线更加光滑</span>
                      <span class="token comment" spellcheck="true">//  bevelEnabled: true,//布尔值，是否使用倒角，意为在边缘处斜切</span>
                     <span class="token comment" spellcheck="true">//   bevelThickness: 0.1,//倒角厚度</span>
                      <span class="token comment" spellcheck="true">//  bevelSize: 0.05,//倒角宽度</span>
                     <span class="token comment" spellcheck="true">//   bevelSegments: 3</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
                    <span class="token keyword">var</span> txtMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>txtGeo<span class="token punctuation">,</span>txtMaterX<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    txtMesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>x<span class="token number">-3</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>txtMesh<span class="token punctuation">)</span><span class="token punctuation">;</span>
            　　<span class="token punctuation">}</span>
                <span class="token comment" spellcheck="true">//绘制y轴刻度</span>
                <span class="token keyword">var</span> txtMaterY <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token number">0x00FF00</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">100</span><span class="token operator">/</span><span class="token number">10</span><span class="token operator">*</span>i<span class="token punctuation">;</span>
                    <span class="token keyword">var</span> txtGeo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>TextGeometry</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
                        font<span class="token punctuation">:</span> response<span class="token punctuation">,</span>
                        size<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                        height<span class="token punctuation">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
                    <span class="token keyword">var</span> txtMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>txtGeo<span class="token punctuation">,</span>txtMaterY<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    txtMesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>x<span class="token number">-1.5</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>txtMesh<span class="token punctuation">)</span><span class="token punctuation">;</span>
            　　<span class="token punctuation">}</span>
                 <span class="token comment" spellcheck="true">//绘制z轴刻度</span>
                 <span class="token keyword">var</span> txtMaterZ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token number">0x0000FF</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">100</span><span class="token operator">/</span><span class="token number">10</span><span class="token operator">*</span>i<span class="token punctuation">;</span>
                    <span class="token keyword">var</span> txtGeo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>TextGeometry</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
                        font<span class="token punctuation">:</span> response<span class="token punctuation">,</span>
                        size<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                        height<span class="token punctuation">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
                    <span class="token keyword">var</span> txtMesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>txtGeo<span class="token punctuation">,</span>txtMaterZ<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    txtMesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>x<span class="token operator">+</span><span class="token number">2.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    txtMesh<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>y <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
                    scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>txtMesh<span class="token punctuation">)</span><span class="token punctuation">;</span>
            　　<span class="token punctuation">}</span>         　 

            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//绘制坐标轴方向箭头</span>
            <span class="token keyword">var</span> arrX<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>ArrowHelper</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">20</span> <span class="token punctuation">,</span><span class="token number">0xff0000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            arrX<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> arrX <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> arrY<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>ArrowHelper</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">20</span> <span class="token punctuation">,</span><span class="token number">0x00FF00</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            arrY<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> arrY <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> arrZ<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>ArrowHelper</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">20</span> <span class="token punctuation">,</span><span class="token number">0x0000FF</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            arrZ<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> arrZ <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>





    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>low_right<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span><span class="token punctuation">></span></span> 
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>NowSelected:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">q-text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>nowSelectedMeshName<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>nowSelectedMeshName<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>Position:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">q-text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>posX<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>posX<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">q-text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>posY<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>posY<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">q-text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>posZ<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>posZ<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>Rotation:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">q-text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>rotX<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>rotX<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">q-text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>rotY<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>rotY<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">q-text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>rotZ<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>rotZ<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span>Scale:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">q-text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>scaleX<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>scaleX<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">q-text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>scaleY<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>scaleY<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">q-text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>scaleZ<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>scaleZ<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">></span></span>


    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>添加内置模型..<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>第三方模型导入..<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>场景导入..<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>场景导出..<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>


<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">
     <span class="token keyword">var</span> elems <span class="token operator">=</span> <span class="token punctuation">[</span>
         document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'posX'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'posY'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'posZ'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
         document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'rotX'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'rotY'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'rotZ'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
         document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'scaleX'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'scaleY'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'scaleZ'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    
         document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'nowSelectedMeshName'</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> data<span class="token operator">=</span><span class="token punctuation">{</span>
            posX<span class="token punctuation">:</span><span class="token string">'1'</span><span class="token punctuation">,</span>
            posY<span class="token punctuation">:</span><span class="token string">'2'</span><span class="token punctuation">,</span>
            posZ<span class="token punctuation">:</span><span class="token string">'3'</span><span class="token punctuation">,</span>
            rotX<span class="token punctuation">:</span><span class="token string">'1'</span><span class="token punctuation">,</span>
            rotY<span class="token punctuation">:</span><span class="token string">'2'</span><span class="token punctuation">,</span>
            rotZ<span class="token punctuation">:</span><span class="token string">'3'</span><span class="token punctuation">,</span>
            scaleX<span class="token punctuation">:</span><span class="token string">'1'</span><span class="token punctuation">,</span>
            scaleY<span class="token punctuation">:</span><span class="token string">'2'</span><span class="token punctuation">,</span>
            scaleZ<span class="token punctuation">:</span><span class="token string">'3'</span><span class="token punctuation">,</span>
            nowSelectedMeshName<span class="token punctuation">:</span><span class="token string">''</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token keyword">var</span> command <span class="token operator">=</span> <span class="token punctuation">{</span>
            text<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> str<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>

        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> scan <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 

            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> elems<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">var</span> elem <span class="token operator">=</span> elems<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
                elem<span class="token punctuation">.</span>command <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len1 <span class="token operator">=</span> elem<span class="token punctuation">.</span>attributes<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j <span class="token operator">&lt;</span> len1<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">var</span> attr <span class="token operator">=</span> elem<span class="token punctuation">.</span>attributes<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
                    <span class="token keyword">if</span><span class="token punctuation">(</span>attr<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'q-'</span><span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                        command<span class="token punctuation">[</span>attr<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> data<span class="token punctuation">[</span>attr<span class="token punctuation">.</span>nodeValue<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        elem<span class="token punctuation">.</span>command<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>attr<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="点击获取模型"><a href="#点击获取模型" class="headerlink" title="点击获取模型"></a>点击获取模型</h2><pre class="line-numbers language-html"><code class="language-html">window.addEventListener('click',getIntersects,false);

function getIntersects(event){
    event.preventDefault();
    var raycaster=new THREE.Raycaster();
    var mouse=new THREE.Vector2();
    //通过鼠标点击位置，计算出raycaster所需点的位置，以屏幕为中心点，范围-1到1
    mouse.x=(event.clientX/window.innerWidth)*2-1;
    mouse.y=-(event.clientY/window.innerHeight)*2+1;
    //通过鼠标点的位置和当前相机矩阵计算出射线位置  
    raycaster.setFromCamera(mouse,camera);
    //获取与射线相交的对象数组，按距离排序，越近的越靠前
    var intersects=raycaster.intersectObjects(scene.children);

    doSomethingSelectObj(intersects[0].object);
}

function doSomethingSelectObj(obj){
    console.log(obj.name);
}
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
            </div>
            <hr/>

            

            <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">

<div id="article-share">
    
    <div class="social-share" data-disabled="qzone" data-wechat-qrcode-helper="<p>微信里点“发现”->“扫一扫”二维码便可查看分享。</p>"></div>
    
</div>

<script src="/libs/share/js/social-share.min.js"></script>

            
            
            
            <div class="reprint1">
                <p>
                    <span class="reprint1-tip">
                        <i class="fa fa-exclamation-circle"></i>&nbsp;&nbsp;转载请注明:
                    </span>
                    <a href="http://127.0.0.1/diary" class="b-link-green">车舟慢</a>
                    <i class="fa fa-angle-right fa-lg fa-fw text-color"></i>
                    <a href="/diary/2021/08/10/diary-20210809-2/" class="b-link-green">ThreeJS入门</a>
                </p>
            </div>

        </div>
    </div>

    

    

    

    

    
        <style>
    .valine-card {
        margin: 1.5rem auto;
    }

    .valine-card .card-content {
        padding: 20px 20px 5px 20px;
    }
	
	/*zs shuai*/
	#vcomments{
		display:none;
	}
	
    /* valine 评论框增加背景图片 */
    #vcomments textarea {
        box-sizing: border-box;
        background: url("") 100% 100% no-repeat;
    }

    #vcomments input[type=text],
    #vcomments input[type=email],
    #vcomments input[type=url],
    #vcomments textarea {
        box-sizing: border-box;
    }

    #vcomments p {
        margin: 2px 2px 10px;
        font-size: 1.05rem;
        line-height: 1.78rem;
    }

    #vcomments blockquote p {
        text-indent: 0.2rem;
    }

    #vcomments a {
        padding: 0 2px;
        color: #42b983;
        font-weight: 500;
        text-decoration: underline;
    }

    #vcomments img {
        max-width: 100%;
        height: auto;
        cursor: pointer;
    }

    #vcomments ol li {
        list-style-type: decimal;
    }

    #vcomments ol,
    ul {
        display: block;
        padding-left: 2em;
        word-spacing: 0.05rem;
    }

    #vcomments ul li,
    ol li {
        display: list-item;
        line-height: 1.8rem;
        font-size: 1rem;
    }

    #vcomments ul li {
        list-style-type: disc;
    }

    #vcomments ul ul li {
        list-style-type: circle;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    #vcomments table, th, td {
        border: 0;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments h1 {
        font-size: 1.85rem;
        font-weight: bold;
        line-height: 2.2rem;
    }

    #vcomments h2 {
        font-size: 1.65rem;
        font-weight: bold;
        line-height: 1.9rem;
    }

    #vcomments h3 {
        font-size: 1.45rem;
        font-weight: bold;
        line-height: 1.7rem;
    }

    #vcomments h4 {
        font-size: 1.25rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    #vcomments h5 {
        font-size: 1.1rem;
        font-weight: bold;
        line-height: 1.4rem;
    }

    #vcomments h6 {
        font-size: 1rem;
        line-height: 1.3rem;
    }

    #vcomments p {
        font-size: 1rem;
        line-height: 1.5rem;
    }

    #vcomments hr {
        margin: 12px 0;
        border: 0;
        border-top: 1px solid #ccc;
    }

    #vcomments blockquote {
        margin: 15px 0;
        border-left: 5px solid #42b983;
        padding: 1rem 0.8rem 0.3rem 0.8rem;
        color: #666;
        background-color: rgba(66, 185, 131, .1);
    }

    #vcomments pre {
        font-family: monospace, monospace;
        padding: 1.2em;
        margin: .5em 0;
        background: #272822;
        overflow: auto;
        border-radius: 0.3em;
        tab-size: 4;
    }

    #vcomments code {
        font-family: monospace, monospace;
        padding: 1px 3px;
        font-size: 0.92rem;
        color: #e96900;
        background-color: #f8f8f8;
        border-radius: 2px;
    }

    #vcomments pre code {
        font-family: monospace, monospace;
        padding: 0;
        color: #e8eaf6;
        background-color: #272822;
    }

    #vcomments pre[class*="language-"] {
        padding: 1.2em;
        margin: .5em 0;
    }

    #vcomments code[class*="language-"],
    pre[class*="language-"] {
        color: #e8eaf6;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }

    #vcomments b,
    strong {
        font-weight: bold;
    }

    #vcomments dfn {
        font-style: italic;
    }

    #vcomments small {
        font-size: 85%;
    }

    #vcomments cite {
        font-style: normal;
    }

    #vcomments mark {
        background-color: #fcf8e3;
        padding: .2em;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }

    /* 修复评论第一行位置错位 */
    .v .vlist .vcard {
    padding-top: 2.5em !important ;
    }
</style>

<div class="card valine-card" data-aos="fade-up">
    <div id="vcomments" class="card-content"></div>
</div>

<script src="/libs/valine/av-min.js"></script>
<script src="/libs/valine/Valine.min.js"></script>
<!-- <link rel="stylesheet" type="text/css" href="/libs//libs/jQuery-emoji/dist/css/jquery.emoji.css">
<script src="/libs//libs/jQuery-emoji/dist/js/jquery.emoji.min.js"></script>
<script src="/libs//libs/jQuery-emoji/dist/js/emoji.list.js"></script> -->
<script>
    new Valine({
        el: '#vcomments',
        appId: '2Kc1yifl00dRA6CYQxICVIe4-MdYXbMMI',
        appKey: 'xni6ILbDL2WVE4HDucMuDtx7',
        notify: 'true' === 'true',
        verify: 'true' === 'true',
        visitor: 'true' === 'true',
        avatar: '',
        pageSize: '10',
        lang: 'zh-cn',
        placeholder: 'just go go ヾﾉ≧∀≦)o ',

    });

//     function parse_emoji() {
//     jQuery(".vcontent").emojiParse({
//       basePath: '/libs/jQuery-emoji/images/emoji',
//       icons: emojiLists   // 注：详见 js/emoji.list.js
//     });
//   }
  
//   setTimeout(function() {
//     // jQuery emoji 解析
//     parse_emoji();
//     // jquery emoji 初始化
//     jQuery(".veditor").emoji({
//       showTab: true,
//       animation: 'slide',
//       basePath: '/libs/jQuery-emoji/images/emoji',
//       icons: emojiLists  // 注：详见 js/emoji.list.js
//     });
//     jQuery(".vmore").on("click", function() {
//       setTimeout(function() {
//         parse_emoji();
//       }, 500);
//     });
//   }, 800)

</script>
    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fa fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/diary/2021/08/22/diary-20210822-1/">
                    <div class="card-image">
                        
                        
                        <img src="/diary/medias/featureimages/7.jpg" class="responsive-img" alt="Mapbox GL入门">
                        
                        <span class="card-title">Mapbox GL入门</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            什么是MapboxMapbox用于创建自定义应用程序，解决地图、数据和空间分析问题。Mapbox 的工具集是模块化的，用以支持 Web 和移动地图开发制作过程的每个环节。无论您的目标是创建一个精美的地图来适配您的网站，还是建立一个功能齐全的
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="fa fa-clock-o fa-fw icon-date"></i>2021-08-22
                        </span>
                        <span class="publish-author">
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/diary/tags/MapboxGL/" target="_blank">
                        <span class="chip bg-color">MapboxGL</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fa fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/diary/2021/08/09/diary-20210809-1/">
                    <div class="card-image">
                        
                        
                        <img src="/diary/medias/featureimages/18.jpg" class="responsive-img" alt="D3入门">
                        
                        <span class="card-title">D3入门</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            什么是D3.jsD3.js是基于数据驱动文档工作方式的一款JavaScript函数库，主要用于网页作图、生成互动图形，是最流行的可视化库之一。  
d3-7.0.0.tgz  
1. 一款JavaScript的函数库  
2. 借助HTML
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="fa fa-clock-o fa-fw icon-date"></i>2021-08-09
                            </span>
                        <span class="publish-author">
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/diary/tags/D3/" target="_blank">
                        <span class="chip bg-color">D3</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>
</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('120')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + '来源: 车舟慢<br />'
            + '作者: <br />'
            + '链接: <a href="' + url + '">' + url + '</a><br />'
            + '本文章著作权归作者所有，任何形式的转载都请注明出处。';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () {bodyElement.removeChild(newdiv);}, 200);
    });
</script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="fa fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fa fa-list"></i>
    </a>
</div>


<script src="/diary/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            // headingsOffset: -205,
            headingSelector: 'h1, h2, h3, h4, h5'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h1, h2, h3, h4, h5').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).slideUp(500);
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).slideDown(500);
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>
    

</main>


        <footer class="page-footer bg-color">
    <div class="container row center-align">
        <div class="col s12 m8 l8 copy-right">
            

            <br>
            <span id="sitetime"></span><span class="my-face">ღゝ◡╹)ノ♡</span>
            <br>

            

            
            <!--
            
			
                &nbsp; | &nbsp;字数统计:&nbsp;
    <span class="white-color">650.5k</span> 字  
			
            
			
			-->

            
            <br>

        </div>

        <div class="col s12 m4 l4 social-link social-statis">

 
    <a href="https://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=617641594@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fa fa-envelope-open"></i>
    </a>






    <a href="http://wpa.qq.com/msgrd?v=3&uin=617641594&site=qq&menu=yes" class="tooltipped" target="_blank" data-tooltip="访问我的QQ空间" data-position="top" data-delay="50">
        <i class="fa fa-qq"></i>
    </a>




<!--

    <a href="/diary/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fa fa-rss"></i>
    </a>

--></div>

    </div>
</footer>

<div class="progress-bar"></div>

<script language=javascript>
    function siteTime() {
        window.setTimeout("siteTime()", 1000);
        var seconds = 1000;
        var minutes = seconds * 60;
        var hours = minutes * 60;
        var days = hours * 24;
        var years = days * 365;
        var today = new Date();
        var todayYear = today.getFullYear();
        var todayMonth = today.getMonth() + 1;
        var todayDate = today.getDate();
        var todayHour = today.getHours();
        var todayMinute = today.getMinutes();
        var todaySecond = today.getSeconds();

        /* Date.UTC() -- 返回date对象距世界标准时间(UTC)1970年1月1日午夜之间的毫秒数(时间戳)
        year - 作为date对象的年份，为4位年份值
        month - 0-11之间的整数，做为date对象的月份
        day - 1-31之间的整数，做为date对象的天数
        hours - 0(午夜24点)-23之间的整数，做为date对象的小时数
        minutes - 0-59之间的整数，做为date对象的分钟数
        seconds - 0-59之间的整数，做为date对象的秒数
        microseconds - 0-999之间的整数，做为date对象的毫秒数 */

        var t1 = Date.UTC(2020, 5, 1, 00, 00, 00); //北京时间2019-8-1 00:00:00
        var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
        var diff = t2 - t1;
        var diffYears = Math.floor(diff / years);
        var diffDays = Math.floor((diff / days) - diffYears * 365);
        var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
        var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) / minutes);
        var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours - diffMinutes *
            minutes) / seconds);
        document.getElementById("sitetime").innerHTML = "本站已坚持运行 " + diffYears + " 年 " + diffDays + " 天 " + diffHours +
            " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒" ;
    } /*因为建站时间还没有一年，就将之注释掉了。需要的可以取消*/
    siteTime();
</script>






        <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fa fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>
<script src="/diary/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("/diary/" + "search.xml", 'searchInput', 'searchResult');
});
</script>
        <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fa fa-angle-up"></i>
    </a>
</div>


        <script src="/diary/libs/materialize/materialize.min.js"></script>
        <script src="/diary/libs/masonry/masonry.pkgd.min.js"></script>
        <script src="/diary/libs/aos/aos.js"></script>
        <script src="/diary/libs/scrollprogress/scrollProgress.min.js"></script>
        <script src="/diary/libs/lightGallery/js/lightgallery-all.min.js"></script>
        <script src="/diary/js/matery.js"></script>

        <!-- Global site tag (gtag.js) - Google Analytics -->



        
            <script src="/diary/libs/others/clicklove.js"></script>
        

        

        
        <script type="text/javascript">
            var OriginTitile = document.title,
                st;
            document.addEventListener("visibilitychange", function () {
                document.hidden ? (document.title = "看不见我🙈~看不见我🙈~", clearTimeout(st)) : (document.title =
                    "(๑•̀ㅂ•́) ✧被发现了～", st = setTimeout(function () {
                        document.title = OriginTitile
                    }, 3e3))
            })
        </script>

       
        

        
        

    
        

    
        

        

        
        

        
        

        
        
            <script type="text/javascript">
            var windowWidth = $(window).width();
            if (windowWidth > 992) {
                document.write('<script type="text/javascript" src="/diary/libs/background/ribbon-dynamic.js"><\/script>');
            }
            </script>
        

    <script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                preloadRatio: 1,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(n){n.imageLazyLoadSetting.processImages=o;var e=n.imageLazyLoadSetting.isSPA,i=n.imageLazyLoadSetting.preloadRatio||1,r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function o(){e&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var t,a=0;a<r.length;a++)0<=(t=(t=r[a]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(n.innerHeight*i||document.documentElement.clientHeight*i)&&function(){var t,e,n,i,o=r[a];t=o,e=function(){r=r.filter(function(t){return o!==t})},n=new Image,i=t.getAttribute("data-original"),n.onload=function(){t.src=i,e&&e()},t.src!==i&&(n.src=i)}()}o(),n.addEventListener("scroll",function(){var t,e;t=o,e=n,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this);</script></body>
</html>